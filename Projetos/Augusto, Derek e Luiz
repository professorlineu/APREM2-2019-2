//VOCE PODE BAIXAR O PROTOTIPO DESSE JOGO ACESSANDO O LINK:https://mega.nz/#!kKJ1ECDL!nCAPHvg0VyxpJv22VJCB8gsoaWoIk55wxq1vJASLgLQ  
//O CODIGO FONTE JA ESTARA DENTRO DO ARQUIVO BAIXADO, ENTAO VC N PRECISA COPIAR ESTE DO SITE. SIGA OS PASSOS ABAIXO//
//PARA JOGAR ABRA O CODE BLOCKS E CLIQUE EM FILE > OPEN > Allegro.cbp (dentro da pasta baixada)//
//O CODE BLOCKS ABRIRÁ ESSE CODIGO FONTE, DEPOIS EH SOH COMPILAR//

#include <allegro5/allegro5.h>
#include <allegro5/allegro_native_dialog.h>
#include <allegro5/allegro_font.h>
#include<allegro5/allegro_ttf.h>
#include<allegro5/allegro_primitives.h>
#include<allegro5/allegro_image.h>
#include<math.h>
#include <time.h>

const int ScreenWidth = 800;
const int ScreenHeight = 600;
const float FPS = 15;
const float BOLAFPS = 60;
const int LARGURA_TELA = 800;
const int ALTURA_TELA = 600;

bool Colisao (float x, float y, float ex, float ey, int width, int height)
{
    if(x + 40 < ex || ex + 40 < x || y + 30 < ey || y > ey + 30)
    {
     return false;
    }
    return true;
}

bool Colisao2 (float x, float y, float ex, float ey, float width, float height, float width2, float height2)
{
    if(x + width <= ex || ex + width2 <= x || y + height <= ey || y >= ey + height2)
    {
     return false;
    }
    else
    {
       return true;
    }

}


void cameraUpdate(float *cameraPosition, float x, float y, int width, int height)
{
    cameraPosition[0] = -(ScreenWidth/2) + (x+width/2);
    cameraPosition[1] = -(600) + (y+height/2);
    if(cameraPosition[0]<=0)
    cameraPosition[0]=0;
    if(cameraPosition[1]<=0)
        cameraPosition[1] = 0;
}

int main()
{
    ALLEGRO_DISPLAY* display;

    float posicaocamerax;
    float velcamera = 10;
enum Direction {DOWN, UP, LEFT, RIGHT};
bool rebobina = true;
bool pressenter = true;
bool OPEN = !false;
bool ie =  true;
bool done = true;
bool done2 = true;
bool boat = true;
bool ilha = true;
bool ilha2 = true;
bool done3 = !true;
bool done4 = true;
bool done5 = true;
bool draw = true;
bool active = false;
bool morte = false;
bool poder = false;
bool jump = false;
bool pulo = false;
bool dinheiro = true;
bool tiro = false;
bool cruz = true;
bool chave = false;
bool limitada = true;
bool pegou = false;
bool pegou2 = false;
bool pegou3 = false;
bool platape = false;
bool plataru1 = false;
bool Ebola = true;
bool vampvive = true;
bool vampvive2 = true;
bool lobo = true;
bool abrir = false;
bool Ebolavive = true;
bool lobovive = true;
bool boss1vive = true;
bool boss1 = true;
bool chest = false;
bool firereliq = false;
bool permapoder = false;
bool refugio = false;
bool boss1morre = false;
bool iriguchi = false;
bool olho = true;
bool olhovive = true;
bool queima2 = false;
bool enter = false;
bool livro = false;
bool ler = false;
bool fruto = true;
bool pistola = false;
bool oracao = false;
bool fala1 = true;
bool fala1_1 = false;
bool fala1_2 = false;
bool fala1_3 = false;
bool fala1_4 = false;
bool fala3_1 = false;
bool fala3_2 = false;
bool fala3_3 = false;
bool fala3_4 = false;
bool fala3_5 = false;
bool fala3_6 = false;
bool fala3_7 = false;
bool fala3_8 = false;
bool fala4_1 = false;
bool fala4_2 = false;
bool fala4_3 = false;
bool fala4_4 = false;
bool fala4_5 = false;
bool fala4_6 = false;
bool fala4_7 = false;
bool fala4_8 = false;
bool fala4_9 = false;
bool fala4_10 = false;
bool fala4_11 = false;
bool fala4_12 = false;
bool cutscene1 = false;
bool cutscene2 = false;
bool zombie1vive = true;
bool zombie2vive = true;
bool zombie3vive = true;
bool zoiovive[3] = {1,1,1};
bool vuneravel = true;
bool noar = true;
bool historia = false;
bool fade = false;
bool bat[5] = {1,1,1,1,1};
bool pisca[4] = {1,0,1,0};
float x = 100,y = 100, movespeed=10, jumpspeed=15;
float iAleatorio;
float iAleatorio2;
float iAleat[2] = {0,0};
float  cameraPosition[2]={0,0};
float autocamy = -300;
int fading = 0;
int fading1 = 0;
int dir = DOWN;
int sourceX = NULL;
int sourceY = NULL;
int sair = 0;
float bolax[12] = {121,242,363,484,605,726,847,968,1089,1200,1350,0};
float bolay[12] = {-100,-200,-300,-400,-500,-600,-700,-800,-900,-1000,-1100,-1200};
float velbola = 1;
float posx=800;
float posy=-250;
float lobox = 400;
int loboy=480;
int ratox = 500;
int ratoy = 480;
int mocavamp1x = 500;
int mocavamp1y =650;
int homemvamp1x = 1000;
int homemvamp1y = 640;
int zombiex[3] = {0,40,20};
int zombiey[3] = {470,470,470};
int velzombie[3] = {3,3,3};
int olhox = 392;
int olhoy = 495;
float hikarix = 2510;
float hikariy = 480;
//float hikarix = 92;
//float hikariy = 485;
float fogx = 0;
float velfog = 1.0;
float velhikari = 0.3;
float zoiox[3] = {900,2700,2700};
float zoioy[3] = {500,330,310};
float batx[5] = {500,1000,1500,2000,2500};
float baty[5] = {300,300,300,300,300};
float velzoio[3] = {0,0.1,0.1};
int velobox = 20;
int velobox2 = 20;
int velvamp = 2;
int velvamp2 = 6;
int velrato = 3;
float velboat = 0.5;
float veltemplo = 0.2;
float templox = 900;
float boatx = 150, boaty = 470;
int cruzx = 517, cruzy = 180;
int posx_atual = 0;
int velx_tiro = 30;
int moeda1x = 400;
int moeda1y = 400;
int moeda2x = 350;
int moeda2y = 400;
int moeda3x ;
int moeda3y ;
int moeda4x ;
int moeda4y ;
int moeda5x ;
int moeda5y ;
int moeda6x ;
int moeda6y ;
int moeda7x ;
int moeda7y ;
int moeda8x ;
int moeda8y ;
float velx = 0, vely = 0;
float posx_tiro, posy_tiro;
const float gravity = 1;
int altura_sprite_pulo=50, largura_sprite_pulo=30;
int altura_sprite_moedas = 18, largura_sprite_moedas = 16;
int altura_sprite_tiro = 17, largura_sprite_tiro = 17;
int altura_sprite_porta = 60, largura_sprite_porta = 55;
int altura_sprite_lobo = 32, largura_sprite_lobo = 64;
int altura_sprite_boss1 = 181, largura_sprite_boss1 = 181;
int altura_sprite_fogueira = 64, largura_sprite_fogueira = 64;
int altura_sprite_poder = 57, largura_sprite_poder = 71;
int altura_sprite_bau = 32, largura_sprite_bau = 32;
int altura_sprite_reliq = 126, largura_sprite_reliq = 100;
int altura_sprite_boss1morto = 80, largura_sprite_boss1morto = 69;
int altura_sprite_vampmoca1 = 64, largura_sprite_vampmoca1 = 48;
int altura_sprite_homemvamp1 = 64, largura_sprite_homemvamp1 = 48;
int altura_sprite_hikari = 32, largura_sprite_hikari = 24;
int altura_sprite_rato = 32,largura_sprite_rato = 32;
int altura_sprite_oracao[7] = {64,64,64,64,64,64,64} , largura_sprite_oracao[7] = {64,64,64,64,64,64,64};
int altura_sprite_zombie = 64, largura_sprite_zombie = 48;
int altura_sprite_planta = 32, largura_sprite_planta = 32;
int altura_sprite_olho = 32, largura_sprite_olho = 32;
int altura_sprite_HP = 21, largura_sprite_HP = 0;
int altura_sprite_BOSS1HP = 25, largura_sprite_BOSS1HP = 0;
int altura_sprite_MP = 21, largura_sprite_MP = 0;
int altura_sprite_bat = 64, largura_sprite_bat = 48;
int colunas_pulo=3, coluna_atual_pulo=0;
int colunas_moedas=1, coluna_atual_moedas = 0;
int colunas_tiro = 6, coluna_atual_tiro = 0;
int colunas_porta = 1, coluna_atual_porta = 0;
int colunas_lobo = 5, coluna_atual_lobo = 0;
int colunas_boss1 = 8, coluna_atual_boss1 = 0;
int colunas_fogueira = 5, coluna_atual_fogueira = 0;
int colunas_poder = 8, coluna_atual_poder = 0;
int coluna_atual_bau = 0;
int colunas_reliq = 4, coluna_atual_reliq = 0;
int colunas_boss1morto = 27, coluna_atual_boss1morto = 0;
int colunas_vampmoca1 = 3, coluna_atual_vampmoca1 = 0;
int colunas_homemvamp1 = 3, coluna_atual_homemvamp1 = 0;
int colunas_rato = 3, coluna_atual_rato = 0;
int colunas_oracao[7] = {10,10,10,10,10,10,10}, coluna_atual_oracao[7] = {0,0,0,0,0,0,0};
int coluna_atual_zombie[3] = {0,0,0}, colunas_zombie[3] = {3,3,3};
int colunas_planta = 8, coluna_atual_planta = 0;
int colunas_olho = 8, coluna_atual_olho = 0;
int colunas_hikari = 3, coluna_atual_hikari = 0;
int colunas_HP = 12, coluna_atual_HP = 12;
int colunas_BOSS1HP = 23, coluna_atual_BOSS1HP = 23;
int colunas_MP = 12, coluna_atual_MP = 12;
int colunas_bat = 3, coluna_atual_bat = 0;
int linhas_moedas=4, linha_atual_moeda = 0;
int linha_atual_pulo=4;
int linhas_porta = 3;
int linha_atual_porta = 0;
int linhas_lobo = 2;
int linha_atual_lobo = 0;
int linhas_boss1 = 1;
int linha_atual_boss1 = 0;
int linhas_vampmoca1 = 4, linha_atual_vampmoca1 = 0;
int linhas_homemvamp1 = 4, linha_atual_homemvamp1 =0;
int linhas_rato = 4, linha_atual_rato = 0;
int linhas_oracao[7] = {5,5,5,5,5,5,5}, linha_atual_oracao[7] = {0,0,0,0,0,0,0};
int linhas_zombie[3] = {3,3,3}, linha_atual_zombie[3] = {1,3,1};
int linhas_olho = 3, linha_atual_olho = 0;
int linhas_hikari = 4, linha_atual_hikari = 0;
int regiao_x_folha_pulo=0, regiao_y_folha_pulo=4;
int regiao_x_folha_moedas=0, regiao_y_folha_moedas = 0;
int regiao_x_tiro = 0, regiao_y_tiro = 0;
int regiao_x_folha_porta = 0, regiao_y_folha_porta = 0;
int regiao_x_folha_lobo = 0, regiao_y_folha_lobo = 0;
int regiao_x_folha_boss1 = 0, regiao_y_folha_boss1 = 0;
int regiao_x_folha_fogueira = 0, regiao_y_folha_fogueira = 0;
int regiao_x_folha_poder = 0, regiao_y_folha_poder = 0;
int regiao_x_folha_bau = 0, regiao_y_folha_bau =0;
int regiao_x_folha_reliq = 0;
int regiao_x_folha_boss1morto = 0;
int regiao_x_folha_vampmoca1 = 0, regiao_y_folha_vampmoca1 = 0;
int regiao_x_folha_homemvamp1 = 0, regiao_y_folha_homemvamp1 = 0;
int regiao_x_folha_rato = 0,regiao_y_folha_rato = 0;
int regiao_x_folha_oracao[7] = {0,0,0,0,0,0,0}, regiao_y_folha_oracao[7] = {0,0,0,0,0,0,0};
int regiao_x_folha_zombie[3] = {0,0,0}, regiao_y_folha_zombie[3] = {0,0,0};
int regiao_x_folha_planta = 0, regiao_y_folha_planta = 0;
int regiao_x_folha_olho = 0, regiao_y_folha_olho = 0;
int regiao_x_folha_hikari = 0, regiao_y_folha_hikari =0;
int regiao_x_folha_HP = 0, regiao_y_folha_HP =0;
int regiao_x_folha_BOSS1HP = 0, regiao_y_folha_BOSS1HP =0;
int regiao_x_folha_MP = 0, regiao_y_folha_MP =0;
int regiao_x_folha_bat = 0, regiao_y_folha_bat =0;
int frames_sprite_pulo=6, cont_frames_pulo=0;
int frames_sprite_moedas=2, cont_frames_moedas=0;
int frames_sprite_tiro = 1, cont_frames_tiro = 0;
int frames_sprite_porta = 10, cont_frames_porta = 0;
int frames_sprite_lobo = 7, cont_frames_lobo = 0;
int frames_sprite_boss1 = 6, cont_frames_boss1 = 0;
int frames_sprite_fogueira = 6, cont_frames_fogueira = 0;
int frames_sprite_poder = 1, cont_frames_poder = 0;
int frames_sprite_reliq = 2, cont_frames_reliq = 0;
int frames_sprite_boss1morto = 6, cont_frames_boss1morto = 0;
int frames_sprite_vampmoca1 = 6, cont_frames_vampmoca1 = 0;
int frames_sprite_homemvamp1 = 6, cont_frames_homemvamp1 = 0;
int frames_sprite_rato = 6, cont_frames_rato = 0;
int frames_sprite_oracao[7] = {5,5,5,5,5,5,5}, cont_frames_oracao[7] = {0,0,0,0,0,0,0};
int frames_sprite_zombie = 6, cont_frames_zombie = 0;
int frames_sprite_planta = 12, cont_frames_planta = 0;
int frames_sprite_olho = 12, cont_frames_olho = 0;
int frames_sprite_hikari = 4, cont_frames_hikari = 0;
int frames_sprite_bat = 3, cont_frame_bat =0;
int cont_passos_vampmoca1 = 0 ;
int cont_passos_homemvamp1 = 0;
int cont_tempo_vampqueima = 0;
int cont_tempo_vampqueima2 = 0;
int cont_passos_rato = 0;
int cont_passos_zoio = 0;
int cont_passos_hikari = 0;
int cont_horas = 0;
int cont_frames_fase = 0;
int cont_frames_item = 0;
int cont_moedas_prata = 0;
int cont_vidas = 10;
int cont_dano = 0;
int score = 0 ;
int cont_frames_boss_morre = 0;
int cont_passos_boss_inicio = 0;
int cont_frames_done5 = 0;
int cont_frames_socorro = 0;
int cont_frames_cutscene2 = 0;
int cont_frames_dano = 0;
int cont_frames_MP = 0;
int cont_frames_morto = 0;
int cont_frames_open = 0;
int cont_frames_pisca;
int cont_frames_pisca2;



if(!al_init())
{
    al_show_native_message_box(NULL,"ERROR",NULL,"Allegro couldnt initialize",NULL,NULL);
}
al_set_new_display_flags(ALLEGRO_FULLSCREEN_WINDOW);
      display = al_create_display(ScreenWidth,ScreenHeight);


if(!display)
{
    al_show_native_message_box(NULL,"ERROR",NULL,"COULD N CREAT",NULL,NULL);
}


al_set_window_position(display,0,0);
al_init_font_addon();
al_init_ttf_addon();
al_init_image_addon();
al_install_keyboard();


ALLEGRO_FONT* font = al_load_font("atari.ttf",36,NULL);
ALLEGRO_FONT* font2 = al_load_font("atari.ttf",16,NULL);
ALLEGRO_FONT* font3 = al_load_font("atari.ttf",25,NULL);
ALLEGRO_FONT* font4 = al_load_font("atari.ttf",100,NULL);
ALLEGRO_BITMAP* KEENOP = al_load_bitmap("keenop.png");
ALLEGRO_BITMAP* BAT = al_load_bitmap("bat48x64.png");
ALLEGRO_BITMAP* ESFERA1 = al_load_bitmap("esfera1.png");
ALLEGRO_BITMAP* BOSS1INICIO = al_load_bitmap("boss1inicio.png");
ALLEGRO_BITMAP* BOSS1HP = al_load_bitmap("boss1hp.png");
ALLEGRO_BITMAP* DEADTREE = al_load_bitmap("deadtree.png");
ALLEGRO_BITMAP* HP = al_load_bitmap("HP.png");
ALLEGRO_BITMAP* MP = al_load_bitmap("MP.png");
ALLEGRO_BITMAP* KAGESHIMA = al_load_bitmap("ilhadasombras.png");
ALLEGRO_BITMAP* FADE = al_load_bitmap("fade.png");
ALLEGRO_BITMAP* DEAMON = al_load_bitmap("deamon.png");
ALLEGRO_BITMAP* YUYA = al_load_bitmap("yuya.png");
ALLEGRO_BITMAP* YUYA2 = al_load_bitmap("yuya2.png");
ALLEGRO_BITMAP* YUKIYAMA = al_load_bitmap("yukiyama.png");
ALLEGRO_BITMAP* YUKIMACHI = al_load_bitmap("yukimachi.png");
ALLEGRO_BITMAP* VAMPIRA = al_load_bitmap("vampira3.png");
ALLEGRO_BITMAP* FOG = al_load_bitmap("fog.png");
ALLEGRO_BITMAP* CLIF = al_load_bitmap("clif.png");
ALLEGRO_BITMAP* ESCUDO = al_load_bitmap("escudo.png");
ALLEGRO_BITMAP* BOAT = al_load_bitmap("barco.png");
ALLEGRO_BITMAP* BESOURO = al_load_bitmap("besouro50x50.png");
ALLEGRO_BITMAP* GRAMA = al_load_bitmap("grama.png");
ALLEGRO_BITMAP* GRAMA2 = al_load_bitmap("grama2.png");
ALLEGRO_BITMAP* GRAMA3 = al_load_bitmap("grama3.png");
ALLEGRO_BITMAP* ZOIO = al_load_bitmap("olho32x32.png");
ALLEGRO_BITMAP* PLATAFORMA1 = al_load_bitmap("plataforma1.png");
ALLEGRO_BITMAP* PLATAFORMA2 = al_load_bitmap("plataforma2.png");
ALLEGRO_BITMAP* PLANTA = al_load_bitmap("planta32x32.png");
ALLEGRO_BITMAP* ZOMBIE = al_load_bitmap("zombie48x64.png");
ALLEGRO_BITMAP* ZOMBIE2 = al_load_bitmap("zombie2.png");
ALLEGRO_BITMAP* ZOMBIE3 = al_load_bitmap("zombie3.png");
ALLEGRO_BITMAP* ORACAO = al_load_bitmap("oracao.png");
ALLEGRO_BITMAP* MENSAGEMITEM = al_load_bitmap("mensagemitem.png");
ALLEGRO_BITMAP* MENSAGEMHIKARI = al_load_bitmap("mensagemhikari.png");
ALLEGRO_BITMAP* FALA1 = al_load_bitmap("fala1.png");
ALLEGRO_BITMAP* FALA2 = al_load_bitmap("fala2.png");
ALLEGRO_BITMAP* FALA3 = al_load_bitmap("fala3.png");
ALLEGRO_BITMAP* FALA4 = al_load_bitmap("fala4.png");
ALLEGRO_BITMAP* FALA5 = al_load_bitmap("fala5.png");
ALLEGRO_BITMAP* PISTOLA = al_load_bitmap("pistola.png");
ALLEGRO_BITMAP* FRUTO = al_load_bitmap("fruto.png");
ALLEGRO_BITMAP* LIVRO = al_load_bitmap("livro.png");
ALLEGRO_BITMAP* BBMASAGE = al_load_bitmap("bigboxmesage.png");
ALLEGRO_BITMAP* RATO = al_load_bitmap("rat.png");
ALLEGRO_BITMAP* CHAVE = al_load_bitmap("chave.png");
ALLEGRO_BITMAP* VAMPMOCA1 = al_load_bitmap("vampira.png");
ALLEGRO_BITMAP* VAMPMOCA2 = al_load_bitmap("vampira2.png");
ALLEGRO_BITMAP* HOMEMVAMP1 = al_load_bitmap("homemvamp1.png");
ALLEGRO_BITMAP* HOMEMVAMP2 = al_load_bitmap("homemvamp2.png");
ALLEGRO_BITMAP* QUEIMA = al_load_bitmap("queima.png");
ALLEGRO_BITMAP* CRUZ = al_load_bitmap("cruz.png");
ALLEGRO_BITMAP* CHAOCASA = al_load_bitmap("chaocasa.png");
ALLEGRO_BITMAP* CAMA = al_load_bitmap("cama.png");
ALLEGRO_BITMAP* ACIMAPORTA = al_load_bitmap("acimaporta.png");
ALLEGRO_BITMAP* MESA = al_load_bitmap("mesa.png");
ALLEGRO_BITMAP* MESA2 = al_load_bitmap("mesa2.png");
ALLEGRO_BITMAP* GAVETAS = al_load_bitmap("gavetas.png");
ALLEGRO_BITMAP* FOGAO = al_load_bitmap("fogao.png");
ALLEGRO_BITMAP* ESTANTELIVROS = al_load_bitmap("estantelivros.png");
ALLEGRO_BITMAP* ESPELHO = al_load_bitmap("espelho.png");
ALLEGRO_BITMAP* BELICHE = al_load_bitmap("beliche.png");
ALLEGRO_BITMAP* ARMARIO = al_load_bitmap("armario.png");
ALLEGRO_BITMAP* COZINHA = al_load_bitmap("cozinha.png");
ALLEGRO_BITMAP* CRIADO = al_load_bitmap("criado.png");
ALLEGRO_BITMAP* RELOGIO = al_load_bitmap("relogio.png");
ALLEGRO_BITMAP* TAPETE = al_load_bitmap("tapete.png");
ALLEGRO_BITMAP* OLHOLAREIRA = al_load_bitmap("olholareira.png");
ALLEGRO_BITMAP* VELA2 = al_load_bitmap("vela2.png");
ALLEGRO_BITMAP* PRATELEIRA = al_load_bitmap("prateleira.png");
ALLEGRO_BITMAP* TSUKUE = al_load_bitmap("tsukue.png");
ALLEGRO_BITMAP* JANELA = al_load_bitmap("janela.png");
ALLEGRO_BITMAP* JANELA2 = al_load_bitmap("janela2.png");
ALLEGRO_BITMAP* ORGAO = al_load_bitmap("orgao.png");
ALLEGRO_BITMAP* LAREIRA = al_load_bitmap("lareira.png");
ALLEGRO_BITMAP* MESA3 = al_load_bitmap("mesa3.png");
ALLEGRO_BITMAP* CARPET = al_load_bitmap("carpet.png");
ALLEGRO_BITMAP* PORTA2 = al_load_bitmap("porta2.png");
ALLEGRO_BITMAP* PLATACAVE1 = al_load_bitmap("platacave1.png");
ALLEGRO_BITMAP* PLATACAVE2 = al_load_bitmap("platacave2.png");
ALLEGRO_BITMAP* PLATACAVE3 = al_load_bitmap("platacave3.png");
ALLEGRO_BITMAP* PLATACAVE4 = al_load_bitmap("platacave4.png");
ALLEGRO_BITMAP* PLATACAVE5 = al_load_bitmap("platacave5.png");
ALLEGRO_BITMAP* PLATACAVE6 = al_load_bitmap("platacave6.png");
ALLEGRO_BITMAP* AGUACAVE1 = al_load_bitmap("aguacave1.png");
ALLEGRO_BITMAP* AGUACAVE2 = al_load_bitmap("aguacave2.png");
ALLEGRO_BITMAP* ARMADILHA = al_load_bitmap("armadilha.png");
ALLEGRO_BITMAP* ESPIRITOS = al_load_bitmap("espiritos.png");
ALLEGRO_BITMAP* CHAOCAVE = al_load_bitmap("chaocave.png");
ALLEGRO_BITMAP* ARVORECAVE1 = al_load_bitmap("arvorecave1.png");
ALLEGRO_BITMAP* ARVORECAVE2 = al_load_bitmap("arvorecave2.png");
ALLEGRO_BITMAP* ARVORECAVE3 = al_load_bitmap("arvorecave3.png");
ALLEGRO_BITMAP* OLHOCAVE = al_load_bitmap("olhocave.png");
ALLEGRO_BITMAP* IRIGUCHI =   al_load_bitmap("iriguchi.png");
ALLEGRO_BITMAP* PLACA = al_load_bitmap("placa.png");
ALLEGRO_BITMAP* CASA = al_load_bitmap("casa.png");
ALLEGRO_BITMAP* ARVOREF = al_load_bitmap("arvoref.png");
ALLEGRO_BITMAP* ARVOREF2 = al_load_bitmap("arvoref2.png");
ALLEGRO_BITMAP* ARVOREF3 = al_load_bitmap("trees.png");
ALLEGRO_BITMAP* RAIZ = al_load_bitmap("raiz.png");
ALLEGRO_BITMAP* KINOKO = al_load_bitmap("kinoko.png");
ALLEGRO_BITMAP* TRONCO = al_load_bitmap("tronco.png");
ALLEGRO_BITMAP* PLATAFORMAF = al_load_bitmap("plataformaf.png");
ALLEGRO_BITMAP* TAKARABAKO = al_load_bitmap("chest32x32.png");
ALLEGRO_BITMAP* MENSAGEM = al_load_bitmap("mensagem.png");
ALLEGRO_BITMAP* FIRERELIQ = al_load_bitmap("firereliq100x97.png");
ALLEGRO_BITMAP* PODER = al_load_bitmap("poderfogo72x57.png");
ALLEGRO_BITMAP* FOGUEIRA = al_load_bitmap("fogueira64x64.png");
ALLEGRO_BITMAP* BOSS1 = al_load_bitmap("1BOSS181x181.png");
ALLEGRO_BITMAP* BOSS1MORRE = al_load_bitmap("boss1morto69x69.png");
ALLEGRO_BITMAP* FUNDONEVE = al_load_bitmap("imagemfundo2.png");
ALLEGRO_BITMAP* FUNDONEVE2 = al_load_bitmap("snowclife2.png");
ALLEGRO_BITMAP* LOBO = al_load_bitmap("lobosprite64x32.png");
ALLEGRO_BITMAP* PINHO = al_load_bitmap("pinho162x200.png");
ALLEGRO_BITMAP* PINHO2 = al_load_bitmap("pinho2.png");
ALLEGRO_BITMAP* PINHO3 = al_load_bitmap("pinho3.png");
ALLEGRO_BITMAP* PINHO4 = al_load_bitmap("pinho4.png");
ALLEGRO_BITMAP* CHAOGELO = al_load_bitmap("chaogelosprite.png");
ALLEGRO_BITMAP* PLATAGELO1 = al_load_bitmap("platapedra1.png");
ALLEGRO_BITMAP* PLATAPEDRA2 = al_load_bitmap("platapedra2.png");
ALLEGRO_BITMAP* PLATAPEDRA3 = al_load_bitmap("platapedra3.png");
ALLEGRO_BITMAP* REFUGIO = al_load_bitmap("esconde.png");
ALLEGRO_BITMAP* PEDRABASE = al_load_bitmap("pedrabase.png");
ALLEGRO_BITMAP* PORTA = al_load_bitmap("portasprite55x60.png");
ALLEGRO_BITMAP* PLATAFORMA = al_load_bitmap("plataformasprite200x70.png");
ALLEGRO_BITMAP* ATIRA = al_load_bitmap("keentirosprite40x50.png");
ALLEGRO_BITMAP* TIRO = al_load_bitmap("tirosprite17x17.png");
ALLEGRO_BITMAP* MOEDA = al_load_bitmap("moedasprite16x18.png");
ALLEGRO_BITMAP* INU = al_load_bitmap("inu_sprite.png");
ALLEGRO_BITMAP* BOLA = al_load_bitmap("abelhasprite76x76.png");
ALLEGRO_BITMAP* keen = al_load_bitmap("keensprite30x50.png");
ALLEGRO_BITMAP* morto = al_load_bitmap("keenmortosprite40x45.png");
ALLEGRO_BITMAP* fundo = al_load_bitmap("chaosprite.png");
ALLEGRO_BITMAP* fundo1 = al_load_bitmap("chaosprite1.png");
ALLEGRO_BITMAP* fundo2 = al_load_bitmap("chaosprite2.png");
ALLEGRO_BITMAP* HIKARI = al_load_bitmap("hikarisprite.png");

ALLEGRO_TRANSFORM camera;
ALLEGRO_KEYBOARD_STATE keyState;
ALLEGRO_TIMER *timer = al_create_timer(1.0/FPS);
ALLEGRO_TIMER *BOLAtimer = al_create_timer(1.0/BOLAFPS);
ALLEGRO_TIMER *timercomando = al_create_timer(1.0/FPS);
ALLEGRO_EVENT_QUEUE* event_queue=al_create_event_queue();

al_register_event_source(event_queue,al_get_keyboard_event_source());
al_register_event_source(event_queue,al_get_display_event_source(display));
al_register_event_source(event_queue, al_get_timer_event_source(timer));
al_register_event_source(event_queue, al_get_timer_event_source(BOLAtimer));
al_register_event_source(event_queue, al_get_timer_event_source(timercomando));
al_convert_mask_to_alpha(BOLA,al_map_rgb(255,0,255));
al_convert_mask_to_alpha(fundo,al_map_rgb(255,0,255));
al_convert_mask_to_alpha(keen,al_map_rgb(255,0,0));
al_convert_mask_to_alpha(INU,al_map_rgb(255,0,255));
al_convert_mask_to_alpha(morto,al_map_rgb(255,0,0));
al_convert_mask_to_alpha(MOEDA,al_map_rgb(255,0,255));
al_convert_mask_to_alpha(TIRO,al_map_rgb(255,0,255));
al_convert_mask_to_alpha(ATIRA,al_map_rgb(255,0,0));
al_convert_mask_to_alpha(PLATAFORMA,al_map_rgb(255,0,255));
al_convert_mask_to_alpha(PORTA,al_map_rgb(255,0,255));
al_convert_mask_to_alpha(PLATAGELO1,al_map_rgb(255,0,255));
al_convert_mask_to_alpha(CHAOGELO,al_map_rgb(255,0,255));
al_convert_mask_to_alpha(PINHO,al_map_rgb(255,0,255));
al_convert_mask_to_alpha(LOBO,al_map_rgb(255,0,255));
al_convert_mask_to_alpha(BOSS1, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(FOGUEIRA,al_map_rgb(255,0,255));
al_convert_mask_to_alpha(PODER,al_map_rgb(255,0,255));
al_convert_mask_to_alpha(MENSAGEM,al_map_rgb(255,0,255));
al_convert_mask_to_alpha(PINHO3,al_map_rgb(255,0,255));
al_convert_mask_to_alpha(PINHO4,al_map_rgb(255,0,255));
al_convert_mask_to_alpha(BOSS1MORRE,al_map_rgb(255,0,255));
al_convert_mask_to_alpha(ESTANTELIVROS,al_map_rgb(255,0,0));
al_convert_mask_to_alpha(MESA2,al_map_rgb(255,0,0));
al_convert_mask_to_alpha(MESA,al_map_rgb(255,0,0));
al_convert_mask_to_alpha(GAVETAS,al_map_rgb(255,0,0));
al_convert_mask_to_alpha(FOGAO,al_map_rgb(255,0,0));
al_convert_mask_to_alpha(ESPELHO,al_map_rgb(255,0,0));
al_convert_mask_to_alpha(BELICHE,al_map_rgb(255,0,0));
al_convert_mask_to_alpha(ARMARIO,al_map_rgb(255,0,0));
al_convert_mask_to_alpha(COZINHA,al_map_rgb(255,0,0));
al_convert_mask_to_alpha(CRIADO,al_map_rgb(255,0,0));
al_convert_mask_to_alpha(RELOGIO,al_map_rgb(255,0,0));
al_convert_mask_to_alpha(TAPETE,al_map_rgb(255,0,0));
al_convert_mask_to_alpha(VELA2,al_map_rgb(255,0,0));
al_convert_mask_to_alpha(PRATELEIRA,al_map_rgb(255,0,0));
al_convert_mask_to_alpha(TSUKUE,al_map_rgb(255,0,0));
al_convert_mask_to_alpha(ORGAO,al_map_rgb(255,0,0));
al_convert_mask_to_alpha(LAREIRA,al_map_rgb(255,0,0));
al_convert_mask_to_alpha(MESA3,al_map_rgb(255,0,0));
al_convert_mask_to_alpha(PORTA2,al_map_rgb(255,0,0));
al_convert_mask_to_alpha(JANELA2,al_map_rgb(255,0,0));
al_convert_mask_to_alpha(CAMA,al_map_rgb(255,0,0));
al_convert_mask_to_alpha(VAMPMOCA1, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(VAMPMOCA2, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(HOMEMVAMP1, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(HOMEMVAMP2, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(CRUZ, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(QUEIMA, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(CHAVE, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(BBMASAGE, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(LIVRO, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(FRUTO, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(PISTOLA, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(MENSAGEMITEM, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(ORACAO, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(FALA1, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(FALA2, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(FALA3, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(ZOMBIE, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(ZOMBIE2, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(ZOMBIE3, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(PLANTA, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(BESOURO, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(FALA4, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(FALA5, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(MENSAGEMHIKARI, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(HIKARI, al_map_rgb(0,117,117));
al_convert_mask_to_alpha(CLIF, al_map_rgb(0,0,0));
al_convert_mask_to_alpha(BOAT, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(ESCUDO, al_map_rgb(0,0,0));
al_convert_mask_to_alpha(YUYA, al_map_rgb(0,0,0));
al_convert_mask_to_alpha(YUYA2, al_map_rgb(0,0,0));
al_convert_mask_to_alpha(DEAMON, al_map_rgb(136,0,255));
al_convert_mask_to_alpha(KAGESHIMA, al_map_rgb(255,255,255));
al_convert_mask_to_alpha(HP, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(MP, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(BOSS1INICIO, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(BOSS1HP, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(DEADTREE, al_map_rgb(255,255,255));
al_convert_mask_to_alpha(ESFERA1, al_map_rgb(0,0,0));
al_convert_mask_to_alpha(BAT, al_map_rgb(255,0,255));
al_convert_mask_to_alpha(KEENOP, al_map_rgb(0,0,0));


al_start_timer(timer);
al_start_timer(BOLAtimer);
al_start_timer(timercomando);

while(!OPEN)
{
ALLEGRO_EVENT events;
al_wait_for_event(event_queue, &events);
al_get_keyboard_state(&keyState);
cameraUpdate(cameraPosition,x,y,35,200);
al_identity_transform(&camera);
al_translate_transform(&camera, -cameraPosition[0],-cameraPosition[1]);
al_use_transform(&camera);

    if(events.type == ALLEGRO_EVENT_KEY_DOWN)
    {

        switch (events.keyboard.keycode)
        {
        case ALLEGRO_KEY_ESCAPE:
            OPEN = true;
        case ALLEGRO_KEY_ENTER:
            if(cont_frames_open<1980)
            {
            cont_frames_open = 1980;
            break;
            }
            pressenter = false;
            if (!pressenter)
            {
                OPEN = true;
                ie = false;
            }
        }
    }

    else if (events.type == ALLEGRO_EVENT_TIMER)
    {


        if(events.timer.source == timer)
        {


            if(al_key_down(&keyState,ALLEGRO_KEY_RIGHT))
            {
           //POR HORA N TEM FUNÇAO
            }

            else if(al_key_down(&keyState,ALLEGRO_KEY_UP))
            {
             //POR HORA N TEM FUNÇAO
            }
            else if(al_key_down(&keyState,ALLEGRO_KEY_DOWN))
            {
          //POR HORA N TEM FUNÇAO
            }

            else if(al_key_down(&keyState,ALLEGRO_KEY_LEFT))
            {
            //POR HORA N TEM FUNÇAO
            }
            else if(al_key_down(&keyState,ALLEGRO_KEY_C))
            {
            //POR HORA N TEM FUNÇAO
            }

           if (pisca[0])
           {
               cont_frames_pisca += 8;
               if (cont_frames_pisca >= 255)
               {
                   pisca[0] = false;
                   pisca[1] = true;
               }
           }
           if (pisca[1])
           {
               cont_frames_pisca -=8;
               if (cont_frames_pisca <= 0)
               {
                   pisca[1] = false;
                   pisca[0] = true;
               }
           }

           if (pisca[2])
           {
               cont_frames_pisca2 += 15;
               if (cont_frames_pisca2 >= 250)
               {
                   pisca[2] = false;
                   pisca[3] = true;
               }
           }
           if (pisca[3])
           {
               cont_frames_pisca2 -=15;
               if (cont_frames_pisca2 <= 10)
               {
                   pisca[3] = false;
                   pisca[2] = true;
               }
           }
        }

else if(events.timer.source == BOLAtimer)
{
cont_frames_open++;
}



if(draw)
{

if(cont_frames_open>=300 && cont_frames_open < 420)
{
   al_draw_text(font3,al_map_rgb(255,255,255),700,350,ALLEGRO_ALIGN_CENTER || ALLEGRO_ALIGN_CENTRE, "Ela era tudo para mim");
}
if(cont_frames_open>=480 && cont_frames_open < 540)
{
     al_draw_text(font3,al_map_rgb(255,255,255),700,350,ALLEGRO_ALIGN_CENTER || ALLEGRO_ALIGN_CENTRE, "Mas eles a levaram");
}
if(cont_frames_open>=540 && cont_frames_open < 780)
{
    al_draw_text(font3,al_map_rgb(255,255,255),700,350,ALLEGRO_ALIGN_CENTER || ALLEGRO_ALIGN_CENTRE, "e com ela levaram tambem minha bondade e compaixao");
}
if(cont_frames_open>=840 && cont_frames_open < 900)
{
    al_draw_text(font3,al_map_rgb(255,255,255),700,350,ALLEGRO_ALIGN_CENTER || ALLEGRO_ALIGN_CENTRE, "esse foi o erro deles");
}
if(cont_frames_open>=900 && cont_frames_open < 1140)
{
    al_draw_text(font3,al_map_rgb(255,255,255),700,350,ALLEGRO_ALIGN_CENTER || ALLEGRO_ALIGN_CENTRE, "porque agora, tudo o que me sobrou foi um coracao gelado");
}
if(cont_frames_open>=1200 && cont_frames_open < 1260)
{
    al_draw_text(font3,al_map_rgb(255,255,255),700,350,ALLEGRO_ALIGN_CENTER || ALLEGRO_ALIGN_CENTRE, "Eles prosperam em duvida");
}
if(cont_frames_open>=1320 && cont_frames_open < 1380)
{
    al_draw_text(font3,al_map_rgb(255,255,255),700,350,ALLEGRO_ALIGN_CENTER || ALLEGRO_ALIGN_CENTRE, "Seu banquete e o medo");
}
if(cont_frames_open>=1380 && cont_frames_open < 1500)
{
    al_draw_text(font3,al_map_rgb(255,255,255),700,350,ALLEGRO_ALIGN_CENTER || ALLEGRO_ALIGN_CENTRE, "Estas abominacoes contaminam este mundo");
}

  if(cont_frames_open>=1560 && cont_frames_open < 1740)
{
    al_draw_text(font3,al_map_rgb(255,255,255),700,350,ALLEGRO_ALIGN_CENTER || ALLEGRO_ALIGN_CENTRE, "e cada uma delas perecera em minhas maos");
}
if(cont_frames_open>=1740 && cont_frames_open < 1860)
{
    al_draw_text(font3,al_map_rgb(255,255,255),700,350,ALLEGRO_ALIGN_CENTER || ALLEGRO_ALIGN_CENTRE, "e se alguem ficar no meu caminho");
}
if(cont_frames_open>=1860 && cont_frames_open < 1980)
{
     al_draw_text(font3,al_map_rgb(255,255,255),700,350,ALLEGRO_ALIGN_CENTER || ALLEGRO_ALIGN_CENTRE, "eu os mandarei para a cova");
}
if(cont_frames_open>=1980)
{
    al_draw_tinted_bitmap(KEENOP,al_map_rgb(0,0,cont_frames_pisca),300,0,NULL);
     al_draw_text(font4,al_map_rgb(255,255,255),700,150,ALLEGRO_ALIGN_CENTER || ALLEGRO_ALIGN_CENTRE, "LIGHT BURY");
     al_draw_text(font3,al_map_rgb(cont_frames_pisca2,cont_frames_pisca2,cont_frames_pisca2),700,350,ALLEGRO_ALIGN_CENTER || ALLEGRO_ALIGN_CENTRE, "PRESS ENTER");
}
if(cont_frames_open>=1980 && pressenter)
{
   al_draw_text(font3,al_map_rgb(cont_frames_pisca2,cont_frames_pisca2,cont_frames_pisca2),700,350,ALLEGRO_ALIGN_CENTER || ALLEGRO_ALIGN_CENTRE, "PRESS ENTER");
}
    al_flip_display();
    al_clear_to_color(al_map_rgb(0,0,0));

}
    }
        }

while(!ie)
{

ALLEGRO_EVENT events;
al_wait_for_event(event_queue, &events);
al_get_keyboard_state(&keyState);
cameraUpdate(cameraPosition,x,y,35,500);
al_identity_transform(&camera);
al_translate_transform(&camera, -cameraPosition[0],-cameraPosition[1]);
al_use_transform(&camera);

 if(events.type == ALLEGRO_EVENT_KEY_UP)
    {

        switch (events.keyboard.keycode)
        {
        case ALLEGRO_KEY_Z:
        dir = 0;
        }
    }

    if(events.type == ALLEGRO_EVENT_KEY_DOWN)
    {

        switch (events.keyboard.keycode)
        {
        case ALLEGRO_KEY_ESCAPE:
            ie = true;
        case ALLEGRO_KEY_S:
           if(pegou)
           {
            cruz = true;
            cruzx = x;
            cruzy = y;
            pegou = false;
           }
        }
         switch (events.keyboard.keycode)
        {

        case ALLEGRO_KEY_C:

             if(chave && limitada && x>= 20-mocavamp1x && x<=mocavamp1x+30 && y>=20-mocavamp1y && y<=mocavamp1y+30)
            {
            chave = false ;
            limitada = false;
            fala1_4 = true;
            }
        }

         switch (events.keyboard.keycode)
        {

        case ALLEGRO_KEY_C:

             if(livro && x>= 20-homemvamp1x && x<=homemvamp1x+30 && y>=20-homemvamp1y && y<=homemvamp1y+30)
            {
            livro = false ;
            pegou2 = true;
            ler = true;
            }
        }

          switch (events.keyboard.keycode)
        {

        case ALLEGRO_KEY_C:

            if (fruto && x >= 570 && x <= 650 && y >= 100 && y <= 160)
            {
                fruto = false;
                score +=1000;
            }

        }

         switch (events.keyboard.keycode)
        {

        case ALLEGRO_KEY_ENTER:

         ler = false;

         if(fala1 && cont_horas > 2)
         {
             fala1 = false;
         }
         if(fala1_1)
         {
             fala1_1 = false;
             if(!fala1_1)
             {
                 fala1_2 = true;
             }
         }
         if(fala1_3)
         {
             fala1_3 = false;
         }
         if(fala1_4)
         {
             fala1_4 = false;
         }

        }
         switch (events.keyboard.keycode)
         {
               case ALLEGRO_KEY_ENTER:
                enter = true;
         }

    }

    else if (events.type == ALLEGRO_EVENT_TIMER)
    {
        if(!enter)
        {
           al_stop_timer(timer);
           al_stop_timer(BOLAtimer);
        }
        if(enter)
        {
            al_start_timer(timer);
            al_start_timer(BOLAtimer);
        }

        if(events.timer.source == timer)
        {
            active = true;
            draw = true;
            cont_horas++;

        if(al_key_down(&keyState,ALLEGRO_KEY_DOWN) && !historia)
        {
            if(y>655 && x!=500 || y>=210 && y<=250 && x>=100 && x<=363 || y>=210 && y<=250 && x>=380 && x<=550 || x>=90 && x<=650 && y>= 370 && y<=380 || x>=491 && x<=535 && y>=110 && y<=120
               || x>=580 && x<740 && y>=180 && y<=230 || x>=500 && x<=515 && y>=665 || x>=140 && x<=220 && y>=520 && y<=530  )
            {
                y-=movespeed;
            }
            if(x>=500 && x<=515 && y>=655 && !limitada && pegou3)
            {
                cameraUpdate(cameraPosition,x,y,-200,-110);
                al_identity_transform(&camera);
                al_translate_transform(&camera, -cameraPosition[0],-cameraPosition[1]);
                al_use_transform(&camera);
                ie = true;
                x=360;
                y = 470;
                done = false;
                y -=movespeed;
                chest = false;
            }
            fala1_2 = false;
            y += movespeed;
            dir = DOWN;
            pistola = false;
        }
        else if(al_key_down(&keyState,ALLEGRO_KEY_UP) && !historia)
        {
           if(x>=100 && x<=250 && y<=100 || y<=75 || x>=375 && x<=520 && y<=100 || y>=211 && y<=300 && x>=100 && x<=360
               ||y>=211 && y<=300 && x>=380 && x<=550 || x >= 590 && x <=645 && y<=160 || x>=300 && x<=340 && y<=90
               ||  x>=90 && x<=170 && y>=300 && y<=360 || x>=90 && x<=650 && y>=440 && y<=460 || x>=491 && x<=535 && y>=120 && y<=210 ||  x>=580 && x<740 && y>=190 && y<=240
               || x>=675&& x<=750 && y<=110 && y>=85 || x>=800 && x<=1100 && y>=450 && y<=460 || x>=100 && x<=440 && y>=490 && y<=495
               ||x>=140 && x<=220 && y>=600 && y<=610)
            {
                y += movespeed;
            }
            y -= movespeed;
            dir = UP;
            fala1_2 = false;
        }
          else if(al_key_down(&keyState,ALLEGRO_KEY_RIGHT) && !historia)
        {
            if( x>=380 && x<=530 && y<=95|| x>=580 && x<=635 && y>=70 && y<=150 || x>=530 && x<=535 && y<=295 ||  x>=490 && x<=500 && y>=120 && y<=200 || x>=290 && x<=291 && y<=85
            || y>=211 && y<=295 && x>=360 && x<=540 || x<=635 && x>=630 && y>=375 && y <=555 || x<=635 && x>=630 && y>=610 || x>=570 && x<580 && y>=190 && y<=240
            || x>=675&& x<=680 && y<=85 && y>=50 || x>=780 && x<=781 && y<=550 || x>=1080 || x>=780 && x<=781 && y>=610 && y<=700
            || x>=130 && x<=150 && y>=530 && y<=605)
            {
                x-=movespeed;
            }
            x += movespeed;
            dir = RIGHT;
            pistola = false;
            fala1_2 = false;
        }
          else if(al_key_down(&keyState,ALLEGRO_KEY_LEFT)&& !historia)
        {
           if(x>=255 && x<= 260 && y<=95 || x<=100 || x>=395 && x<=530 && y<=95 || y>=211 && y<=290 && x>=100 && x<=375 ||
               y<=295 && x>=558 && x<=560 || x>=645 && x<=650 && y>=70 && y<=150|| x>=760 && x<=761 && y>=190 && y<=230 || x<=350 && x>=345 && y<=85 || x>=170 && x<=180 && y>=300 && y<=350
               || x<=660 && x>=659 && y>=375 && y <=555 || x<=660 && x>=659 && y>=610 || x>=760&& x<=765 && y<=85 && y>=50 || x>=800 && x<=805 && y<= 550
               ||x>=810 && x<=811 && y>=610 && y<=700 ||  x>=438 && x<=440 && y>=450 && y<=495 || x>=220 && x<=230 && y>=530 && y<=600)
            {
                x += movespeed;
            }
            x -= movespeed;
            dir = LEFT;
            pistola = false;
            fala1_2 = false;
        }
            else if(al_key_down(&keyState,ALLEGRO_KEY_C) && x>=300 && x<=340 && y<=90 && !pegou3)
            {
                    chest = true;
                    regiao_x_folha_bau = 32;
                    pistola = true;
                    pegou3 = true;
                    dir = 1;

            }
              else if(al_key_down(&keyState,ALLEGRO_KEY_C) && x>=cruzx-30 && x<=cruzx+30 && y<=cruzy+30 && y>=cruzy-20)
            {
                    cruz = false;
                    pegou = true;
            }
             else if(al_key_down(&keyState,ALLEGRO_KEY_C) && x>=160 && x<=250 && y<=110)
             {
                fala1_1 = true;
             }
             else if(al_key_down(&keyState,ALLEGRO_KEY_C) && x>=450 && x<=520 && y<=300 && cruz)
             {
                fala1_3 = true;
             }
            else if(al_key_down(&keyState,ALLEGRO_KEY_Z) && x >= cruzx-20 && x<= cruzx+30 && y >= cruzy-20 && y<= cruzy+30 && coluna_atual_MP>2)
                    {
                        oracao = true;
                        dir = 5;
                        cont_frames_MP++;
                        if (cont_frames_MP>=15)
                        {
                            cont_frames_MP = 0;
                            coluna_atual_MP--;
                        }

                    }

        else
        {
            active = false;
            oracao = false;
            dir = 0;
            historia = false;

        }


if (cont_horas < 1000)
{
     cont_frames_vampmoca1++;
         if (cont_frames_vampmoca1 >= frames_sprite_vampmoca1)
        {
            cont_frames_vampmoca1=0;
            coluna_atual_vampmoca1++;

                if (coluna_atual_vampmoca1 >= colunas_vampmoca1)
                {
                    coluna_atual_vampmoca1 = 0;

                }
regiao_y_folha_vampmoca1 = linha_atual_vampmoca1 * altura_sprite_vampmoca1;
regiao_x_folha_vampmoca1 = coluna_atual_vampmoca1 * largura_sprite_vampmoca1;
        }

            cont_passos_vampmoca1++;

        if (cont_passos_vampmoca1 > 0 && cont_passos_vampmoca1 < 50)
        {

        mocavamp1y -= velvamp;
        linha_atual_vampmoca1 = 0;

        }
        if (cont_passos_vampmoca1 > 60 && cont_passos_vampmoca1 < 150)
        {
            mocavamp1x += velvamp;
            linha_atual_vampmoca1 = 1;

        }
        if (cont_passos_vampmoca1 > 150 && cont_passos_vampmoca1 < 300)
        {
            mocavamp1y -= velvamp;
            linha_atual_vampmoca1 = 0;
        }
        if (cont_passos_vampmoca1 > 300  && cont_passos_vampmoca1 < 345 )
        {
            mocavamp1y += velvamp;
            linha_atual_vampmoca1 = 2;
        }
        if (cont_passos_vampmoca1>345  && cont_passos_vampmoca1 < 550)
        {
            mocavamp1x -= velvamp;
            linha_atual_vampmoca1 = 3;
        }
        if (cont_passos_vampmoca1>550  && cont_passos_vampmoca1 < 755)
        {
            mocavamp1x += velvamp;
            linha_atual_vampmoca1 = 1;
        }
        if (cont_passos_vampmoca1>755  && cont_passos_vampmoca1 < 860)
        {
            mocavamp1y += velvamp;
            linha_atual_vampmoca1 = 2;
        }
        if (cont_passos_vampmoca1 > 860 && cont_passos_vampmoca1 < 950)
        {
            mocavamp1x -= velvamp;
            linha_atual_vampmoca1 = 3;
        }
        if (cont_passos_vampmoca1 > 950 && cont_passos_vampmoca1 < 1000)
        {
            mocavamp1y += velvamp;
            linha_atual_vampmoca1 = 2;
        }
        if(cont_passos_vampmoca1 > 1000)
        {
            cont_passos_vampmoca1 = 0;
        }

        cont_frames_homemvamp1++;
           if (cont_frames_homemvamp1 >= frames_sprite_homemvamp1)
        {
            cont_frames_homemvamp1=0;
            coluna_atual_homemvamp1++;

                if (coluna_atual_homemvamp1 >= colunas_homemvamp1)
                {
                    coluna_atual_homemvamp1 = 0;

                }
regiao_y_folha_homemvamp1 = linha_atual_homemvamp1 * altura_sprite_homemvamp1;
regiao_x_folha_homemvamp1 = coluna_atual_homemvamp1 * largura_sprite_homemvamp1;
        }


        cont_passos_homemvamp1++;
        if (cont_passos_homemvamp1 < 90)
        {
            homemvamp1x -= velvamp;
            linha_atual_homemvamp1 = 3;
        }
          if (cont_passos_homemvamp1 > 90 && cont_passos_homemvamp1 < 180)
        {
            homemvamp1y -= velvamp;
            linha_atual_homemvamp1 = 0;
        }
         if (cont_passos_homemvamp1 > 180 && cont_passos_homemvamp1 < 270)
        {
            homemvamp1x += velvamp;
            linha_atual_homemvamp1 = 1;
        }
        if (cont_passos_homemvamp1 > 270 && cont_passos_homemvamp1 < 360)
        {
            homemvamp1y += velvamp;
            linha_atual_homemvamp1 = 2;
        }
        if (cont_passos_homemvamp1 > 360)
        {
            cont_passos_homemvamp1 = 0;
        }

}
 if (cont_horas > 1000 && cont_horas < 1100)
        {
            homemvamp1x = 1000;
            homemvamp1y = 640;
        }
if (cont_horas > 1100 && vampvive)
{
     cont_frames_vampmoca1++;
         if (cont_frames_vampmoca1 >= frames_sprite_vampmoca1)
        {
            cont_frames_vampmoca1=0;
            coluna_atual_vampmoca1++;

                if (coluna_atual_vampmoca1 >= colunas_vampmoca1)
                {
                    coluna_atual_vampmoca1 = 0;

                }
regiao_y_folha_vampmoca1 = linha_atual_vampmoca1 * altura_sprite_vampmoca1;
regiao_x_folha_vampmoca1 = coluna_atual_vampmoca1 * largura_sprite_vampmoca1;
        }


            cont_passos_vampmoca1++;

        if (cont_passos_vampmoca1 > 0 && cont_passos_vampmoca1 < 50/3)
        {

        linha_atual_vampmoca1 = 0;
        mocavamp1y -= velvamp2;

        }
        if (cont_passos_vampmoca1 > 60/3 && cont_passos_vampmoca1 < 150/3)
        {
            linha_atual_vampmoca1 = 1;
            mocavamp1x += velvamp2;

        }
        if (cont_passos_vampmoca1 > 150/3 && cont_passos_vampmoca1 < 300/3)
        {
             linha_atual_vampmoca1 = 0;
            mocavamp1y -= velvamp2;
        }
        if (cont_passos_vampmoca1 > 300/3  && cont_passos_vampmoca1 < 345/3 )
        {
            linha_atual_vampmoca1 = 2;
            mocavamp1y += velvamp2;

        }
        if (cont_passos_vampmoca1>345/3  && cont_passos_vampmoca1 < 550/3)
        {
            linha_atual_vampmoca1 = 3;
            mocavamp1x -= velvamp2;

        }
        if (cont_passos_vampmoca1>550/3  && cont_passos_vampmoca1 < 755/3)
        {
            linha_atual_vampmoca1 = 1;
            mocavamp1x += velvamp2;

        }
        if (cont_passos_vampmoca1>755/3  && cont_passos_vampmoca1 < 860/3)
        {
            linha_atual_vampmoca1 = 2;
            mocavamp1y += velvamp2;

        }
        if (cont_passos_vampmoca1 > 860/3 && cont_passos_vampmoca1 < 950/3)
        {
            linha_atual_vampmoca1 = 3;
            mocavamp1x -= velvamp2;
                    }
        if (cont_passos_vampmoca1 > 950/3 && cont_passos_vampmoca1 < 1000/3)
        {
            linha_atual_vampmoca1 = 2;
            mocavamp1y += velvamp2;

        }
        if(cont_passos_vampmoca1 > 1000/3)
        {
            cont_passos_vampmoca1 = 0;
        }


}

if (cont_horas > 1100 && vampvive2)

{

    cont_frames_homemvamp1++;
           if (cont_frames_homemvamp1 >= frames_sprite_homemvamp1)
        {
            cont_frames_homemvamp1=0;
            coluna_atual_homemvamp1++;

                if (coluna_atual_homemvamp1 >= colunas_homemvamp1)
                {
                    coluna_atual_homemvamp1 = 0;

                }
regiao_y_folha_homemvamp1 = linha_atual_homemvamp1 * altura_sprite_homemvamp1;
regiao_x_folha_homemvamp1 = coluna_atual_homemvamp1 * largura_sprite_homemvamp1;
        }

        cont_passos_homemvamp1++;

        if (cont_passos_homemvamp1 > 0 && cont_passos_homemvamp1 < 90/3)
        {
            homemvamp1x -= velvamp2;
            linha_atual_homemvamp1 = 3;
        }
          if (cont_passos_homemvamp1 > 90/3 && cont_passos_homemvamp1 < 180/3)
        {
            homemvamp1y -= velvamp2;
            linha_atual_homemvamp1 = 0;
        }
         if (cont_passos_homemvamp1 > 180/3 && cont_passos_homemvamp1 < 270/3)
        {
            homemvamp1x += velvamp2;
            linha_atual_homemvamp1 = 1;
        }
        if (cont_passos_homemvamp1 > 270/3 && cont_passos_homemvamp1 < 360/3)
        {
            homemvamp1y += velvamp2;
            linha_atual_homemvamp1 = 2;
        }
        if (cont_passos_homemvamp1 > 360/3)
        {
            cont_passos_homemvamp1 = 0;
        }

}

        if (Colisao(cruzx,cruzy,mocavamp1x,mocavamp1y,largura_sprite_vampmoca1,altura_sprite_vampmoca1) && vampvive && cont_horas > 1100)
        {
            vampvive = false;
            score +=2000;

        }

          if (Colisao(cruzx,cruzy,homemvamp1x,homemvamp1y,largura_sprite_vampmoca1,altura_sprite_vampmoca1) && vampvive2 && cont_horas > 1100)
        {
            vampvive2 = false;
            score +=2000;
        }
         if (Colisao(x,y,homemvamp1x,homemvamp1y,150,150) && vampvive2 && cont_horas > 1100 && oracao)
        {
            vampvive2 = false;
            score +=2000;
        }
        if (Colisao(x,y,mocavamp1x,mocavamp1y,150,150) && vampvive && cont_horas > 1100 && oracao)
        {
            vampvive = false;
            score +=2000;
        }

     if (oracao)
{
    vuneravel = false;
}

    largura_sprite_HP = 9*coluna_atual_HP;
    largura_sprite_MP = 9*coluna_atual_MP;

     if (Colisao(x,y,mocavamp1x,mocavamp1y,largura_sprite_vampmoca1,altura_sprite_vampmoca1) && cont_horas > 1100  && vampvive && vuneravel)
        {
            cont_frames_dano++;
            if (cont_frames_dano>=5 && coluna_atual_HP>2)
            {
                coluna_atual_HP-=1;
                cont_frames_dano = 0;
            }

        }
         if (coluna_atual_HP <= 2)
            {
                historia = true;
                morte = true;
                vuneravel = false;
                cont_frames_morto++;
                if(cont_frames_morto>=12)
                {
                morte = false;
                    if(cont_frames_morto>=24)
                    {
                    coluna_atual_HP = 12;
                    cont_frames_morto = 0;
                    vuneravel = true;
                    }
                }
                if(cont_frames_morto == 6)
                {
                    cont_vidas--;
                       if(cont_vidas<0)
                        {
                        ie = true;
                        }
                }
            }


          if (Colisao(x,y,homemvamp1x,homemvamp1y,largura_sprite_vampmoca1,altura_sprite_vampmoca1) && cont_horas > 1100 && vampvive2 && vuneravel )
        {
           cont_frames_dano++;
            if (cont_frames_dano>=5 && coluna_atual_HP>2)
            {
                coluna_atual_HP-=1;
                cont_frames_dano = 0;
            }
        }

    if (Colisao(cruzx,cruzy,olhox,olhoy,largura_sprite_vampmoca1,altura_sprite_vampmoca1) && olhovive)
    {
        queima2 = true;
        olhovive = false;
        score += 2000;
    }
        if(!vampvive)
        {
             cont_tempo_vampqueima++;

        }
    if (cont_tempo_vampqueima > 60  && limitada)
    {
        chave = true ;
    }

     if(!vampvive2)
        {
             cont_tempo_vampqueima2++;
        }
    if (cont_tempo_vampqueima2 > 60 && !pegou2)
    {
        livro = true ;
    }
 if(active)
            {
                sourceX += al_get_bitmap_width(keen)/5;
            }

            else
            {
                sourceX = 0;
            }

            if(sourceX>=al_get_bitmap_width(keen))
            {
                sourceX = 0;
            }

    sourceY = dir;
if(x<=650 && y>=400)
{
    olho = false;
}

else
    olho = true;
        }

else if(events.timer.source == BOLAtimer)
{
            cont_frames_fogueira++;

             if (cont_frames_fogueira >= frames_sprite_fogueira)
            {
                cont_frames_fogueira=0;
                coluna_atual_fogueira++;

                if (coluna_atual_fogueira >= colunas_fogueira)
                {
                    coluna_atual_fogueira = 0;

                }
                regiao_x_folha_fogueira = coluna_atual_fogueira * largura_sprite_fogueira;

            }


            cont_frames_oracao[1]++;
            cont_frames_oracao[2]++;
            cont_frames_oracao[3]++;
            cont_frames_oracao[4]++;
            cont_frames_oracao[5]++;
            cont_frames_oracao[6]++;

             if (cont_frames_oracao[1] >= frames_sprite_oracao[1])
            {
                cont_frames_oracao[1] = 0;
                coluna_atual_oracao[1]++;

                if (coluna_atual_oracao[1] >= colunas_oracao[1])
                {
                    coluna_atual_oracao[1] = 0;
                    linha_atual_oracao[1]++;

                }
                if (linha_atual_oracao[1] > linhas_oracao[1])

                {
                    linha_atual_oracao[1] = 0;

                }
                regiao_x_folha_oracao[1] = coluna_atual_oracao[1] * largura_sprite_oracao[1];
                regiao_y_folha_oracao[1] = linha_atual_oracao[1] * altura_sprite_oracao[1];
            }
             if (cont_frames_oracao[2] >= frames_sprite_oracao[2])
             {
                 cont_frames_oracao[2] = 0;
                 coluna_atual_oracao[2]++;

                 if (coluna_atual_oracao[2] >= colunas_oracao[2])
                 {
                     coluna_atual_oracao[2] = 0;
                     linha_atual_oracao[2]++;

                 }
                  if (linha_atual_oracao[2] > linhas_oracao[2])
                  {
                       linha_atual_oracao[2] = 0;
                  }
                  regiao_x_folha_oracao[2] = coluna_atual_oracao[2] * largura_sprite_oracao[2];
                  regiao_y_folha_oracao[2] = linha_atual_oracao[2] * altura_sprite_oracao[2];
             }
             if (cont_frames_oracao[3] >= frames_sprite_oracao[3])
            {
                cont_frames_oracao[3] = 0;
                coluna_atual_oracao[3]++;

                if (coluna_atual_oracao[3] >= colunas_oracao[3])
                {
                    coluna_atual_oracao[3] = 0;
                    linha_atual_oracao[3]++;

                }
                if (linha_atual_oracao[3] > linhas_oracao[3])

                {
                    linha_atual_oracao[3] = 0;

                }
                regiao_x_folha_oracao[3] = coluna_atual_oracao[3] * largura_sprite_oracao[3];
                regiao_y_folha_oracao[3] = linha_atual_oracao[3] * altura_sprite_oracao[3];
            }
            if (cont_frames_oracao[4] >= frames_sprite_oracao[4])
            {
                cont_frames_oracao[4] = 0;
                coluna_atual_oracao[4]++;

                if (coluna_atual_oracao[4] >= colunas_oracao[4])
                {
                    coluna_atual_oracao[4] = 0;
                    linha_atual_oracao[4]++;

                }
                if (linha_atual_oracao[4] > linhas_oracao[4])

                {
                    linha_atual_oracao[4] = 0;

                }
                regiao_x_folha_oracao[4] = coluna_atual_oracao[4] * largura_sprite_oracao[4];
                regiao_y_folha_oracao[4] = linha_atual_oracao[4] * altura_sprite_oracao[4];
            }
            if (cont_frames_oracao[5] >= frames_sprite_oracao[5])
            {
                cont_frames_oracao[5] = 0;
                coluna_atual_oracao[5]++;

                if (coluna_atual_oracao[5] >= colunas_oracao[5])
                {
                    coluna_atual_oracao[5] = 0;
                    linha_atual_oracao[5]++;

                }
                if (linha_atual_oracao[5] > linhas_oracao[5])

                {
                    linha_atual_oracao[5] = 0;

                }
                regiao_x_folha_oracao[5] = coluna_atual_oracao[5] * largura_sprite_oracao[5];
                regiao_y_folha_oracao[5] = linha_atual_oracao[5] * altura_sprite_oracao[5];
            }

             if (cont_frames_oracao[6] >= frames_sprite_oracao[6])
            {
                cont_frames_oracao[6] = 0;
                coluna_atual_oracao[6]++;

                if (coluna_atual_oracao[6] >= colunas_oracao[6])
                {
                    coluna_atual_oracao[6] = 0;
                    linha_atual_oracao[6]++;

                }
                if (linha_atual_oracao[6] > linhas_oracao[6])

                {
                    linha_atual_oracao[6] = 0;

                }
                regiao_x_folha_oracao[6] = coluna_atual_oracao[6] * largura_sprite_oracao[6];
                regiao_y_folha_oracao[6] = linha_atual_oracao[6] * altura_sprite_oracao[6];
            }


         cont_frames_rato++;
         cont_passos_rato++;
         if (cont_frames_rato >= frames_sprite_rato)
        {
            cont_frames_rato=0;
            coluna_atual_rato++;

                if (coluna_atual_rato >= colunas_rato)
                {
                    coluna_atual_rato = 0;

                }
            regiao_y_folha_rato = linha_atual_rato * altura_sprite_rato;
            regiao_x_folha_rato = coluna_atual_rato * largura_sprite_rato;

        }
        if (cont_passos_rato > 0 && cont_passos_rato < 120)
        {
            ratox -= velrato;
            linha_atual_rato = 3;
        }
        if (cont_passos_rato > 120 && cont_passos_rato < 160)
        {
            ratoy += velrato;
            linha_atual_rato = 2;
        }
        if (cont_passos_rato > 160 && cont_passos_rato < 400)
        {
            ratox += velrato;
            linha_atual_rato = 1;
        }
         if (cont_passos_rato > 400 && cont_passos_rato < 450)
        {
            ratoy -= velrato;
            linha_atual_rato = 0;
        }
        if (cont_passos_rato > 450 && cont_passos_rato < 470)
        {
            ratox += velrato;
            linha_atual_rato = 1;
        }
         if (cont_passos_rato > 470 && cont_passos_rato < 500)
        {
            ratox = 740;
            ratoy = 100;
            linha_atual_rato = 2;
        }
        if (cont_passos_rato > 500 && cont_passos_rato < 600)
        {
            ratoy += velrato/3;
            linha_atual_rato = 2;
        }
        if (cont_passos_rato > 600 && cont_passos_rato < 720)
        {
            ratox -= velrato/3;
            linha_atual_rato = 3;
        }
                if (cont_passos_rato > 720 && cont_passos_rato < 780)
        {
            ratoy -= velrato/3;
            linha_atual_rato = 0;
        }
        if (cont_passos_rato > 1200 && cont_passos_rato < 1230)
        {
            ratoy += velrato;
            linha_atual_rato = 2;
        }
        if (cont_passos_rato > 1230 && cont_passos_rato < 1250)
        {
            ratox -= velrato;
            linha_atual_rato = 3;
        }
        if (cont_passos_rato > 1250 && cont_passos_rato < 1270)
        {
            ratoy += velrato;
            linha_atual_rato = 2;
        }
         if (cont_passos_rato > 1270 && cont_passos_rato < 1300)
        {
            ratox += velrato;
            linha_atual_rato = 1;
        }
           if (cont_passos_rato > 1300 && cont_passos_rato < 1400)
        {
            ratoy += velrato;
            linha_atual_rato = 2;
        }
         if (cont_passos_rato > 1400 && cont_passos_rato < 1450)
        {
            ratox -= velrato;
            linha_atual_rato = 3;
        }
        if (cont_passos_rato > 1450 && cont_passos_rato < 1485)
        {
            ratoy -= velrato;
            linha_atual_rato = 0;
        }
        if (cont_passos_rato > 1485 && cont_passos_rato < 1490)
        {
            ratox -= velrato;
            linha_atual_rato = 3;
        }
        if (cont_passos_rato > 1490)
        {
           cont_passos_rato = 0;
        }
}

if(draw)
{
    al_draw_bitmap(CHAOCASA,100,100,NULL);
    al_draw_bitmap(ESPELHO,1050,420,NULL);
    al_draw_tinted_bitmap(FADE,al_map_rgba(0,0,0,60),100,100,NULL);
    al_draw_bitmap_region(RATO,regiao_x_folha_rato,regiao_y_folha_rato,largura_sprite_rato,altura_sprite_rato,ratox,ratoy,NULL);
    al_draw_bitmap(CAMA,500,150,NULL);
    al_draw_bitmap(JANELA2,325,20,NULL);
    al_draw_bitmap(ESTANTELIVROS,100,50,NULL);
    al_draw_bitmap(VELA2,300,50,NULL);
    al_draw_bitmap(VELA2,350,50,NULL);
    al_draw_bitmap(VELA2,650,50,NULL);
    al_draw_bitmap(MESA,600,100,NULL);
    al_draw_bitmap(COZINHA,600,220,NULL);
    al_draw_bitmap(FOGAO,700,0,NULL);
    al_draw_bitmap(ARMARIO,400,50,NULL);
    al_draw_bitmap(BELICHE,810,410,NULL);
    al_draw_bitmap(TSUKUE,910,440,NULL);
    al_draw_bitmap(CARPET,910,550,NULL);
    al_draw_bitmap(TAPETE,500,700,NULL);
    al_draw_bitmap(MESA3,150,560,NULL);
    al_draw_bitmap(ORGAO,100,450,NULL);
    al_draw_bitmap(RELOGIO,250,450,NULL);
    al_draw_bitmap(LAREIRA,350,450,NULL);
    al_draw_bitmap(CARPET,350,550,NULL);
    al_draw_bitmap(CARPET,300,150,NULL);
    al_draw_bitmap(PORTA2,367,273,NULL);


    if (fruto)
    {
       al_draw_bitmap(FRUTO,615,120,NULL);
    }

    if (cruz)
    {
       al_draw_bitmap(CRUZ,cruzx,cruzy,NULL);
    }

    if(olho && !queima2)
    {
        al_draw_bitmap(OLHOLAREIRA,olhox,olhoy,NULL);
    }
     if(queima2)
   {
        al_draw_bitmap_region(QUEIMA,regiao_x_folha_fogueira,regiao_y_folha_fogueira,largura_sprite_fogueira,altura_sprite_fogueira,373 ,470,NULL);
   }

    al_draw_bitmap_region(TAKARABAKO,regiao_x_folha_bau,regiao_y_folha_bau,largura_sprite_bau,altura_sprite_bau,317,90,NULL);
    al_draw_bitmap_region(keen,sourceX,sourceY*al_get_bitmap_height(keen)/7,30,50,x,y,NULL);
   if (cont_horas < 1000)
   {
           al_draw_bitmap_region(VAMPMOCA1, regiao_x_folha_vampmoca1, regiao_y_folha_vampmoca1, largura_sprite_vampmoca1, altura_sprite_vampmoca1,mocavamp1x,mocavamp1y,NULL);
           al_draw_bitmap_region(HOMEMVAMP1, regiao_x_folha_homemvamp1, regiao_y_folha_homemvamp1, largura_sprite_homemvamp1, altura_sprite_homemvamp1,homemvamp1x,homemvamp1y,NULL);

   }
   if (cont_horas > 1100 && cont_tempo_vampqueima < 60)
   {
        al_draw_bitmap_region(VAMPMOCA2, regiao_x_folha_vampmoca1, regiao_y_folha_vampmoca1, largura_sprite_vampmoca1, altura_sprite_vampmoca1,mocavamp1x,mocavamp1y,NULL);
   }
   if (cont_horas > 1100 && cont_tempo_vampqueima2 < 60)
   {
        al_draw_bitmap_region(HOMEMVAMP2, regiao_x_folha_homemvamp1, regiao_y_folha_homemvamp1, largura_sprite_homemvamp1, altura_sprite_homemvamp1,homemvamp1x,homemvamp1y,NULL);
   }

   if (!vampvive && cont_tempo_vampqueima < 60)
   {
       al_draw_bitmap_region(QUEIMA,regiao_x_folha_fogueira,regiao_y_folha_fogueira,largura_sprite_fogueira,altura_sprite_fogueira,mocavamp1x - 7 ,mocavamp1y + 10,NULL);

   }
   if (!vampvive2 && cont_tempo_vampqueima2 < 60)
   {
       al_draw_bitmap_region(QUEIMA,regiao_x_folha_fogueira,regiao_y_folha_fogueira,largura_sprite_fogueira,altura_sprite_fogueira,homemvamp1x - 7, homemvamp1y + 10,NULL);

   }
   if(cont_tempo_vampqueima > 60 && chave)
   {
     al_draw_bitmap(CHAVE,mocavamp1x,mocavamp1y,NULL);
   }

    if(cont_tempo_vampqueima2 > 60 && livro)
   {
     al_draw_bitmap(LIVRO,homemvamp1x,homemvamp1y,NULL);
   }

    if (oracao)
    {

        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[1],regiao_y_folha_oracao[1],largura_sprite_oracao[1], altura_sprite_oracao[1], x+15, y+15, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[2],regiao_y_folha_oracao[2],largura_sprite_oracao[2], altura_sprite_oracao[2], x-30, y+30, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[3],regiao_y_folha_oracao[3],largura_sprite_oracao[3], altura_sprite_oracao[3], x-70, y, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[4],regiao_y_folha_oracao[4],largura_sprite_oracao[4], altura_sprite_oracao[4], x-70, y-45, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[5],regiao_y_folha_oracao[5],largura_sprite_oracao[5], altura_sprite_oracao[5], x+15, y-45, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[6],regiao_y_folha_oracao[6],largura_sprite_oracao[6], altura_sprite_oracao[6], x-30,y-60,NULL);

    }
    al_draw_bitmap(ACIMAPORTA,371,257,NULL);
    al_draw_textf(font,al_map_rgb(255,255,255),cameraPosition[0]+1100,cameraPosition[1],ALLEGRO_ALIGN_CENTER, "SCORE: %i", 1000 + score);
    al_draw_textf(font2,al_map_rgb(255,255,255),cameraPosition[0]+50,cameraPosition[1]+10,ALLEGRO_ALIGN_CENTER, "X %i", cont_moedas_prata);
    al_draw_textf(font2,al_map_rgb(255,255,255),cameraPosition[0]+150,cameraPosition[1]+10,ALLEGRO_ALIGN_CENTER, "X %i ", cont_vidas);
    al_draw_bitmap_region(keen,5,300,21,21,cameraPosition[0]+80,cameraPosition[1]+8,0);
    al_draw_bitmap_region(MOEDA,regiao_x_folha_moedas,regiao_y_folha_moedas,largura_sprite_moedas,altura_sprite_moedas,cameraPosition[0]+10,cameraPosition[1]+10,0);
    if(fala1)
    {
        al_draw_bitmap(FALA1,cameraPosition[0]+200,cameraPosition[1]+200,NULL);
         al_draw_text(font2, al_map_rgb(255,255,255),cameraPosition[0]+275,cameraPosition[1]+210, ALLEGRO_ALIGN_LEFT, " Os moradores desta cabana sao");
         al_draw_text(font2, al_map_rgb(255,255,255),cameraPosition[0]+275,cameraPosition[1]+225, ALLEGRO_ALIGN_LEFT, " um  tanto  estranhos. Eu devo");
         al_draw_text(font2, al_map_rgb(255,255,255),cameraPosition[0]+275,cameraPosition[1]+240, ALLEGRO_ALIGN_LEFT, " terminar de investigar este local");
         al_draw_text(font2, al_map_rgb(255,255,255),cameraPosition[0]+275,cameraPosition[1]+255, ALLEGRO_ALIGN_LEFT, " o quanto antes.");
    }
    if(fala1_1)
    {
         al_draw_bitmap(FALA1,cameraPosition[0]+200,cameraPosition[1]+200,NULL);
         al_draw_text(font2, al_map_rgb(255,255,255),cameraPosition[0]+275,cameraPosition[1]+210, ALLEGRO_ALIGN_LEFT, "Como eu suspeitava, essas pessoas");
         al_draw_text(font2, al_map_rgb(255,255,255),cameraPosition[0]+275,cameraPosition[1]+225, ALLEGRO_ALIGN_LEFT, "que  moram  aqui  fazem  parte de");
         al_draw_text(font2, al_map_rgb(255,255,255),cameraPosition[0]+275,cameraPosition[1]+240, ALLEGRO_ALIGN_LEFT, "algum  tipo  de  seita  satanica");
         al_draw_text(font2, al_map_rgb(255,255,255),cameraPosition[0]+275,cameraPosition[1]+255, ALLEGRO_ALIGN_LEFT, "adoradora de sangue.");
    }
    if(fala1_2)
    {
        al_draw_bitmap(FALA1,cameraPosition[0]+200,cameraPosition[1]+200,NULL);
         al_draw_text(font2, al_map_rgb(255,255,255),cameraPosition[0]+275,cameraPosition[1]+210, ALLEGRO_ALIGN_LEFT, "Aqui diz que seus corpos metamorficos");
         al_draw_text(font2, al_map_rgb(255,255,255),cameraPosition[0]+275,cameraPosition[1]+225, ALLEGRO_ALIGN_LEFT, "mudam de forma toda meia-noite.");
         al_draw_text(font2, al_map_rgb(255,255,255),cameraPosition[0]+275,cameraPosition[1]+240, ALLEGRO_ALIGN_LEFT, "Preciso dar o fora daqui, ja");
        al_draw_text(font2, al_map_rgb(255,255,255),cameraPosition[0]+275,cameraPosition[1]+255, ALLEGRO_ALIGN_LEFT, "passam das 23:50.");
    }
    if(fala1_3)
    {
        al_draw_bitmap(FALA3,cameraPosition[0]+200,cameraPosition[1]+200,NULL);
         al_draw_text(font2, al_map_rgb(255,255,255),cameraPosition[0]+275,cameraPosition[1]+210, ALLEGRO_ALIGN_LEFT, "Uma cruz crista, eu posso deixa-la");
         al_draw_text(font2, al_map_rgb(255,255,255),cameraPosition[0]+275,cameraPosition[1]+225, ALLEGRO_ALIGN_LEFT, "no  caminho  de criaturas impuras");
         al_draw_text(font2, al_map_rgb(255,255,255),cameraPosition[0]+275,cameraPosition[1]+240, ALLEGRO_ALIGN_LEFT, "para expurga-las.");
    }
    if(fala1_4)
    {
        al_draw_bitmap(FALA2,cameraPosition[0]+200,cameraPosition[1]+200,NULL);
         al_draw_text(font2, al_map_rgb(255,255,255),cameraPosition[0]+275,cameraPosition[1]+225, ALLEGRO_ALIGN_LEFT, "Vamos dar o fora desse lugar.");

    }
if (cont_horas < 1)
{
    al_clear_to_color(al_map_rgb(0,0,0));

    al_draw_text(font2, al_map_rgb(255,255,255),700,120, ALLEGRO_ALIGN_CENTRE, "Sua mulher desapareceu a cerca de 1 mes.");
    al_draw_text(font2, al_map_rgb(255,255,255),700,150, ALLEGRO_ALIGN_CENTRE, "Todas as evidencias levaram voce a uma cabana em meio a floresta.");
    al_draw_text(font2, al_map_rgb(255,255,255),700,180, ALLEGRO_ALIGN_CENTRE, "Moradores do vilarejo vizinho acreditam que coisas ruins tem ocorrido");
    al_draw_text(font2, al_map_rgb(255,255,255),700,210, ALLEGRO_ALIGN_CENTRE, "nessa regiao. Voce deve tomar cuidado com as criaturas malignas");
    al_draw_text(font2, al_map_rgb(255,255,255),700,240, ALLEGRO_ALIGN_CENTRE, "que surgem a noite. Se for tocado por alguma dessas criaturas");
    al_draw_text(font2, al_map_rgb(255,255,255),700,270, ALLEGRO_ALIGN_CENTRE, "voce sofrera danos. Criaturas satanicas sao vuneraveis a CRUZ");
    al_draw_text(font2, al_map_rgb(255,255,255),700,300, ALLEGRO_ALIGN_CENTRE, "CRISTA. Animais e Insetos sao vuneraveis a ARMAS COMUNS.");
    al_draw_text(font2, al_map_rgb(255,255,255),700,330, ALLEGRO_ALIGN_CENTRE, "Para coletar equipamentos voce deve precionar a TECLA C.");
    al_draw_text(font2, al_map_rgb(255,255,255),700,360, ALLEGRO_ALIGN_CENTRE, "Equipamentos abencoados sao utilizados precionando a TECLA S");
    al_draw_text(font2, al_map_rgb(255,255,255),700,390, ALLEGRO_ALIGN_CENTRE, "Equipamentos comuns sao utilizados precionando a TECLA X");
    al_draw_text(font2, al_map_rgb(255,255,255),700,420, ALLEGRO_ALIGN_CENTRE, "Voce podera saltar em espacos abertos precionando a TECLA ESPACO");
}
if (ler)
{
    al_draw_bitmap(BBMASAGE,cameraPosition[0],cameraPosition[1]+200,NULL);
    al_draw_text(font2, al_map_rgb(255,255,255),cameraPosition[0]+490,cameraPosition[1]+230, ALLEGRO_ALIGN_CENTRE, "ESCRITO POR UM EXORCISTA");
    al_draw_text(font2, al_map_rgb(255,255,255),cameraPosition[0]+490,cameraPosition[1]+260, ALLEGRO_ALIGN_CENTRE, "Ha cerca de um mes tenho investigado o paradeiro das");
    al_draw_text(font2, al_map_rgb(255,255,255),cameraPosition[0]+490,cameraPosition[1]+290, ALLEGRO_ALIGN_CENTRE, "criaturas satanicas. Hoje, encontrei uma");
    al_draw_text(font2, al_map_rgb(255,255,255),cameraPosition[0]+490,cameraPosition[1]+320, ALLEGRO_ALIGN_CENTRE, "cabana em meio a floresta. Tenho motivos para crer");
    al_draw_text(font2, al_map_rgb(255,255,255),cameraPosition[0]+490,cameraPosition[1]+350, ALLEGRO_ALIGN_CENTRE, "que uma mulher foi trazida para este lugar e daqui");
    al_draw_text(font2, al_map_rgb(255,255,255),cameraPosition[0]+490,cameraPosition[1]+380, ALLEGRO_ALIGN_CENTRE, "tenha sido levada para a ilha ao LESTE");
    al_draw_text(font2, al_map_rgb(255,255,255),cameraPosition[0]+490,cameraPosition[1]+410, ALLEGRO_ALIGN_CENTRE, ".");
    al_draw_text(font2, al_map_rgb(255,255,255),cameraPosition[0]+490,cameraPosition[1]+420, ALLEGRO_ALIGN_CENTRE, ".");
    al_draw_text(font2, al_map_rgb(255,255,255),cameraPosition[0]+490,cameraPosition[1]+430, ALLEGRO_ALIGN_CENTRE, ".");
    al_draw_text(font2, al_map_rgb(255,255,255),cameraPosition[0]+490,cameraPosition[1]+460, ALLEGRO_ALIGN_CENTRE, "ESCRITO POR UM EXORCISTA");
    al_draw_text(font2, al_map_rgb(255,255,255),cameraPosition[0]+490,cameraPosition[1]+490, ALLEGRO_ALIGN_CENTRE, "Poderes espirituais aumentam durante a oracao");
    al_draw_text(font2, al_map_rgb(255,255,255),cameraPosition[0]+490,cameraPosition[1]+520, ALLEGRO_ALIGN_CENTRE, "Segure a TECLA Z sobre uma cruz para afastar o mal.");
}
if (pistola)
{
    al_draw_bitmap(MENSAGEMITEM,200,200,NULL);
    al_draw_bitmap(PISTOLA,230,220,NULL);
    al_draw_text(font2, al_map_rgb(255,255,255),300,220, ALLEGRO_ALIGN_LEFT, "Arma comum:");
    al_draw_text(font2, al_map_rgb(255,255,255),300,240, ALLEGRO_ALIGN_LEFT, "Pistola de plasma venenoso.");
}
if (morte)
{
    al_clear_to_color(al_map_rgb(0,0,0));
    al_draw_bitmap(morto,x,y,NULL);
    al_draw_textf(font2,al_map_rgb(255,255,255),120,10,ALLEGRO_ALIGN_CENTER, "X %i ", cont_vidas);
    al_draw_bitmap_region(keen,5,300,21,21,80,8,0);
    al_flip_display();

}

    al_draw_bitmap_region(HP,regiao_x_folha_HP,regiao_y_folha_HP,largura_sprite_HP,altura_sprite_HP,cameraPosition[0]+50,cameraPosition[1]+30,NULL);
    al_draw_bitmap_region(MP,regiao_x_folha_MP,regiao_y_folha_MP,largura_sprite_MP,altura_sprite_MP,cameraPosition[0]+50,cameraPosition[1]+60,NULL);
    al_flip_display();
    al_clear_to_color(al_map_rgb(0,0,0));
}
} //fim do timer
}//fim do while


while(!done)
{
ALLEGRO_EVENT events;
al_wait_for_event(event_queue, &events);
al_get_keyboard_state(&keyState);

 if(events.type == ALLEGRO_EVENT_KEY_UP)
    {

        switch (events.keyboard.keycode)
        {
        case ALLEGRO_KEY_Z:
        dir = 0;
        }
    }

    if(events.type == ALLEGRO_EVENT_KEY_DOWN)
    {

        switch (events.keyboard.keycode)
        {
        case ALLEGRO_KEY_ESCAPE:
            done = true;
        case ALLEGRO_KEY_S:
           if(pegou)
           {
            cruz = true;
            cruzx = x;
            cruzy = y;
            pegou = false;
           }
        case ALLEGRO_KEY_SPACE:
            if(platape)
            {
            vely -= jumpspeed;
            }

        }
    }
    if(events.type == ALLEGRO_EVENT_KEY_UP)
    {
        switch (events.keyboard.keycode)
        {
        case ALLEGRO_KEY_X:
            tiro = true;

        }
    }
    else if (events.type == ALLEGRO_EVENT_TIMER)
    {

        if(events.timer.source == timer)
        {
            active = true;
            draw = true;

            if(platape)
            {
                jump = true;
                pulo = false;
            }
            if(!platape)
            {
                pulo = true;
                jump = false;
            }

            if(al_key_down(&keyState,ALLEGRO_KEY_SPACE) && jump && y<472)
            {
                jump = false;
            }


            else if(!jump && !platape)
            {
                vely +=gravity;
            }

            else
                vely = 0;
                x += velx;
                y += vely;

if(y>472)
{
    y=470;
}


            if(y>=470)
            {
                platape = true;
            }
            else
            {
                platape = false;
            }

            if(!tiro)
            {
                posx_tiro =x+al_get_bitmap_width(keen)/4;
                posy_tiro =y;
            }

            if(posx_tiro>=800)
            {
                tiro = false;
            }
        score--;
        cont_frames_pulo++;
        cont_frames_moedas++;
        cont_frames_tiro++;
        cont_frames_porta++;

            if (cont_frames_pulo >= frames_sprite_pulo)
            {
                cont_frames_pulo=0;
                coluna_atual_pulo++;

                if (coluna_atual_pulo >= colunas_pulo)
                {
                    coluna_atual_pulo=0;
                    regiao_y_folha_pulo = linha_atual_pulo * altura_sprite_pulo;
                }

                    regiao_x_folha_pulo = coluna_atual_pulo * largura_sprite_pulo;
            }

            if (cont_frames_moedas>=frames_sprite_moedas && dinheiro)
            {
                cont_frames_moedas=0;
                linha_atual_moeda++;

                if (linha_atual_moeda>=linhas_moedas)
                {
                    linha_atual_moeda=0;
                    regiao_x_folha_moedas = coluna_atual_moedas * largura_sprite_moedas;

                    if (Colisao(x,y,moeda1x,moeda1y,largura_sprite_moedas,altura_sprite_moedas))
                    {

                        score +=500;
                        moeda1x=10;
                        moeda1y=10;
                        cont_moedas_prata++;


                    }
                    if (Colisao(x,y,moeda2x,moeda2y,largura_sprite_moedas,altura_sprite_moedas))
                    {

                        score +=500;
                        moeda2x=10;
                        moeda2y=10;
                        cont_moedas_prata++;

                    }
                }

                regiao_y_folha_moedas = linha_atual_moeda * altura_sprite_moedas;
            }

            if(cont_frames_tiro>=frames_sprite_tiro && tiro)
            {
                cont_frames_tiro = 0;
                coluna_atual_tiro++;

                if(coluna_atual_tiro>=colunas_tiro)
                {
                    coluna_atual_tiro = 0;
                    regiao_y_tiro = 0;
                }

                regiao_x_tiro = coluna_atual_tiro*largura_sprite_tiro;
                posx_tiro += velx_tiro;
                posy_tiro +=0;
            }

            if(al_key_down(&keyState,ALLEGRO_KEY_RIGHT) && !historia)
            {

                if (x >= 800 - al_get_bitmap_width(keen)/5)
                {
                    velx -=movespeed;
                    x = 0;
                    done = true;
                     cruz = false;
                    cruzx = x;
                    cruzy = y;
                    pegou = true;
                    dinheiro = true;
                    Ebola = true;
                    moeda1x = 300;
                    moeda1y = 300;
                    moeda2x = 400;
                    moeda2y = 400;
                    done2 = false;
                    zombie1vive = true;
                    zombie2vive = true;
                    zombie3vive = true;
                    zombiex[0] = 700;
                    zombiex[1] = 720;
                    zombiey[1] = 370;
                    zombiex[2] = 740;
                }

                velx = movespeed;
                dir = RIGHT;
            }

            else if(al_key_down(&keyState,ALLEGRO_KEY_UP) && !historia)
            {
                dir = UP;
                velx = 0;
            }
            else if(al_key_down(&keyState,ALLEGRO_KEY_DOWN) && !historia)
            {
                dir = DOWN;
                velx = 0;
            }
            else if(al_key_down(&keyState,ALLEGRO_KEY_LEFT) && !historia)
            {

                if (x<=0)
                {
                    velx +=movespeed;
                    x = 1;

                }

                velx = -movespeed;
                dir = LEFT;
            }
            else if(al_key_down(&keyState,ALLEGRO_KEY_C) && x>=cruzx-30 && x<=cruzx+30)
            {
                    cruz = false;
                    pegou = true;
            }
             else if(al_key_down(&keyState,ALLEGRO_KEY_Z) && x >= cruzx-20 && x<= cruzx+30 && y >= cruzy-20 && y<= cruzy+30 && coluna_atual_MP>2)
                    {
                        oracao = true;
                        dir = 5;
                        cont_frames_MP++;
                        if (cont_frames_MP>=15)
                        {
                            cont_frames_MP = 0;
                            coluna_atual_MP--;
                        }

                    }


            else
            {
                velx = 0;
                active = false;
                oracao = false;
                historia = false;
            }

            if (Colisao(x,y,posx,posy,32,42) && Ebolavive)
            {
                cont_frames_dano++;
            if (cont_frames_dano>=5 && coluna_atual_HP>2)
            {
                coluna_atual_HP-=1;
                cont_frames_dano = 0;
            }
            }

if (oracao)
{
    vuneravel = false;
}
largura_sprite_HP = 9*coluna_atual_HP;
largura_sprite_MP = 9*coluna_atual_MP;

            if (Colisao(x,y,zombiex[0],zombiey[0],10,10) && zombie1vive && vuneravel)
            {
                cont_frames_dano++;
            if (cont_frames_dano>=5 && coluna_atual_HP>2)
            {
                coluna_atual_HP-=1;
                cont_frames_dano = 0;
            }
            }
              if (Colisao(x,y,zombiex[1],zombiey[1],10,10) && zombie2vive && vuneravel)
            {
               cont_frames_dano++;
            if (cont_frames_dano>=5 && coluna_atual_HP>2)
            {
                coluna_atual_HP-=1;
                cont_frames_dano = 0;
            }
            }
              if (Colisao(x,y,zombiex[2],zombiey[2],10,10) && zombie3vive && vuneravel)
            {
                 cont_frames_dano++;
            if (cont_frames_dano>=5 && coluna_atual_HP>2)
            {
                coluna_atual_HP-=1;
                cont_frames_dano = 0;
            }
            }

            if (Colisao(posx_tiro,posy_tiro,posx,posy,30,30) && tiro)
            {
                Ebola = false;
                if(Ebolavive)
                {
                   score += 500;
                }
                tiro = false;
                Ebolavive = false;
            }

            if (Colisao(x,y,zombiex[0],zombiey[0],150,150) && zombie1vive && oracao)
        {
            zombie1vive = false;
            score +=2000;
        }
        if (Colisao(x,y,zombiex[1],zombiey[1],150,150) && zombie2vive && oracao)
        {
            zombie2vive = false;
            score +=2000;
        }
        if (Colisao(x,y,zombiex[2],zombiey[2],150,150) && zombie3vive && oracao)
        {
            zombie3vive = false;
            score +=2000;
        }

        if (Colisao(cruzx,cruzy,zombiex[0],zombiey[0],150,150) && zombie1vive)
        {
            zombie1vive = false;
            score +=2000;
        }
        if (Colisao(cruzx,cruzy,zombiex[1],zombiey[1],150,150) && zombie2vive)
        {
            zombie2vive = false;
            score +=2000;
        }
        if (Colisao(cruzx,cruzy,zombiex[2],zombiey[2],150,150) && zombie3vive)
        {
            zombie3vive = false;
            score +=2000;
        }

if (coluna_atual_HP <= 2)
            {
                historia = true;
                morte = true;
                vuneravel = false;
                cont_frames_morto++;
                if(cont_frames_morto>=12)
                {
                morte = false;
                    if(cont_frames_morto>=24)
                    {
                    coluna_atual_HP = 12;
                    cont_frames_morto = 0;
                    vuneravel = true;
                    }
                }
                if(cont_frames_morto == 6)
                {
                    cont_vidas--;
                       if(cont_vidas<0)
                        {
                        done = true;
                        }
                }
            }
            if(active)
            {
                sourceX += al_get_bitmap_width(keen)/5;
            }

            else
            {
                sourceX = 0;
            }

            if(sourceX>=al_get_bitmap_width(keen))
            {
                sourceX = 0;
            }

    sourceY = dir;

        }

            else if(events.timer.source == BOLAtimer)
            {
                if(Ebola)
                {
                    srand(time(NULL));
            iAleatorio = rand()%10 -4,5;
            iAleatorio2 = rand()%10 -4,5 ;
            posx+=iAleatorio;
            posy+=iAleatorio2;


                //se passou das bordas, inverte a direcao
                if (posx<=50)
                    posx = 50;

                if (posx>=LARGURA_TELA-76)
                    posx = LARGURA_TELA-76;

                if (posy<=10)
                    posy=10;

                if(posy>=ALTURA_TELA-200)
                    posy = ALTURA_TELA-200;
                }


            cont_frames_oracao[1]++;
            cont_frames_oracao[2]++;
            cont_frames_oracao[3]++;
            cont_frames_oracao[4]++;
            cont_frames_oracao[5]++;
            cont_frames_oracao[6]++;

             if (cont_frames_oracao[1] >= frames_sprite_oracao[1])
            {
                cont_frames_oracao[1] = 0;
                coluna_atual_oracao[1]++;

                if (coluna_atual_oracao[1] >= colunas_oracao[1])
                {
                    coluna_atual_oracao[1] = 0;
                    linha_atual_oracao[1]++;

                }
                if (linha_atual_oracao[1] > linhas_oracao[1])

                {
                    linha_atual_oracao[1] = 0;

                }
                regiao_x_folha_oracao[1] = coluna_atual_oracao[1] * largura_sprite_oracao[1];
                regiao_y_folha_oracao[1] = linha_atual_oracao[1] * altura_sprite_oracao[1];
            }
             if (cont_frames_oracao[2] >= frames_sprite_oracao[2])
             {
                 cont_frames_oracao[2] = 0;
                 coluna_atual_oracao[2]++;

                 if (coluna_atual_oracao[2] >= colunas_oracao[2])
                 {
                     coluna_atual_oracao[2] = 0;
                     linha_atual_oracao[2]++;

                 }
                  if (linha_atual_oracao[2] > linhas_oracao[2])
                  {
                       linha_atual_oracao[2] = 0;
                  }
                  regiao_x_folha_oracao[2] = coluna_atual_oracao[2] * largura_sprite_oracao[2];
                  regiao_y_folha_oracao[2] = linha_atual_oracao[2] * altura_sprite_oracao[2];
             }
             if (cont_frames_oracao[3] >= frames_sprite_oracao[3])
            {
                cont_frames_oracao[3] = 0;
                coluna_atual_oracao[3]++;

                if (coluna_atual_oracao[3] >= colunas_oracao[3])
                {
                    coluna_atual_oracao[3] = 0;
                    linha_atual_oracao[3]++;

                }
                if (linha_atual_oracao[3] > linhas_oracao[3])

                {
                    linha_atual_oracao[3] = 0;

                }
                regiao_x_folha_oracao[3] = coluna_atual_oracao[3] * largura_sprite_oracao[3];
                regiao_y_folha_oracao[3] = linha_atual_oracao[3] * altura_sprite_oracao[3];
            }
            if (cont_frames_oracao[4] >= frames_sprite_oracao[4])
            {
                cont_frames_oracao[4] = 0;
                coluna_atual_oracao[4]++;

                if (coluna_atual_oracao[4] >= colunas_oracao[4])
                {
                    coluna_atual_oracao[4] = 0;
                    linha_atual_oracao[4]++;

                }
                if (linha_atual_oracao[4] > linhas_oracao[4])

                {
                    linha_atual_oracao[4] = 0;

                }
                regiao_x_folha_oracao[4] = coluna_atual_oracao[4] * largura_sprite_oracao[4];
                regiao_y_folha_oracao[4] = linha_atual_oracao[4] * altura_sprite_oracao[4];
            }
            if (cont_frames_oracao[5] >= frames_sprite_oracao[5])
            {
                cont_frames_oracao[5] = 0;
                coluna_atual_oracao[5]++;

                if (coluna_atual_oracao[5] >= colunas_oracao[5])
                {
                    coluna_atual_oracao[5] = 0;
                    linha_atual_oracao[5]++;

                }
                if (linha_atual_oracao[5] > linhas_oracao[5])

                {
                    linha_atual_oracao[5] = 0;

                }
                regiao_x_folha_oracao[5] = coluna_atual_oracao[5] * largura_sprite_oracao[5];
                regiao_y_folha_oracao[5] = linha_atual_oracao[5] * altura_sprite_oracao[5];
            }

             if (cont_frames_oracao[6] >= frames_sprite_oracao[6])
            {
                cont_frames_oracao[6] = 0;
                coluna_atual_oracao[6]++;

                if (coluna_atual_oracao[6] >= colunas_oracao[6])
                {
                    coluna_atual_oracao[6] = 0;
                    linha_atual_oracao[6]++;

                }
                if (linha_atual_oracao[6] > linhas_oracao[6])

                {
                    linha_atual_oracao[6] = 0;

                }
                regiao_x_folha_oracao[6] = coluna_atual_oracao[6] * largura_sprite_oracao[6];
                regiao_y_folha_oracao[6] = linha_atual_oracao[6] * altura_sprite_oracao[6];
            }

            cont_frames_zombie++;

            if (cont_frames_zombie >= frames_sprite_zombie)
            {
                cont_frames_zombie = 0;
                coluna_atual_zombie[0]++;
                coluna_atual_zombie[1]++;
                coluna_atual_zombie[2]++;

                if (coluna_atual_zombie[0] >= colunas_zombie[0])
                {
                    coluna_atual_zombie[0] = 0;
                    coluna_atual_zombie[1] = 0;
                    coluna_atual_zombie[2] = 0;

                }

                zombiex[0] += velzombie[0];
                zombiex[1] += velzombie[1];
                zombiex[2] += velzombie[2];

                if(zombiex[0] <= 0 || zombiex[1] <= 0 || zombiex[2] <= 0)
                {
                    velzombie[0] = -velzombie[1];
                    velzombie[1] = -velzombie[1];
                    velzombie[2] = -velzombie[2];
                    linha_atual_zombie[0] = 1;
                    linha_atual_zombie[1] = 3;
                    linha_atual_zombie[2] = 1;
                }

                if( zombiex[0] >= 800 || zombiex[1] >= 800 || zombiex[2] >= 800)
                {
                    velzombie[0] = -velzombie[0];
                    velzombie[1] = -velzombie[1];
                    velzombie[2] = -velzombie[2];
                    linha_atual_zombie[0] = 3;
                    linha_atual_zombie[1] = 1;
                    linha_atual_zombie[2] = 3;
                }
                regiao_x_folha_zombie[0] = coluna_atual_zombie[0] * largura_sprite_zombie;
                regiao_x_folha_zombie[1] = coluna_atual_zombie[1] * largura_sprite_zombie;
                regiao_x_folha_zombie[2] = coluna_atual_zombie[2] * largura_sprite_zombie;
                regiao_y_folha_zombie[0] = linha_atual_zombie[0] * altura_sprite_zombie;
                regiao_y_folha_zombie[1] = linha_atual_zombie[1] * altura_sprite_zombie;
                regiao_y_folha_zombie[2] = linha_atual_zombie[2] * altura_sprite_zombie;
            }


            }

    }

if(draw)
{

    al_draw_bitmap(fundo,0,500,NULL);
    al_draw_bitmap(ARVOREF3,-10,-200,NULL);
    al_draw_bitmap(ARVOREF,-100,250,NULL);
    al_draw_bitmap(ARVOREF,-50,250,NULL);
    al_draw_bitmap(ARVOREF,0,250,NULL);
    al_draw_bitmap(ARVOREF,70,250,NULL);
    al_draw_bitmap(ARVOREF,100,250,NULL);
    al_draw_bitmap(ARVOREF,200,250,NULL);
    al_draw_bitmap(ARVOREF,250,250,NULL);
    al_draw_bitmap(ARVOREF,500,250,NULL);
    al_draw_bitmap(CASA,300,350,NULL);
    al_draw_bitmap(ARVOREF,400,250,NULL);
    al_draw_tinted_bitmap(FADE,al_map_rgba(0,0,0,60),0,0,NULL);
    al_draw_textf(font,al_map_rgb(255,255,255),cameraPosition[0]+1100,cameraPosition[1],ALLEGRO_ALIGN_CENTER, "SCORE: %i", 1000 + score);
    al_draw_textf(font2,al_map_rgb(255,255,255),cameraPosition[0]+50,cameraPosition[1]+10,ALLEGRO_ALIGN_CENTER, "X %i", cont_moedas_prata);
    al_draw_textf(font2,al_map_rgb(255,255,255),cameraPosition[0]+150,cameraPosition[1]+10,ALLEGRO_ALIGN_CENTER, "X %i ", cont_vidas);
        if(pulo)
        {
            al_draw_bitmap_region(keen,regiao_x_folha_pulo,regiao_y_folha_pulo,largura_sprite_pulo,altura_sprite_pulo,x,y,0);
        }

        if(!tiro && !pulo)
        {
            al_draw_bitmap_region(keen,sourceX,sourceY*al_get_bitmap_height(keen)/7,30,50,x,y,NULL);
        }
         if(tiro)
        {
            if(!pulo)
            {
            al_draw_bitmap_region(keen,sourceX,RIGHT*al_get_bitmap_height(keen)/7,30,50,x,y,NULL);
            al_draw_bitmap_region(ATIRA,0,0,40,30,x,y,NULL);

            }
            al_draw_bitmap_region(TIRO,regiao_x_tiro,0,largura_sprite_tiro,altura_sprite_tiro,posx_tiro,posy_tiro+10,0);
        }
   if(zombie2vive)
    {
        al_draw_bitmap_region(ZOMBIE2,regiao_x_folha_zombie[1],regiao_y_folha_zombie[1], largura_sprite_zombie, altura_sprite_zombie, zombiex[1],zombiey[1], NULL);
    }
    if(zombie1vive)
    {
        al_draw_bitmap_region(ZOMBIE,regiao_x_folha_zombie[0],regiao_y_folha_zombie[0], largura_sprite_zombie, altura_sprite_zombie, zombiex[0],zombiey[0], NULL);
    }
    if(zombie3vive)
    {
       al_draw_bitmap_region(ZOMBIE3,regiao_x_folha_zombie[2],regiao_y_folha_zombie[2], largura_sprite_zombie, altura_sprite_zombie, zombiex[2],zombiey[2], NULL);
    }
    al_draw_bitmap_region(MOEDA,regiao_x_folha_moedas,regiao_y_folha_moedas,largura_sprite_moedas,altura_sprite_moedas,moeda1x,moeda1y,0);
    al_draw_bitmap_region(MOEDA,regiao_x_folha_moedas,regiao_y_folha_moedas,largura_sprite_moedas,altura_sprite_moedas,moeda2x,moeda2y,0);
    al_draw_bitmap_region(keen,5,300,21,21,cameraPosition[0]+80,cameraPosition[1]+8,0);
    al_draw_bitmap_region(MOEDA,regiao_x_folha_moedas,regiao_y_folha_moedas,largura_sprite_moedas,altura_sprite_moedas,cameraPosition[0]+10,cameraPosition[1]+10,0);
    if(Ebola)
    {
         al_draw_bitmap_region(BOLA,0,0,76,76, posx, posy, 0);
    }
     if(!Ebola)
    {
         al_draw_bitmap_region(BOLA,76,0,152,76, posx, posy, 0);
    }
        if (cruz)
    {
       al_draw_bitmap(CRUZ,cruzx,cruzy,NULL);
    }
      if (oracao)
    {

        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[1],regiao_y_folha_oracao[1],largura_sprite_oracao[1], altura_sprite_oracao[1], x+15, y+15, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[2],regiao_y_folha_oracao[2],largura_sprite_oracao[2], altura_sprite_oracao[2], x-30, y+30, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[3],regiao_y_folha_oracao[3],largura_sprite_oracao[3], altura_sprite_oracao[3], x-70, y, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[4],regiao_y_folha_oracao[4],largura_sprite_oracao[4], altura_sprite_oracao[4], x-70, y-45, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[5],regiao_y_folha_oracao[5],largura_sprite_oracao[5], altura_sprite_oracao[5], x+15, y-45, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[6],regiao_y_folha_oracao[6],largura_sprite_oracao[6], altura_sprite_oracao[6], x-30,y-60,NULL);

    }
    if (morte)
{
    al_clear_to_color(al_map_rgb(0,0,0));
    al_draw_bitmap(morto,x,y,NULL);
    al_draw_textf(font2,al_map_rgb(255,255,255),120,10,ALLEGRO_ALIGN_CENTER, "X %i ", cont_vidas);
    al_draw_bitmap_region(keen,5,300,21,21,80,8,0);
    al_flip_display();

}
    al_draw_bitmap_region(HP,regiao_x_folha_HP,regiao_y_folha_HP,largura_sprite_HP,altura_sprite_HP,cameraPosition[0]+50,cameraPosition[1]+30,NULL);
    al_draw_bitmap_region(MP,regiao_x_folha_MP,regiao_y_folha_MP,largura_sprite_MP,altura_sprite_MP,cameraPosition[0]+50,cameraPosition[1]+60,NULL);
    al_draw_bitmap_region(INU,0,0,32,42,300,480,NULL);
    al_flip_display();
    al_clear_to_color(al_map_rgb(0,0,0));

}
}
while(!done2)
{

ALLEGRO_EVENT events;
al_wait_for_event(event_queue, &events);
al_get_keyboard_state(&keyState);
cameraUpdate(cameraPosition,x,y,35,200);
            if ( x>= 1550 && cont_frames_socorro > 0 && cont_frames_socorro < 300 && posicaocamerax < 2395)
            {
                cameraUpdate(cameraPosition,posicaocamerax,zoioy[2],35,200);
            }
             if (posicaocamerax > 2395)
            {
                cameraUpdate(cameraPosition,zoiox[2]-300,zoioy[2],35,200);
            }
al_identity_transform(&camera);
al_translate_transform(&camera, -cameraPosition[0],-cameraPosition[1]);
al_use_transform(&camera);

 if(events.type == ALLEGRO_EVENT_KEY_UP)
    {

        switch (events.keyboard.keycode)
        {
        case ALLEGRO_KEY_Z:
        dir = 0;
        }
    }

    if(events.type == ALLEGRO_EVENT_KEY_DOWN)
    {

        switch (events.keyboard.keycode)
        {
        case ALLEGRO_KEY_ESCAPE:
            done2 = true;
        case ALLEGRO_KEY_SPACE:
            if(jump)
            {
                vely -= jumpspeed;
                pulo = true;

            }

        }

         switch (events.keyboard.keycode)
        {
        case ALLEGRO_KEY_C:
            if(!zoiovive[1] && !zoiovive[2] && x>=hikarix && x<=hikarix+100)
            {
                fala3_1 = true;
                dir = LEFT;
                historia = true;

            }


        }
        switch (events.keyboard.keycode)
        {
            case ALLEGRO_KEY_ENTER:
             if(fala3_1)
             {
                 fala3_1 = false;
                 fala3_2 = true;
                 break;
             }
             if(fala3_2)
             {
                 fala3_2 = false;
                 fala3_3 = true;
                 break;
             }
             if(fala3_3)
             {
                 fala3_3 = false;
                 fala3_4 = true;
                 break;
             }
              if(fala3_4)
             {
                 fala3_4 = false;
                 fala3_5 = true;
                 break;
             }
             if(fala3_5)
             {
                 fala3_5 = false;
                 fala3_6 = true;
                 break;
             }
             if(fala3_6)
             {
                 fala3_6 = false;
                 fala3_7 = true;
                 break;
             }
              if(fala3_7)
             {
                 fala3_7 = false;
                 fala3_8 = true;
                 break;
             }
             if(fala3_8)
             {
                 fala3_8 = false;
                fade = true;

                 break;
             }

        }
    }
    if(events.type == ALLEGRO_EVENT_KEY_UP)
    {
        switch (events.keyboard.keycode)
        {
        case ALLEGRO_KEY_X:
            tiro = true;

        }
        switch (events.keyboard.keycode)
        {
           case ALLEGRO_KEY_S:
           if(pegou)
           {
            cruz = true;
            cruzx = x;
            cruzy = y;
            pegou = false;
           }
        }

    }
    else if (events.type == ALLEGRO_EVENT_TIMER)
    {


        if(events.timer.source == timer)
        {
            active = true;
            draw = true;
            jump = false;
            noar = true;
            vely +=gravity;
            y += vely;

            if (y>=700)
            {
                vely = 0;
                historia = true;
                morte = true;
                vuneravel = false;
                cont_frames_morto++;
                if(cont_frames_morto>=12)
                {
                morte = false;
                    if(cont_frames_morto>=24)
                    {
                    coluna_atual_HP = 12;
                    cont_frames_morto = 0;
                    vuneravel = true;
                    y = 350;
                    x = 1300;
                    historia = false;
                    }
                }
                if(cont_frames_morto == 6)
                {
                    cont_vidas--;
                       if(cont_vidas<0)
                        {
                        done2 = true;
                        }
                }


            }

            if(noar)
            {
                pulo=true;
            }

        if (x<=800 && y>=470)
        {
            y = 470;
                vely = 0;
                pulo = false;
                jump = true;
                noar = false;
        }
          if (x>=50 && x <=230 && y>=360 && y<=370)
        {
                y = 360;
                vely = 0;
                pulo = false;
                jump = true;
                noar = false;
        }
         if (x>=160 && x <=270 && y>=260 && y<=270)
        {
            y = 260;
                vely = 0;
                pulo = false;
                jump = true;
                noar = false;
        }
         if (x>=800 && x <=1050 && y>=360 && y<=370)
        {
            y = 360;
                vely = 0;
                pulo = false;
                jump = true;
                noar = false;
        }
          if (x>=1050 && x <=1635 && y>=470 && y <= 500)
        {
            y = 470;
                vely = 0;
                pulo = false;
                jump = true;
                noar = false;
        }
        if (x>=1890 && x <=1930 && y>=470 && y<= 500)
        {
            y = 470;
                vely = 0;
                pulo = false;
                jump = true;
                noar = false;
        }

        if (x>=2200 && x <=2230 && y>=470 && y<= 500)
        {
            y = 470;
                vely = 0;
                pulo = false;
                jump = true;
                noar = false;
        }

         if (x>=2485 && y>=470 && y<= 500)
        {
            y = 470;
                vely = 0;
                pulo = false;
                jump = true;
                noar = false;
        }

            if(!tiro)
            {
                posx_tiro =x+al_get_bitmap_width(keen)/4;
                posy_tiro =y;
            }

            if(posx_tiro>=800)
            {
                tiro = false;
            }

            if (fade)
            {
                fading1 +=5;
                if (fading1 >=255)
                {
                done2 = true;
                cameraUpdate(cameraPosition,x,y,-4500,-110);
                al_identity_transform(&camera);
                al_translate_transform(&camera, -cameraPosition[0],-cameraPosition[1]);
                al_use_transform(&camera);
                 x = 0;
                 historia = false;
                 hikarix = 92;
                 hikariy = 485;
                 boat = false;
            }

            }
        score--;
        cont_frames_pulo++;
        cont_frames_moedas++;
        cont_frames_tiro++;
        cont_frames_porta++;

            if (cont_frames_pulo >= frames_sprite_pulo)
            {
                cont_frames_pulo=0;
                coluna_atual_pulo++;

                if (coluna_atual_pulo >= colunas_pulo)
                {
                    coluna_atual_pulo=0;
                    regiao_y_folha_pulo = linha_atual_pulo * altura_sprite_pulo;
                }

                    regiao_x_folha_pulo = coluna_atual_pulo * largura_sprite_pulo;
            }

            if (cont_frames_moedas>=frames_sprite_moedas && dinheiro)
            {
                cont_frames_moedas=0;
                linha_atual_moeda++;

                if (linha_atual_moeda>=linhas_moedas)
                {
                    linha_atual_moeda=0;
                    regiao_x_folha_moedas = coluna_atual_moedas * largura_sprite_moedas;

                    if (Colisao(x,y,moeda1x,moeda1y,largura_sprite_moedas,altura_sprite_moedas))
                    {

                        score +=500;
                        moeda1x=10;
                        moeda1y=10;
                        cont_moedas_prata++;


                    }
                    if (Colisao(x,y,moeda2x,moeda2y,largura_sprite_moedas,altura_sprite_moedas))
                    {

                        score +=500;
                        moeda2x=10;
                        moeda2y=10;
                        cont_moedas_prata++;

                    }
                }

                regiao_y_folha_moedas = linha_atual_moeda * altura_sprite_moedas;
            }



            if(cont_frames_tiro>=frames_sprite_tiro && tiro)
            {
                cont_frames_tiro = 0;
                coluna_atual_tiro++;

                if(coluna_atual_tiro>=colunas_tiro)
                {
                    coluna_atual_tiro = 0;
                    regiao_y_tiro = 0;
                }

                regiao_x_tiro = coluna_atual_tiro*largura_sprite_tiro;
                posx_tiro += velx_tiro;
                posy_tiro +=0;
            }

            if (cont_frames_porta >= frames_sprite_porta && abrir)
            {
                cont_frames_porta=0;
                linha_atual_porta++;

                if (linha_atual_porta >= linhas_porta)
                {
                    linha_atual_porta = 3;

                }
                regiao_y_folha_porta = linha_atual_porta * altura_sprite_porta;

            }


            if(al_key_down(&keyState,ALLEGRO_KEY_RIGHT) && !historia)
            {
                if(x>=800 && x<=950 && y >=370)
                {
                    x -= movespeed;
                }

                x += movespeed;
                dir = RIGHT;
            }

            else if(al_key_down(&keyState,ALLEGRO_KEY_UP) && !historia)
            {
                dir = UP;
                velx = 0;
            }
            else if(al_key_down(&keyState,ALLEGRO_KEY_DOWN) && !historia)
            {
                dir = DOWN;
                velx = 0;
            }
            else if(al_key_down(&keyState,ALLEGRO_KEY_LEFT) && !historia)
            {

                if (x<=0 || x >=950 && x<=1051 && y>=370)
                {
                    x +=movespeed;
                }

                x -= movespeed;
                dir = LEFT;
            }
               else if(al_key_down(&keyState,ALLEGRO_KEY_C) && x>=cruzx-30 && x<=cruzx+30)
            {
                    cruz = false;
                    pegou = true;
            }
            else if(al_key_down(&keyState,ALLEGRO_KEY_Z) && x >= cruzx-20 && x<= cruzx+30 && y >= cruzy-20 && y<= cruzy+30 && coluna_atual_MP>2)
                    {
                        oracao = true;
                        dir = 5;
                        cont_frames_MP++;
                        if (cont_frames_MP>=15)
                        {
                            cont_frames_MP = 0;
                            coluna_atual_MP--;
                        }

                    }

            else if(al_key_down(&keyState,ALLEGRO_KEY_C) && x >= 700 && x<=760 && y >=450)
            {
                dir=UP;
                velx = 0;
                abrir = true;

                if(abrir)


                {
                    cont_frames_fase++;
                    if(cont_frames_fase>=36)
                    {
                       done2 = true;
                       done3 = false;
                       dinheiro = true;
                       moeda1x = 600;
                       moeda1y = 150;
                       moeda2x = 600;
                       moeda2y = 380;
                       moeda3x = 420;
                       moeda3y = 380;
                       moeda4x = 500;
                       moeda4y = 150;
                       moeda5x = 700;
                       moeda5y = 150;

                       x = 0;
                    }

                }
            }

            else
            {
                velx = 0;
                active = false;
                oracao = false;


            }



           if (Colisao(x,y,posx,posy,32,42) && Ebolavive)
            {
            cont_frames_dano++;
            if (cont_frames_dano>=5 && coluna_atual_HP>2)
            {
                coluna_atual_HP-=1;
                cont_frames_dano = 0;
            }
            }
          if(oracao)
          {
              vuneravel = false;
          }

          largura_sprite_HP = 9*coluna_atual_HP;
          largura_sprite_MP = 9*coluna_atual_MP;

             if (Colisao(x,y,zoiox[0],zoioy[0],10,10) && zoiovive[0] && vuneravel)
            {
               cont_frames_dano++;
            if (cont_frames_dano>=5 && coluna_atual_HP>2)
            {
                coluna_atual_HP-=1;
                cont_frames_dano = 0;
            }
            }
              if (Colisao(x,y,zoiox[1],zoioy[1],10,10) && zoiovive[1] && vuneravel)
            {
                cont_frames_dano++;
            if (cont_frames_dano>=5 && coluna_atual_HP>2)
            {
                coluna_atual_HP-=1;
                cont_frames_dano = 0;
            }
            }
             if (Colisao(x,y,zoiox[2],zoioy[2],10,10) && zoiovive[2] && vuneravel)
            {
                cont_frames_dano++;
            if (cont_frames_dano>=5 && coluna_atual_HP>2)
            {
                coluna_atual_HP-=1;
                cont_frames_dano = 0;
            }
            }
            if (Colisao(x,y,zombiex[0],zombiey[0],10,10) && zombie1vive && vuneravel)
            {
                cont_frames_dano++;
            if (cont_frames_dano>=5 && coluna_atual_HP>2)
            {
                coluna_atual_HP-=1;
                cont_frames_dano = 0;
            }
            }

              if (Colisao(x,y,zombiex[2],zombiey[2],10,10) && zombie3vive && vuneravel)
            {
               cont_frames_dano++;
            if (cont_frames_dano>=5 && coluna_atual_HP>2)
            {
                coluna_atual_HP-=1;
                cont_frames_dano = 0;
            }
            }



              if (Colisao(x,y,540,500,0,0))
            {
               cont_frames_dano++;
            if (cont_frames_dano>=5 && coluna_atual_HP>2)
            {
                coluna_atual_HP-=1;
                cont_frames_dano = 0;
            }
            }
             if (Colisao(x,y,575,500,0,0))
            {
                cont_frames_dano++;
            if (cont_frames_dano>=5 && coluna_atual_HP>2)
            {
                coluna_atual_HP-=1;
                cont_frames_dano = 0;
            }
            }
            if (Colisao(posx_tiro,posy_tiro,posx,posy,30,30) && tiro)
            {
                Ebola = false;
                score += 500;
                tiro = false;
                Ebolavive = false;
            }
        if (Colisao(x,y,zombiex[0],zombiey[0],150,150) && zombie1vive && oracao)
        {
            zombie1vive = false;
            score +=2000;
        }
        if (Colisao(x,y,zombiex[1],zombiey[1],150,150) && zombie2vive && oracao)
        {
            zombie2vive = false;
            score +=2000;
        }
        if (Colisao(x,y,zombiex[2],zombiey[2],150,150) && zombie3vive && oracao)
        {
            zombie3vive = false;
            score +=2000;
        }
         if (Colisao(x,y,zoiox[0],zoioy[0],10,10) && zoiovive[0] && oracao)
        {
            zoiovive[0] = false;
            score +=1000;
        }
        if (Colisao(x,y,zoiox[1],zoioy[1],10,10) && zoiovive[1] && oracao)
        {
            zoiovive[1] = false;
            score +=1000;
        } if (Colisao(x,y,zoiox[2],zoioy[2],10,10) && zoiovive[2] && oracao)
        {
            zoiovive[2] = false;
            score +=1000;
        }
        if (Colisao(cruzx,cruzy,zombiex[0],zombiey[0],150,150) && zombie1vive)
        {
            zombie1vive = false;
            score +=2000;
        }
        if (Colisao(cruzx,cruzy,zombiex[1],zombiey[1],150,150) && zombie2vive)
        {
            zombie2vive = false;
            score +=2000;
        }
        if (Colisao(cruzx,cruzy,zombiex[2],zombiey[2],150,150) && zombie3vive)
        {
            zombie3vive = false;
            score +=2000;
        }
         if (Colisao(cruzx,cruzy,zoiox[0],zoioy[0],10,10) && zoiovive[0])
        {
            zoiovive[0] = false;
            score +=1000;
        }
        if (Colisao(cruzx,cruzy,zoiox[1],zoioy[1],10,10) && zoiovive[1])
        {
            zoiovive[1] = false;
            score +=1000;
        } if (Colisao(cruzx,cruzy,zoiox[2],zoioy[2],10,10) && zoiovive[2])
        {
            zoiovive[2] = false;
            score +=1000;
        }

        if (coluna_atual_HP <= 2)
            {
                historia = true;
                morte = true;
                vuneravel = false;
                cont_frames_morto++;
                if(cont_frames_morto>=12)
                {
                morte = false;
                    if(cont_frames_morto>=24)
                    {
                    coluna_atual_HP = 12;
                    cont_frames_morto = 0;
                    vuneravel = true;
                    }
                }
                if(cont_frames_morto == 6)
                {
                    cont_vidas--;
                       if(cont_vidas<0)
                        {
                        done2 = true;
                        }
                }
            }


            if(active)
            {
                sourceX += al_get_bitmap_width(keen)/5;
            }

            else
            {
                sourceX = 0;
            }

            if(sourceX>=al_get_bitmap_width(keen))
            {
                sourceX = 0;
            }

    sourceY = dir;

        }


            else if(events.timer.source == BOLAtimer)
            {
                if(!historia)
                {
                    posicaocamerax = x;
                }

                if(x>=1550)
                {
                    cont_frames_socorro++;
                    if ( cont_frames_socorro < 300)
                    {
                        historia = true;
                        posicaocamerax += velcamera;
                    }
                    else
                        historia = false;

                }
                if (fala3_1 || fala3_2 || fala3_3 || fala3_4 || fala3_5 || fala3_6 || fala3_7 || fala3_8)
                {
                    historia = true;
                    sourceX = 1;
                    sourceY = 2;
                    linha_atual_hikari = 1;

                }

                if(Ebola)
                {
                     srand(time(NULL));
            iAleatorio = rand()%10 -4,5;
            iAleatorio2 = rand()%10 -4,5 ;
            posx+=iAleatorio;
            posy+=iAleatorio2;


                //se passou das bordas, inverte a direcao
                if (posx<=50)
                    posx = 51;

                if (posx>=400)
                    posx = 399;

                if (posy<=10)
                    posy=10;

                if(posy>=ALTURA_TELA-200)
                    posy = ALTURA_TELA-200;
                }



             cont_frames_planta++;;

             if (cont_frames_planta >= frames_sprite_planta)
            {
                cont_frames_planta = 0;
                coluna_atual_planta++;

                if (coluna_atual_planta >= colunas_planta)
                {
                    coluna_atual_planta = 0;
                }

                regiao_x_folha_planta = coluna_atual_planta * largura_sprite_planta;
                regiao_y_folha_planta = 0 * altura_sprite_planta;
            }

            cont_frames_olho++;

              if (cont_frames_olho>= frames_sprite_olho)
            {
                cont_frames_olho = 0;
                coluna_atual_olho++;

                if (coluna_atual_olho >= colunas_olho)
                {
                    coluna_atual_olho = 0;
                    linha_atual_olho++;
                }
                if (linha_atual_olho >= linhas_olho)
                {
                    linha_atual_olho = 0;
                }

                regiao_x_folha_olho = coluna_atual_olho * largura_sprite_olho;
                regiao_y_folha_olho = linha_atual_olho * altura_sprite_olho;
            }

            if(zoiovive[1] || zoiovive[2])

     cont_frames_hikari++;

              if (cont_frames_hikari>= frames_sprite_hikari)
            {
                cont_frames_hikari = 0;
                coluna_atual_hikari++;

                if (coluna_atual_hikari >= colunas_hikari)
                {
                    coluna_atual_hikari = 0;
                    linha_atual_hikari++;
                }
                if (linha_atual_hikari >= linhas_hikari)
                {
                    linha_atual_hikari = 0;
                }

                regiao_x_folha_hikari = coluna_atual_hikari * largura_sprite_hikari;
                regiao_y_folha_hikari = linha_atual_hikari * altura_sprite_hikari;
            }


            if(!zoiovive[1] && !zoiovive[2])
            {
                linha_atual_hikari = 1;
                coluna_atual_hikari = 1;
                regiao_x_folha_hikari = coluna_atual_hikari * largura_sprite_hikari;
                regiao_y_folha_hikari = linha_atual_hikari * altura_sprite_hikari;

            }


            if(zoiovive[0])
                {
                     srand(time(NULL));
            iAleat[0] = rand()%5 - 2;
            iAleat[1] = rand()%5 - 2 ;
            zoiox[0]+=iAleat[0];
            zoioy[0]+=iAleat[1];


                //se passou das bordas, inverte a direcao
                if (zoiox[0]<=700)
                    zoiox[0] = 701;

                if (zoiox[0]>=1800)
                    zoiox[0] = 1799;

                if (zoioy[0]<=10)
                    zoioy[0]=10;

                if(zoioy[0]>=ALTURA_TELA-100)
                    zoioy[0] = ALTURA_TELA-100;
                }

                if(x>=1550)
                {
                    cont_passos_zoio++;

                    if(cont_passos_zoio < 1700)
                    {
                        zoiox[1] -= velzoio[1];
                        zoioy[1] += velzoio[1];
                        zoiox[2] -= velzoio[2];
                        zoioy[2] += velzoio[2];

                    }

                }


            cont_frames_oracao[1]++;
            cont_frames_oracao[2]++;
            cont_frames_oracao[3]++;
            cont_frames_oracao[4]++;
            cont_frames_oracao[5]++;
            cont_frames_oracao[6]++;

             if (cont_frames_oracao[1] >= frames_sprite_oracao[1])
            {
                cont_frames_oracao[1] = 0;
                coluna_atual_oracao[1]++;

                if (coluna_atual_oracao[1] >= colunas_oracao[1])
                {
                    coluna_atual_oracao[1] = 0;
                    linha_atual_oracao[1]++;

                }
                if (linha_atual_oracao[1] > linhas_oracao[1])

                {
                    linha_atual_oracao[1] = 0;

                }
                regiao_x_folha_oracao[1] = coluna_atual_oracao[1] * largura_sprite_oracao[1];
                regiao_y_folha_oracao[1] = linha_atual_oracao[1] * altura_sprite_oracao[1];
            }
             if (cont_frames_oracao[2] >= frames_sprite_oracao[2])
             {
                 cont_frames_oracao[2] = 0;
                 coluna_atual_oracao[2]++;

                 if (coluna_atual_oracao[2] >= colunas_oracao[2])
                 {
                     coluna_atual_oracao[2] = 0;
                     linha_atual_oracao[2]++;

                 }
                  if (linha_atual_oracao[2] > linhas_oracao[2])
                  {
                       linha_atual_oracao[2] = 0;
                  }
                  regiao_x_folha_oracao[2] = coluna_atual_oracao[2] * largura_sprite_oracao[2];
                  regiao_y_folha_oracao[2] = linha_atual_oracao[2] * altura_sprite_oracao[2];
             }
             if (cont_frames_oracao[3] >= frames_sprite_oracao[3])
            {
                cont_frames_oracao[3] = 0;
                coluna_atual_oracao[3]++;

                if (coluna_atual_oracao[3] >= colunas_oracao[3])
                {
                    coluna_atual_oracao[3] = 0;
                    linha_atual_oracao[3]++;

                }
                if (linha_atual_oracao[3] > linhas_oracao[3])

                {
                    linha_atual_oracao[3] = 0;

                }
                regiao_x_folha_oracao[3] = coluna_atual_oracao[3] * largura_sprite_oracao[3];
                regiao_y_folha_oracao[3] = linha_atual_oracao[3] * altura_sprite_oracao[3];
            }
            if (cont_frames_oracao[4] >= frames_sprite_oracao[4])
            {
                cont_frames_oracao[4] = 0;
                coluna_atual_oracao[4]++;

                if (coluna_atual_oracao[4] >= colunas_oracao[4])
                {
                    coluna_atual_oracao[4] = 0;
                    linha_atual_oracao[4]++;

                }
                if (linha_atual_oracao[4] > linhas_oracao[4])

                {
                    linha_atual_oracao[4] = 0;

                }
                regiao_x_folha_oracao[4] = coluna_atual_oracao[4] * largura_sprite_oracao[4];
                regiao_y_folha_oracao[4] = linha_atual_oracao[4] * altura_sprite_oracao[4];
            }
            if (cont_frames_oracao[5] >= frames_sprite_oracao[5])
            {
                cont_frames_oracao[5] = 0;
                coluna_atual_oracao[5]++;

                if (coluna_atual_oracao[5] >= colunas_oracao[5])
                {
                    coluna_atual_oracao[5] = 0;
                    linha_atual_oracao[5]++;

                }
                if (linha_atual_oracao[5] > linhas_oracao[5])

                {
                    linha_atual_oracao[5] = 0;

                }
                regiao_x_folha_oracao[5] = coluna_atual_oracao[5] * largura_sprite_oracao[5];
                regiao_y_folha_oracao[5] = linha_atual_oracao[5] * altura_sprite_oracao[5];
            }

             if (cont_frames_oracao[6] >= frames_sprite_oracao[6])
            {
                cont_frames_oracao[6] = 0;
                coluna_atual_oracao[6]++;

                if (coluna_atual_oracao[6] >= colunas_oracao[6])
                {
                    coluna_atual_oracao[6] = 0;
                    linha_atual_oracao[6]++;

                }
                if (linha_atual_oracao[6] > linhas_oracao[6])

                {
                    linha_atual_oracao[6] = 0;

                }
                regiao_x_folha_oracao[6] = coluna_atual_oracao[6] * largura_sprite_oracao[6];
                regiao_y_folha_oracao[6] = linha_atual_oracao[6] * altura_sprite_oracao[6];
            }

             cont_frames_zombie++;

            if (cont_frames_zombie >= frames_sprite_zombie)
            {
                cont_frames_zombie = 0;
                coluna_atual_zombie[0]++;
                coluna_atual_zombie[1]++;
                coluna_atual_zombie[2]++;

                if (coluna_atual_zombie[0] >= colunas_zombie[0])
                {
                    coluna_atual_zombie[0] = 0;
                    coluna_atual_zombie[1] = 0;
                    coluna_atual_zombie[2] = 0;

                }

                zombiex[0] += velzombie[0];
                zombiex[1] += velzombie[1];
                zombiex[2] += velzombie[2];

                if(zombiex[0] <= 600 )
                {
                    velzombie[0] = -velzombie[0];
                    linha_atual_zombie[0] = 1;

                }
                if(zombiex[1]<= 230)
                {
                    velzombie[1] = -velzombie[1];
                    linha_atual_zombie[1] = 1;

                }
                if(zombiex[2] <= 0)
                {
                    velzombie[2] = -velzombie[2];
                    linha_atual_zombie[2] = 1;
                }

                if( zombiex[0] >= 800)
                {
                    velzombie[0] = -velzombie[0];
                    linha_atual_zombie[0] = 3;

                }
                if(zombiex[1] >= 1500)
                {

                    velzombie[1] = -velzombie[1];
                    linha_atual_zombie[1] = 1;

                }
                if(zombiex[2] >= 800)
                {
                    velzombie[2] = -velzombie[2];
                    linha_atual_zombie[2] = 3;
                }
                regiao_x_folha_zombie[0] = coluna_atual_zombie[0] * largura_sprite_zombie;
                regiao_x_folha_zombie[1] = coluna_atual_zombie[1] * largura_sprite_zombie;
                regiao_x_folha_zombie[2] = coluna_atual_zombie[2] * largura_sprite_zombie;
                regiao_y_folha_zombie[0] = linha_atual_zombie[0] * altura_sprite_zombie;
                regiao_y_folha_zombie[1] = linha_atual_zombie[1] * altura_sprite_zombie;
                regiao_y_folha_zombie[2] = linha_atual_zombie[2] * altura_sprite_zombie;
            }
            }
    }

if(draw)
{
 if(zombie2vive)
    {
        al_draw_bitmap_region(ZOMBIE2,regiao_x_folha_zombie[1],regiao_y_folha_zombie[1], largura_sprite_zombie, altura_sprite_zombie, zombiex[1],zombiey[1], NULL);
    }
    al_draw_bitmap(fundo,0,500,NULL);
    al_draw_bitmap(fundo1,800,500,NULL);
    al_draw_bitmap(fundo2,2500,500,NULL);
    al_draw_bitmap(PLATAFORMA1, 1900, 500, NULL);
    al_draw_bitmap(PLATAFORMA2, 2200, 500, NULL);
    al_draw_bitmap(ARVOREF3,-10,-200,NULL);
    al_draw_bitmap(ARVOREF3,800,-200,NULL);
    al_draw_bitmap(ARVOREF3,1600,-200,NULL);
    al_draw_bitmap(PLATAFORMAF,50,290,NULL);
    al_draw_bitmap(RAIZ,300,200,NULL);
    al_draw_bitmap(RAIZ,1100,200,NULL);
    al_draw_bitmap(TRONCO, 800, 400, NULL);
    al_draw_bitmap(ESPIRITOS,900,450,NULL);
    al_draw_bitmap(KINOKO,330,380,NULL);
     al_draw_textf(font,al_map_rgb(255,255,255),cameraPosition[0]+1100,cameraPosition[1],ALLEGRO_ALIGN_CENTER, "SCORE: %i", 1000 + score);
    al_draw_textf(font2,al_map_rgb(255,255,255),cameraPosition[0]+50,cameraPosition[1]+10,ALLEGRO_ALIGN_CENTER, "X %i", cont_moedas_prata);
    al_draw_textf(font2,al_map_rgb(255,255,255),cameraPosition[0]+150,cameraPosition[1]+10,ALLEGRO_ALIGN_CENTER, "X %i ", cont_vidas);
    al_draw_tinted_bitmap(FADE,al_map_rgba(0,0,0,60),0,0,NULL);
    al_draw_tinted_bitmap(FADE,al_map_rgba(0,0,0,60),al_get_bitmap_width(FADE),0,NULL);
    al_draw_tinted_bitmap(FADE,al_map_rgba(0,0,0,60),2*al_get_bitmap_width(FADE),0,NULL);
    al_draw_tinted_bitmap(FADE,al_map_rgba(0,0,0,60),3*al_get_bitmap_width(FADE),0,NULL);
    al_draw_tinted_bitmap(FADE,al_map_rgba(0,0,0,60),4*al_get_bitmap_width(FADE),0,NULL);

    if (pulo)
    {
        al_draw_bitmap_region(keen,regiao_x_folha_pulo,regiao_y_folha_pulo,largura_sprite_pulo,altura_sprite_pulo,x,y,0);
    }
        if(!tiro && !pulo)
        {
            al_draw_bitmap_region(keen,sourceX,sourceY*al_get_bitmap_height(keen)/7,30,50,x,y,NULL);
        }
        if(tiro)
        {
            if(!pulo)
            {
                al_draw_bitmap_region(keen,sourceX,RIGHT*al_get_bitmap_height(keen)/7,30,50,x,y,NULL);
               al_draw_bitmap_region(ATIRA,0,0,40,50,x,y,NULL);
            }
            al_draw_bitmap_region(TIRO,regiao_x_tiro,0,largura_sprite_tiro,altura_sprite_tiro,posx_tiro,posy_tiro+10,0);
        }

    al_draw_bitmap_region(MOEDA,regiao_x_folha_moedas,regiao_y_folha_moedas,largura_sprite_moedas,altura_sprite_moedas,moeda1x,moeda1y,0);
    al_draw_bitmap_region(MOEDA,regiao_x_folha_moedas,regiao_y_folha_moedas,largura_sprite_moedas,altura_sprite_moedas,moeda2x,moeda2y,0);
   al_draw_bitmap_region(keen,5,300,21,21,cameraPosition[0]+80,cameraPosition[1]+8,0);
    al_draw_bitmap_region(MOEDA,regiao_x_folha_moedas,regiao_y_folha_moedas,largura_sprite_moedas,altura_sprite_moedas,cameraPosition[0]+10,cameraPosition[1]+10,0);
   if(Ebola)
    {
         al_draw_bitmap_region(BOLA,0,0,76,76, posx, posy, 0);
    }
if (zoiovive[0])
{
      al_draw_bitmap_region(ZOIO,regiao_x_folha_olho,regiao_y_folha_olho,largura_sprite_olho, altura_sprite_olho,zoiox[0],zoioy[0],0);
}

if (zoiovive[1])
{
      al_draw_bitmap_region(ZOIO,regiao_x_folha_olho,regiao_y_folha_olho,largura_sprite_olho, altura_sprite_olho,zoiox[1],zoioy[1],0);
}

if (zoiovive[2])
{
      al_draw_bitmap_region(ZOIO,regiao_x_folha_olho,regiao_y_folha_olho,largura_sprite_olho, altura_sprite_olho,zoiox[2],zoioy[2],0);
}

     if(!Ebola)
    {
         al_draw_bitmap_region(BOLA,76,0,152,76, posx, posy, 0);
    }
    if(zombie1vive)
    {
        al_draw_bitmap_region(ZOMBIE,regiao_x_folha_zombie[0],regiao_y_folha_zombie[0], largura_sprite_zombie, altura_sprite_zombie, zombiex[0],zombiey[0], NULL);
    }
    if(zombie3vive)
    {
       al_draw_bitmap_region(ZOMBIE3,regiao_x_folha_zombie[2],regiao_y_folha_zombie[2], largura_sprite_zombie, altura_sprite_zombie, zombiex[2],zombiey[2], NULL);
    }
     if (cruz)
    {
       al_draw_bitmap(CRUZ,cruzx,cruzy,NULL);
    }
      if (oracao)
    {

        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[1],regiao_y_folha_oracao[1],largura_sprite_oracao[1], altura_sprite_oracao[1], x+15, y+15, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[2],regiao_y_folha_oracao[2],largura_sprite_oracao[2], altura_sprite_oracao[2], x-30, y+30, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[3],regiao_y_folha_oracao[3],largura_sprite_oracao[3], altura_sprite_oracao[3], x-70, y, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[4],regiao_y_folha_oracao[4],largura_sprite_oracao[4], altura_sprite_oracao[4], x-70, y-45, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[5],regiao_y_folha_oracao[5],largura_sprite_oracao[5], altura_sprite_oracao[5], x+15, y-45, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[6],regiao_y_folha_oracao[6],largura_sprite_oracao[6], altura_sprite_oracao[6], x-30,y-60,NULL);

    }
    al_draw_bitmap_region(HIKARI,regiao_x_folha_hikari, regiao_y_folha_hikari,largura_sprite_hikari, altura_sprite_hikari,hikarix,hikariy,NULL);
    al_draw_bitmap_region(PLANTA, regiao_x_folha_planta, regiao_y_folha_planta, largura_sprite_planta, altura_sprite_planta, 500,481,NULL);
    al_draw_bitmap_region(PLANTA, regiao_x_folha_planta, regiao_y_folha_planta, largura_sprite_planta, altura_sprite_planta, 515,480,NULL);
    al_draw_bitmap_region(PLANTA, regiao_x_folha_planta, regiao_y_folha_planta, largura_sprite_planta, altura_sprite_planta, 530,478,NULL);
    al_draw_bitmap_region(PLANTA, regiao_x_folha_planta, regiao_y_folha_planta, largura_sprite_planta, altura_sprite_planta, 545,479,NULL);
    al_draw_bitmap_region(PLANTA, regiao_x_folha_planta, regiao_y_folha_planta, largura_sprite_planta, altura_sprite_planta, 560,480,NULL);
    al_draw_bitmap_region(PLANTA, regiao_x_folha_planta, regiao_y_folha_planta, largura_sprite_planta, altura_sprite_planta, 575,483,NULL);
    al_draw_bitmap_region(PLANTA, regiao_x_folha_planta, regiao_y_folha_planta, largura_sprite_planta, altura_sprite_planta, 590,481,NULL);
    al_draw_bitmap(KINOKO,250,450,NULL);
    al_draw_bitmap(KINOKO,350,450,NULL);
    al_draw_bitmap(GRAMA,700,460,NULL);
    al_draw_bitmap(GRAMA2,720,455,NULL);
    al_draw_bitmap(GRAMA,740,460,NULL);
    al_draw_bitmap(GRAMA,760,460,NULL);
    al_draw_bitmap(GRAMA,1220,460,NULL);
    al_draw_bitmap(GRAMA2,1220,455,NULL);
    al_draw_bitmap(GRAMA,1240,460,NULL);
    al_draw_bitmap(GRAMA,1260,460,NULL);
    al_draw_bitmap(GRAMA2,1280,455,NULL);
    al_draw_bitmap(GRAMA,1300,460,NULL);
    al_draw_bitmap(GRAMA,1320,460,NULL);
    al_draw_bitmap(GRAMA,1340,460,NULL);
    al_draw_bitmap(GRAMA,1360,460,NULL);
    al_draw_bitmap(GRAMA,1380,460,NULL);
    al_draw_bitmap(GRAMA,1400,460,NULL);
    al_draw_bitmap(GRAMA2,1420,455,NULL);
    al_draw_bitmap(GRAMA,1440,460,NULL);
    al_draw_bitmap(GRAMA3,2600,410,NULL);
    al_draw_bitmap(GRAMA2,1420,455,NULL);
    al_draw_bitmap(GRAMA3,2640,410,NULL);
    al_draw_bitmap(GRAMA3,2680,410,NULL);
    al_draw_bitmap(GRAMA2,2690,455,NULL);
    al_draw_bitmap(GRAMA3,2720,410,NULL);
    al_draw_bitmap(GRAMA3,2760,410,NULL);
    al_draw_bitmap(GRAMA3,2800,410,NULL);
    al_draw_bitmap(GRAMA3,2840,410,NULL);
    al_draw_bitmap(GRAMA2,2850,455,NULL);
    al_draw_bitmap(GRAMA3,2880,410,NULL);
    al_draw_bitmap(GRAMA2,2890,455,NULL);
    al_draw_bitmap(GRAMA3,2920,410,NULL);
    al_draw_bitmap(GRAMA3,2960,410,NULL);
    al_draw_bitmap(GRAMA3,3000,410,NULL);
    al_draw_bitmap(GRAMA3,3040,410,NULL);
    al_draw_bitmap(GRAMA3,3080,410,NULL);

    if (cont_frames_socorro < 600)
    {
        al_draw_bitmap(MENSAGEMITEM, 2300, 380,NULL);
        al_draw_text(font,al_map_rgb(255,255,255),2565,400,ALLEGRO_ALIGN_CENTRE,"SOCORRO!!");
    }
      if (fala3_1)
    {
        al_draw_bitmap(MENSAGEMHIKARI, 2300, 380,NULL);
        al_draw_text(font2,al_map_rgb(255,255,255),2395,385,ALLEGRO_ALIGN_LEFT,"Nossa! Essa foi por pouco.");
        al_draw_text(font2,al_map_rgb(255,255,255),2380,400,ALLEGRO_ALIGN_LEFT,"Muito prazer, meu nome e Hikari");
        al_draw_text(font2,al_map_rgb(255,255,255),2380,415,ALLEGRO_ALIGN_LEFT,"sou um espirito de luz poderoso.");
    }
      if (fala3_2)
    {
        al_draw_bitmap(FALA4, 2300, 380,NULL);
        al_draw_text(font2,al_map_rgb(255,255,255),2395,385,ALLEGRO_ALIGN_LEFT," Se  e  tao  poderoso  assim");
        al_draw_text(font2,al_map_rgb(255,255,255),2380,400,ALLEGRO_ALIGN_LEFT,"por que nao acabou com aqueles");
        al_draw_text(font2,al_map_rgb(255,255,255),2380,415,ALLEGRO_ALIGN_LEFT,"olhos sozinho?.");
    }
      if (fala3_3)
    {
        al_draw_bitmap(MENSAGEMHIKARI, 2300, 380,NULL);
        al_draw_text(font2,al_map_rgb(255,255,255),2395,385,ALLEGRO_ALIGN_LEFT,"Nos espiritos so podemos usar");
        al_draw_text(font2,al_map_rgb(255,255,255),2380,400,ALLEGRO_ALIGN_LEFT,"nossa  magia  para  proteger ");
        al_draw_text(font2,al_map_rgb(255,255,255),2380,415,ALLEGRO_ALIGN_LEFT,"aliados. E como voce me salvou,");
        al_draw_text(font2,al_map_rgb(255,255,255),2380,430,ALLEGRO_ALIGN_LEFT,"agora serei sua protetora.");
    }
    if (fala3_4)
    {
        al_draw_bitmap(FALA1, 2300, 380,NULL);
        al_draw_text(font2,al_map_rgb(255,255,255),2395,385,ALLEGRO_ALIGN_LEFT,"Uhnn... Quem sabe ela possa");
        al_draw_text(font2,al_map_rgb(255,255,255),2380,400,ALLEGRO_ALIGN_LEFT,"me  ajudar  a  chegar  na  ilha");
        al_draw_text(font2,al_map_rgb(255,255,255),2380,415,ALLEGRO_ALIGN_LEFT,"ao lest.");
    }
     if (fala3_5)
    {
        al_draw_bitmap(FALA2, 2300, 380,NULL);
        al_draw_text(font2,al_map_rgb(255,255,255),2392,385,ALLEGRO_ALIGN_LEFT,"Muito bem Hikari, eu aceitarei");
        al_draw_text(font2,al_map_rgb(255,255,255),2375,400,ALLEGRO_ALIGN_LEFT,"sua ajuda. Meu nome e Claudio");
        al_draw_text(font2,al_map_rgb(255,255,255),2375,415,ALLEGRO_ALIGN_LEFT,"e estou procurando por minha esposa.");
    }
      if (fala3_6)
    {
        al_draw_bitmap(FALA2, 2300, 380,NULL);
        al_draw_text(font2,al_map_rgb(255,255,255),2392,385,ALLEGRO_ALIGN_LEFT,"Ha indicios de que ela possa ter ");
        al_draw_text(font2,al_map_rgb(255,255,255),2375,400,ALLEGRO_ALIGN_LEFT,"sido levada para a ilha ao lest.");
        al_draw_text(font2,al_map_rgb(255,255,255),2375,415,ALLEGRO_ALIGN_LEFT,"voce  sabe  como  podemos  ");
        al_draw_text(font2,al_map_rgb(255,255,255),2375,430,ALLEGRO_ALIGN_LEFT,"chegar ate la? ");
    }
      if (fala3_7)
    {
        al_draw_bitmap(MENSAGEMHIKARI, 2300, 380,NULL);
        al_draw_text(font2,al_map_rgb(255,255,255),2392,385,ALLEGRO_ALIGN_LEFT,"Com  toda  certeza  mestre");
        al_draw_text(font2,al_map_rgb(255,255,255),2377,400,ALLEGRO_ALIGN_LEFT,"Claudio. Vamos ate meu barco e");
        al_draw_text(font2,al_map_rgb(255,255,255),2377,415,ALLEGRO_ALIGN_LEFT,"de la partimos");
    }
   if (fala3_8)
    {
        al_draw_bitmap(MENSAGEMITEM, 2300, 380,NULL);
        al_draw_text(font2,al_map_rgb(255,255,255),2392,410,ALLEGRO_ALIGN_LEFT,"Hikari juntou-se ao grupo.");

    }
    if (morte)
{
    al_clear_to_color(al_map_rgb(0,0,0));
    al_draw_bitmap(morto,x,y,NULL);
    al_draw_textf(font2,al_map_rgb(255,255,255),120,10,ALLEGRO_ALIGN_CENTER, "X %i ", cont_vidas);
    al_draw_bitmap_region(keen,5,300,21,21,80,8,0);
    al_flip_display();

}
    al_draw_bitmap_region(HP,regiao_x_folha_HP,regiao_y_folha_HP,largura_sprite_HP,altura_sprite_HP,cameraPosition[0]+50,cameraPosition[1]+30,NULL);
    al_draw_bitmap_region(MP,regiao_x_folha_MP,regiao_y_folha_MP,largura_sprite_MP,altura_sprite_MP,cameraPosition[0]+50,cameraPosition[1]+60,NULL);
    al_draw_tinted_bitmap(FADE,al_map_rgba(0,0,0,fading1),2*al_get_bitmap_width(FADE),0,NULL);
    al_draw_tinted_bitmap(FADE,al_map_rgba(0,0,0,fading1),al_get_bitmap_width(FADE),0,NULL);
    al_flip_display();
    al_clear_to_color(al_map_rgb(0,0,0));

}
}


while(!boat)
{
ALLEGRO_EVENT events;
al_wait_for_event(event_queue, &events);
al_get_keyboard_state(&keyState);
cameraUpdate(cameraPosition,x,y,35,200);
al_identity_transform(&camera);
al_translate_transform(&camera, -cameraPosition[0],-cameraPosition[1]);
al_use_transform(&camera);

 if(events.type == ALLEGRO_EVENT_KEY_UP && !historia)
    {

        switch (events.keyboard.keycode)
        {
        case ALLEGRO_KEY_Z:
        dir = 0;
        }
    }

     if(events.type == ALLEGRO_EVENT_KEY_DOWN)
    {
    switch (events.keyboard.keycode)
        {
        case ALLEGRO_KEY_ESCAPE:
            boat = true;
        }
    }


    if(events.type == ALLEGRO_EVENT_KEY_DOWN && !historia)
    {
        switch (events.keyboard.keycode)
        {
        case ALLEGRO_KEY_ESCAPE:
            boat = true;
        case ALLEGRO_KEY_S:
           if(pegou)
           {
            cruz = true;
            cruzx = x;
            cruzy = y;
            pegou = false;
           }
        }
        switch (events.keyboard.keycode)
      {
          case ALLEGRO_KEY_SPACE:
          if(jump)
          {
          vely -= jumpspeed;
          pulo = true;
          }
      }
       switch (events.keyboard.keycode)
        {
        case ALLEGRO_KEY_C:
            if (x>=0 && x<=300)
            {
                fala4_1 = true;
                historia = true;
                mocavamp1x = 800;
                break;
            }
            case ALLEGRO_KEY_ENTER:
             if(fala4_1)
             {
                 fala4_1 = false;
                 cutscene1 = true;
                 break;
             }

    }
    }
    if(events.type == ALLEGRO_EVENT_KEY_UP && !historia)
    {
        switch (events.keyboard.keycode)
        {
        case ALLEGRO_KEY_X:
            tiro = true;

        }
    }
    else if (events.type == ALLEGRO_EVENT_TIMER)
    {

        if(events.timer.source == timer)
        {
            active = true;
            draw = true;
            jump = false;
            noar = true;
            vely +=gravity;
            y += vely;

    if(noar)
            {
                pulo=true;
            }
            if(y>=470)
                {
                y = 470;
                vely = 0;
                pulo = false;
                jump = true;
                noar = false;
                }

            if(!tiro)
            {
                posx_tiro =x+al_get_bitmap_width(keen)/4;
                posy_tiro =y;
            }

            if(posx_tiro>=800)
            {
                tiro = false;
            }

            fading1 -=5;
            if(fading1<=0)
            {
                fading1 = 0;
            }

        cont_frames_pulo++;
        cont_frames_tiro++;


            if (cont_frames_pulo >= frames_sprite_pulo)
            {
                cont_frames_pulo=0;
                coluna_atual_pulo++;

                if (coluna_atual_pulo >= colunas_pulo)
                {
                    coluna_atual_pulo=0;
                    regiao_y_folha_pulo = linha_atual_pulo * altura_sprite_pulo;
                }

                    regiao_x_folha_pulo = coluna_atual_pulo * largura_sprite_pulo;
            }

            if(cont_frames_tiro>=frames_sprite_tiro && tiro)
            {
                cont_frames_tiro = 0;
                coluna_atual_tiro++;

                if(coluna_atual_tiro>=colunas_tiro)
                {
                    coluna_atual_tiro = 0;
                    regiao_y_tiro = 0;
                }

                regiao_x_tiro = coluna_atual_tiro*largura_sprite_tiro;
                posx_tiro += velx_tiro;
                posy_tiro +=0;
            }

          if(al_key_down(&keyState,ALLEGRO_KEY_RIGHT) && !historia)
            {
                if(x>=150)
                {
                    x -= movespeed;
                }

                x += movespeed;
                dir = RIGHT;

            }

 else if(al_key_down(&keyState,ALLEGRO_KEY_LEFT) && !historia)
            {

                if (x<=0 || x >=950 && x<=1051 && y>=370)
                {
                    x +=movespeed;
                }

                x -= movespeed;
                dir = LEFT;
            }

            else if(al_key_down(&keyState,ALLEGRO_KEY_UP) && !historia)
            {
                dir = UP;
                velx = 0;
            }
            else if(al_key_down(&keyState,ALLEGRO_KEY_DOWN) && !historia)
            {
                dir = DOWN;
                velx = 0;
            }
               else if(al_key_down(&keyState,ALLEGRO_KEY_C) && x>=cruzx-30 && x<=cruzx+30 && !historia)
            {
                    cruz = false;
                    pegou = true;
            }

            else if(al_key_down(&keyState,ALLEGRO_KEY_Z) && x >= cruzx-20 && x<= cruzx+30 && y >= cruzy-20 && y<= cruzy+30 && coluna_atual_MP>2 && !historia)
                    {
                        oracao = true;
                        dir = 5;
                        cont_frames_MP++;
                        if (cont_frames_MP>=15)
                        {
                            cont_frames_MP = 0;
                            coluna_atual_MP--;
                        }

                    }

             else
            {
                velx = 0;
                active = false;
                oracao = false;
                dir = 3;
                historia = false;
            }

           if (oracao)
           {
               vuneravel = false;
           }

           largura_sprite_HP = 9*coluna_atual_HP;
           largura_sprite_MP = 9*coluna_atual_MP;

            if (cutscene2)
            {
                 cont_frames_vampmoca1++;
         if (cont_frames_vampmoca1 >= frames_sprite_vampmoca1 + 10)
        {
            cont_frames_vampmoca1=0;
            coluna_atual_vampmoca1++;

                if (coluna_atual_vampmoca1 >= colunas_vampmoca1)
                {
                    coluna_atual_vampmoca1 = 0;

                }
                    regiao_x_folha_vampmoca1 = coluna_atual_vampmoca1 * largura_sprite_vampmoca1;
                    regiao_y_folha_vampmoca1 = 200;
if (cont_frames_cutscene2>=100)
{
    mocavamp1x +=velvamp2;
}
        }
        }
            if(active)
            {
                sourceX += al_get_bitmap_width(keen)/5;
            }

            else
            {
                sourceX = 0;
            }

            if(sourceX>=al_get_bitmap_width(keen))
            {
                sourceX = 0;
            }

    sourceY = dir;

        }

           else if(events.timer.source == BOLAtimer)
{
    fogx += velfog;

    if(fogx >=1024)
    {
        fogx = 0;
    }

    if (!cutscene1)
    {
        regiao_y_folha_hikari = 3*altura_sprite_hikari;
    }

if(cutscene1)
{
     cont_frames_hikari++;

              if (cont_frames_hikari>= frames_sprite_hikari + 12)
            {
                cont_frames_hikari = 0;
                coluna_atual_hikari++;

                if (coluna_atual_hikari >= colunas_hikari)
                {
                    coluna_atual_hikari = 0;
                }

                regiao_x_folha_hikari = coluna_atual_hikari * largura_sprite_hikari;
                regiao_y_folha_hikari = 1 * altura_sprite_hikari;
            }

    cont_passos_hikari++;

        if(cont_passos_hikari > 0 && cont_passos_hikari < 360)
        {
            hikarix += velhikari;
        }
        if(cont_passos_hikari > 360)
        {
            cutscene1 = false;
            historia = false;
        }


}

if (x>=150 && hikarix >=180)
{
    cutscene2 = true;
}

if (cutscene2)
{
    boatx += velboat;
    hikarix +=velboat;
    x += velboat;
    historia = true;
    templox += veltemplo;

    if (x>=3000)
    {
        x = x - 1800;
        boatx = boatx -1800;
        templox -= 1800;
        hikarix = hikarix - 1800;
        mocavamp1x = x + 200;
        fogx = fogx - 1800;
    }

    cont_frames_cutscene2++;

    if(cont_frames_cutscene2 >= 300 + 2200)
    {
        fala4_2 = true;
    }
    if (cont_frames_cutscene2 >= 500 + 2200)
    {
        fala4_2 = false;
    }
     if(cont_frames_cutscene2 >= 600 + 2200 && cont_frames_cutscene2 <= 900 + 2200)
    {
        fala4_3 = true;
    }
    if (cont_frames_cutscene2 >= 900 + 2200)
    {
        fala4_3 = false;
    }
    if(cont_frames_cutscene2 >= 900+200 + 2200 && cont_frames_cutscene2 <= 1400+200 + 2200)
    {
        fala4_4 = true;
    }
    if (cont_frames_cutscene2 >= 1400+200 + 2200)
    {
        fala4_4 = false;
    }
     if(cont_frames_cutscene2 >= 1400+400 + 2200 && cont_frames_cutscene2 <= 1900+400 + 2200)
    {
        fala4_5 = true;
    }
    if (cont_frames_cutscene2 >= 1900+400+2200)
    {
        fala4_5 = false;
    }
      if(cont_frames_cutscene2 >= 1900+600 + 2200 && cont_frames_cutscene2 <= 2400+600 + 2200)
    {
        fala4_6 = true;
    }
    if (cont_frames_cutscene2 >=2400+600+2200)
    {
        fala4_6 = false;
    }

      if(cont_frames_cutscene2 >= 2400+800 + 2200 && cont_frames_cutscene2 <= 2900+800 + 2200)
    {
        fala4_7 = true;
    }
    if (cont_frames_cutscene2 >= 2900+800+2200)
    {
        fala4_7 = false;
    }

      if(cont_frames_cutscene2 >= 2900+1000 + 2200 && cont_frames_cutscene2 <= 3400+1000 + 2200)
    {
        fala4_8 = true;
    }
    if (cont_frames_cutscene2 >= 3400+1000+2200)
    {
        fala4_8 = false;
    }

      if(cont_frames_cutscene2 >= 3400+1200 + 2200 && cont_frames_cutscene2 <= 3700+1200 + 2200)
    {
        fala4_9 = true;
    }
    if (cont_frames_cutscene2 >= 3700+1200+2200)
    {
        fala4_9 = false;
    }

      if(cont_frames_cutscene2 >= 3700+1400 + 2200 && cont_frames_cutscene2 <= 4000+1400 + 2200)
    {
        fala4_10 = true;
    }
    if (cont_frames_cutscene2 >= 4000+1400+2200)
    {
        fala4_10 = false;
        fading++;

  if(fading >=255)
    {
        fading = 255;
        boat = true;
        cameraUpdate(cameraPosition,x,y,-4500,-110);
        al_identity_transform(&camera);
        al_translate_transform(&camera, -cameraPosition[0],-cameraPosition[1]);
        al_use_transform(&camera);
        x = 0;
        hikarix = x - 20;
        hikariy = y;
        fading = 0;
        fading1 = 255;
        ilha = false;
    }
    }
  }



            cont_frames_oracao[1]++;
            cont_frames_oracao[2]++;
            cont_frames_oracao[3]++;
            cont_frames_oracao[4]++;
            cont_frames_oracao[5]++;
            cont_frames_oracao[6]++;

             if (cont_frames_oracao[1] >= frames_sprite_oracao[1])
            {
                cont_frames_oracao[1] = 0;
                coluna_atual_oracao[1]++;

                if (coluna_atual_oracao[1] >= colunas_oracao[1])
                {
                    coluna_atual_oracao[1] = 0;
                    linha_atual_oracao[1]++;

                }
                if (linha_atual_oracao[1] > linhas_oracao[1])

                {
                    linha_atual_oracao[1] = 0;

                }
                regiao_x_folha_oracao[1] = coluna_atual_oracao[1] * largura_sprite_oracao[1];
                regiao_y_folha_oracao[1] = linha_atual_oracao[1] * altura_sprite_oracao[1];
            }
             if (cont_frames_oracao[2] >= frames_sprite_oracao[2])
             {
                 cont_frames_oracao[2] = 0;
                 coluna_atual_oracao[2]++;

                 if (coluna_atual_oracao[2] >= colunas_oracao[2])
                 {
                     coluna_atual_oracao[2] = 0;
                     linha_atual_oracao[2]++;

                 }
                  if (linha_atual_oracao[2] > linhas_oracao[2])
                  {
                       linha_atual_oracao[2] = 0;
                  }
                  regiao_x_folha_oracao[2] = coluna_atual_oracao[2] * largura_sprite_oracao[2];
                  regiao_y_folha_oracao[2] = linha_atual_oracao[2] * altura_sprite_oracao[2];
             }
             if (cont_frames_oracao[3] >= frames_sprite_oracao[3])
            {
                cont_frames_oracao[3] = 0;
                coluna_atual_oracao[3]++;

                if (coluna_atual_oracao[3] >= colunas_oracao[3])
                {
                    coluna_atual_oracao[3] = 0;
                    linha_atual_oracao[3]++;

                }
                if (linha_atual_oracao[3] > linhas_oracao[3])

                {
                    linha_atual_oracao[3] = 0;

                }
                regiao_x_folha_oracao[3] = coluna_atual_oracao[3] * largura_sprite_oracao[3];
                regiao_y_folha_oracao[3] = linha_atual_oracao[3] * altura_sprite_oracao[3];
            }
            if (cont_frames_oracao[4] >= frames_sprite_oracao[4])
            {
                cont_frames_oracao[4] = 0;
                coluna_atual_oracao[4]++;

                if (coluna_atual_oracao[4] >= colunas_oracao[4])
                {
                    coluna_atual_oracao[4] = 0;
                    linha_atual_oracao[4]++;

                }
                if (linha_atual_oracao[4] > linhas_oracao[4])

                {
                    linha_atual_oracao[4] = 0;

                }
                regiao_x_folha_oracao[4] = coluna_atual_oracao[4] * largura_sprite_oracao[4];
                regiao_y_folha_oracao[4] = linha_atual_oracao[4] * altura_sprite_oracao[4];
            }
            if (cont_frames_oracao[5] >= frames_sprite_oracao[5])
            {
                cont_frames_oracao[5] = 0;
                coluna_atual_oracao[5]++;

                if (coluna_atual_oracao[5] >= colunas_oracao[5])
                {
                    coluna_atual_oracao[5] = 0;
                    linha_atual_oracao[5]++;

                }
                if (linha_atual_oracao[5] > linhas_oracao[5])

                {
                    linha_atual_oracao[5] = 0;

                }
                regiao_x_folha_oracao[5] = coluna_atual_oracao[5] * largura_sprite_oracao[5];
                regiao_y_folha_oracao[5] = linha_atual_oracao[5] * altura_sprite_oracao[5];
            }

             if (cont_frames_oracao[6] >= frames_sprite_oracao[6])
            {
                cont_frames_oracao[6] = 0;
                coluna_atual_oracao[6]++;

                if (coluna_atual_oracao[6] >= colunas_oracao[6])
                {
                    coluna_atual_oracao[6] = 0;
                    linha_atual_oracao[6]++;

                }
                if (linha_atual_oracao[6] > linhas_oracao[6])

                {
                    linha_atual_oracao[6] = 0;

                }
                regiao_x_folha_oracao[6] = coluna_atual_oracao[6] * largura_sprite_oracao[6];
                regiao_y_folha_oracao[6] = linha_atual_oracao[6] * altura_sprite_oracao[6];
            }
}
}


if(draw)

{

    al_draw_bitmap(CLIF,0,450,NULL);
    al_draw_bitmap(YUYA2,templox,-200,NULL);
    al_draw_bitmap(GRAMA2,190,410,NULL);
    al_draw_bitmap(GRAMA2,250,410,NULL);
    al_draw_bitmap(BOAT,boatx,boaty,NULL);
if (pulo)
    {
        al_draw_bitmap_region(keen,regiao_x_folha_pulo,regiao_y_folha_pulo,largura_sprite_pulo,altura_sprite_pulo,x,y,0);
    }
        if(!tiro && !pulo)
        {
            al_draw_bitmap_region(keen,sourceX,sourceY*al_get_bitmap_height(keen)/7,30,50,x,y,NULL);
        }
        if(tiro)
        {
            if(!pulo)
            {
                al_draw_bitmap_region(keen,sourceX,RIGHT*al_get_bitmap_height(keen)/7,30,50,x,y,NULL);
               al_draw_bitmap_region(ATIRA,0,0,40,50,x,y,NULL);
            }
            al_draw_bitmap_region(TIRO,regiao_x_tiro,0,largura_sprite_tiro,altura_sprite_tiro,posx_tiro,posy_tiro+10,0);
        }

 if (cruz)
    {
       al_draw_bitmap(CRUZ,cruzx,cruzy,NULL);
    }
      if (oracao)
    {

        al_draw_bitmap(ESCUDO,x-113,y-130,NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[1],regiao_y_folha_oracao[1],largura_sprite_oracao[1], altura_sprite_oracao[1], x+15, y+15, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[2],regiao_y_folha_oracao[2],largura_sprite_oracao[2], altura_sprite_oracao[2], x-30, y+30, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[3],regiao_y_folha_oracao[3],largura_sprite_oracao[3], altura_sprite_oracao[3], x-70, y, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[4],regiao_y_folha_oracao[4],largura_sprite_oracao[4], altura_sprite_oracao[4], x-70, y-45, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[5],regiao_y_folha_oracao[5],largura_sprite_oracao[5], altura_sprite_oracao[5], x+15, y-45, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[6],regiao_y_folha_oracao[6],largura_sprite_oracao[6], altura_sprite_oracao[6], x-30,y-60,NULL);

    }
    al_draw_bitmap_region(HIKARI,regiao_x_folha_hikari, regiao_y_folha_hikari,largura_sprite_hikari, altura_sprite_hikari,hikarix,hikariy,NULL);
    al_draw_bitmap(GRAMA,0,460,NULL);
    al_draw_bitmap(GRAMA2,5,400,NULL);
    al_draw_bitmap(GRAMA,10,470,NULL);
    al_draw_bitmap(GRAMA,15,470,NULL);
    al_draw_bitmap(GRAMA,20,470,NULL);
    al_draw_bitmap(GRAMA2,25,400,NULL);
    al_draw_bitmap(GRAMA,30,460,NULL);
    al_draw_bitmap(GRAMA,35,460,NULL);
    al_draw_bitmap(GRAMA2,40,400,NULL);
    al_draw_bitmap(GRAMA,45,460,NULL);
    al_draw_bitmap(GRAMA,50,460,NULL);
    al_draw_bitmap(GRAMA,55,460,NULL);
    al_draw_bitmap(GRAMA,60,460,NULL);
    al_draw_bitmap(GRAMA,65,460,NULL);
    al_draw_bitmap(GRAMA,70,470,NULL);
    al_draw_bitmap(GRAMA2,200,400,NULL);
    al_draw_bitmap(GRAMA,80,470,NULL);
    al_draw_bitmap(GRAMA2,350,470,NULL);
    al_draw_bitmap(GRAMA2,550,400,NULL);
    al_draw_bitmap(GRAMA2,620,495,NULL);
    al_draw_bitmap(GRAMA2,750,400,NULL);
    al_draw_bitmap(GRAMA2,800,490,NULL);
    al_draw_bitmap(GRAMA2,950,400,NULL);
    al_draw_bitmap(GRAMA2,1100,495,NULL);
    al_draw_bitmap(GRAMA2,1200,400,NULL);
    al_draw_bitmap(GRAMA2,1300,400,NULL);
    al_draw_bitmap(GRAMA2,1350,490,NULL);
    al_draw_bitmap(GRAMA2,1450,490,NULL);
    al_draw_bitmap(GRAMA2,550,490,NULL);
    al_draw_bitmap(GRAMA2,1550,495,NULL);
    al_draw_bitmap(GRAMA2,650,495,NULL);
    al_draw_bitmap(GRAMA2,1650,400,NULL);
    al_draw_bitmap(GRAMA2,750,400,NULL);
    al_draw_bitmap(GRAMA2,1700,490,NULL);
    al_draw_bitmap(GRAMA2,800,490,NULL);
    al_draw_bitmap(GRAMA2,1850,400,NULL);
    al_draw_bitmap(GRAMA2,950,400,NULL);
    al_draw_bitmap(GRAMA2,2000,495,NULL);
    al_draw_bitmap(GRAMA2,2900,495,NULL);
    al_draw_bitmap(GRAMA2,2100,400,NULL);
    al_draw_bitmap(GRAMA2,3000,400,NULL);
    al_draw_bitmap(GRAMA2,2250,490,NULL);
    al_draw_bitmap(GRAMA2,3150,490,NULL);
    al_draw_bitmap(GRAMA2,2200,400,NULL);
    al_draw_bitmap(GRAMA2,3100,400,NULL);
    al_draw_bitmap(GRAMA2,2350,490,NULL);
    al_draw_bitmap(GRAMA2,3250,490,NULL);
    al_draw_bitmap(GRAMA2,2450,400,NULL);
    al_draw_bitmap(GRAMA2,3350,400,NULL);
    al_draw_bitmap_region(VAMPMOCA1,regiao_x_folha_vampmoca1,75,largura_sprite_vampmoca1, altura_sprite_vampmoca1,mocavamp1x+1500,500,NULL);
    al_draw_bitmap_region(VAMPMOCA1,regiao_x_folha_vampmoca1,75,largura_sprite_vampmoca1, altura_sprite_vampmoca1,mocavamp1x+600,400,NULL);
    al_draw_bitmap_region(VAMPIRA,50,70,largura_sprite_vampmoca1,altura_sprite_vampmoca1,mocavamp1x+300,500,NULL);
    al_draw_bitmap(FOG,fogx,100,NULL);
    al_draw_bitmap(FOG,fogx+1024,100,NULL);
    al_draw_bitmap(FOG,fogx+2048,100,NULL);
    al_draw_bitmap(FOG,fogx+3072,100,NULL);
    al_draw_bitmap(FOG,fogx-1024,100,NULL);
    if(fala4_1)
    {
        al_draw_bitmap(MENSAGEMHIKARI,0,380,NULL);
         al_draw_text(font2,al_map_rgb(255,255,255),80,385,ALLEGRO_ALIGN_LEFT,"O caminho ate a proxima ilha e");
         al_draw_text(font2,al_map_rgb(255,255,255),80,400,ALLEGRO_ALIGN_LEFT,"longo, vamos nos apressar antes");
         al_draw_text(font2,al_map_rgb(255,255,255),80,415,ALLEGRO_ALIGN_LEFT,"que os espiritos comessem a");
         al_draw_text(font2,al_map_rgb(255,255,255),80,430,ALLEGRO_ALIGN_LEFT,"vagar pelas aguas.");
    }
    if(fala4_2)
    {
        al_draw_bitmap(FALA1,cameraPosition[0]+300,cameraPosition[1]+380,NULL);
        al_draw_text(font2,al_map_rgb(255,255,255),cameraPosition[0]+370,cameraPosition[1]+410,ALLEGRO_ALIGN_LEFT,"Para onde eles estao indo?");
    }
    if(fala4_3)
    {
        al_draw_bitmap(MENSAGEMHIKARI,cameraPosition[0]+300,cameraPosition[1]+380,NULL);
        al_draw_text(font2,al_map_rgb(255,255,255),cameraPosition[0]+380,cameraPosition[1]+395,ALLEGRO_ALIGN_LEFT,"Voce nunca ouviu falar sobre");
        al_draw_text(font2,al_map_rgb(255,255,255),cameraPosition[0]+380,cameraPosition[1]+410,ALLEGRO_ALIGN_LEFT,"o ritual dos 2mil anos?");

    }
    if(fala4_4)
    {
       al_draw_bitmap(FALA4,cameraPosition[0]+300,cameraPosition[1]+380,NULL);
        al_draw_text(font2,al_map_rgb(255,255,255),cameraPosition[0]+370,cameraPosition[1]+385,ALLEGRO_ALIGN_LEFT,"Uma vez uma velha me contou");
        al_draw_text(font2,al_map_rgb(255,255,255),cameraPosition[0]+370,cameraPosition[1]+400,ALLEGRO_ALIGN_LEFT,"uma historia antiga sobre");
        al_draw_text(font2,al_map_rgb(255,255,255),cameraPosition[0]+370,cameraPosition[1]+415,ALLEGRO_ALIGN_LEFT,"um ritual, mas eu nao");
        al_draw_text(font2,al_map_rgb(255,255,255),cameraPosition[0]+370,cameraPosition[1]+430,ALLEGRO_ALIGN_LEFT,"me recordo mais.");
    }
     if(fala4_5)
    {
        al_draw_bitmap(MENSAGEMHIKARI,cameraPosition[0]+300,cameraPosition[1]+380,NULL);
        al_draw_text(font2,al_map_rgb(255,255,255),cameraPosition[0]+370,cameraPosition[1]+385,ALLEGRO_ALIGN_LEFT,"A cada 2mil anos eles se");
        al_draw_text(font2,al_map_rgb(255,255,255),cameraPosition[0]+370,cameraPosition[1]+400,ALLEGRO_ALIGN_LEFT,"reunem na ilha ao leste e");
        al_draw_text(font2,al_map_rgb(255,255,255),cameraPosition[0]+370,cameraPosition[1]+415,ALLEGRO_ALIGN_LEFT,"oferecem a vida de um inocente");
        al_draw_text(font2,al_map_rgb(255,255,255),cameraPosition[0]+370,cameraPosition[1]+430,ALLEGRO_ALIGN_LEFT,"ao demonio.");
    }
     if(fala4_6)
    {
       al_draw_bitmap(MENSAGEMHIKARI,cameraPosition[0]+300,cameraPosition[1]+380,NULL);
        al_draw_text(font2,al_map_rgb(255,255,255),cameraPosition[0]+370,cameraPosition[1]+385,ALLEGRO_ALIGN_LEFT,"Os espiritos acreditam que");
        al_draw_text(font2,al_map_rgb(255,255,255),cameraPosition[0]+370,cameraPosition[1]+400,ALLEGRO_ALIGN_LEFT,"sacrificando essa vida");
        al_draw_text(font2,al_map_rgb(255,255,255),cameraPosition[0]+370,cameraPosition[1]+415,ALLEGRO_ALIGN_LEFT,"eles poderao trazer de volta");
        al_draw_text(font2,al_map_rgb(255,255,255),cameraPosition[0]+370,cameraPosition[1]+430,ALLEGRO_ALIGN_LEFT,"uma das Potestades malignas.");
    }
     if(fala4_7)
    {
       al_draw_bitmap(FALA5,cameraPosition[0]+300,cameraPosition[1]+380,NULL);
        al_draw_text(font2,al_map_rgb(255,255,255),cameraPosition[0]+370,cameraPosition[1]+400,ALLEGRO_ALIGN_LEFT,"Voce acha que essa inocente");
        al_draw_text(font2,al_map_rgb(255,255,255),cameraPosition[0]+370,cameraPosition[1]+415,ALLEGRO_ALIGN_LEFT,"pode ser minha esposa?");
    }
     if(fala4_8)
    {
       al_draw_bitmap(MENSAGEMHIKARI,cameraPosition[0]+300,cameraPosition[1]+380,NULL);
        al_draw_text(font2,al_map_rgb(255,255,255),cameraPosition[0]+380,cameraPosition[1]+385,ALLEGRO_ALIGN_LEFT,"Nao pense muito sobre isso");
        al_draw_text(font2,al_map_rgb(255,255,255),cameraPosition[0]+380,cameraPosition[1]+400,ALLEGRO_ALIGN_LEFT,"Claudio.  Em  breve  nos  a");
        al_draw_text(font2,al_map_rgb(255,255,255),cameraPosition[0]+380,cameraPosition[1]+415,ALLEGRO_ALIGN_LEFT,"encontraremos.");

    }
     if(fala4_9)
    {
       al_draw_bitmap(FALA5,cameraPosition[0]+300,cameraPosition[1]+380,NULL);

        al_draw_text(font2,al_map_rgb(255,255,255),cameraPosition[0]+370,cameraPosition[1]+410,ALLEGRO_ALIGN_LEFT,"So espero que ela esteja bem");

    }
     if(fala4_10)
    {
       al_draw_bitmap(MENSAGEMHIKARI,cameraPosition[0]+300,cameraPosition[1]+380,NULL);

        al_draw_text(font2,al_map_rgb(255,255,255),cameraPosition[0]+380,cameraPosition[1]+395,ALLEGRO_ALIGN_LEFT,"Chegaremos em uma hora, ate");
        al_draw_text(font2,al_map_rgb(255,255,255),cameraPosition[0]+380,cameraPosition[1]+410,ALLEGRO_ALIGN_LEFT,"la descanse.");

    }

    if (morte)
{
    al_clear_to_color(al_map_rgb(0,0,0));
    al_draw_bitmap(morto,x,y,NULL);
    al_draw_textf(font2,al_map_rgb(255,255,255),120,10,ALLEGRO_ALIGN_CENTER, "X %i ", cont_vidas);
    al_draw_bitmap_region(keen,5,300,21,21,80,8,0);
    al_flip_display();

}
 al_draw_textf(font,al_map_rgb(255,255,255),cameraPosition[0]+1100,cameraPosition[1],ALLEGRO_ALIGN_CENTER, "SCORE: %i", 1000 + score);
    al_draw_textf(font2,al_map_rgb(255,255,255),cameraPosition[0]+50,cameraPosition[1]+10,ALLEGRO_ALIGN_CENTER, "X %i", cont_moedas_prata);
    al_draw_textf(font2,al_map_rgb(255,255,255),cameraPosition[0]+150,cameraPosition[1]+10,ALLEGRO_ALIGN_CENTER, "X %i ", cont_vidas);
    al_draw_bitmap_region(keen,5,300,21,21,cameraPosition[0]+80,cameraPosition[1]+8,0);
    al_draw_bitmap_region(MOEDA,regiao_x_folha_moedas,regiao_y_folha_moedas,largura_sprite_moedas,altura_sprite_moedas,cameraPosition[0]+10,cameraPosition[1]+10,0);
    al_draw_bitmap_region(HP,regiao_x_folha_HP,regiao_y_folha_HP,largura_sprite_HP,altura_sprite_HP,cameraPosition[0]+50,cameraPosition[1]+30,NULL);
    al_draw_bitmap_region(MP,regiao_x_folha_MP,regiao_y_folha_MP,largura_sprite_MP,altura_sprite_MP,cameraPosition[0]+50,cameraPosition[1]+60,NULL);
    al_draw_tinted_bitmap(FADE,al_map_rgba(0,0,0,fading),x-400,y-500,NULL);
    al_draw_tinted_bitmap(FADE,al_map_rgba(0,0,0,fading),x-400+al_get_bitmap_width(FADE),y-500,NULL);
    al_draw_tinted_bitmap(FADE,al_map_rgba(0,0,0,fading1),0,0,NULL);
    al_draw_tinted_bitmap(FADE,al_map_rgba(0,0,0,fading1),al_get_bitmap_width(FADE),0,NULL);
    al_flip_display();
    al_clear_to_color(al_map_rgb(0,0,0));

}
}

while(!ilha)
{
ALLEGRO_EVENT events;
al_wait_for_event(event_queue, &events);
al_get_keyboard_state(&keyState);
cameraUpdate(cameraPosition,x,y,-3000,500);
al_identity_transform(&camera);
al_translate_transform(&camera, -300,autocamy-40);
al_scale_transform(&camera,2.0f,2.0f);
al_use_transform(&camera);

    if(events.type == ALLEGRO_EVENT_KEY_DOWN)
    {

        switch (events.keyboard.keycode)
        {
        case ALLEGRO_KEY_ESCAPE:
            ilha = true;
        }
    }

    if(events.type == ALLEGRO_EVENT_TIMER)
    {
         if(events.timer.source == timer)
         {
             cont_frames_cutscene2 == 0;
             fading == 0;
             cont_frames_cutscene2++;

             fading1-=5;
             if(fading1<=0)
             {
                 fading1 = 0;
             }

             if(cont_frames_cutscene2 >=80)
             {
                   autocamy += 0.5;

             if(autocamy >= -100)
             {
                 autocamy -=0.5;
                 fading += 3;
                 if(fading>=255)
                 {
                     ilha = true;
                    cruz = false;
                    cruzx = x;
                    cruzy = y;
                    pegou = true;
                    x = 0;
                    y = 470;
                     ilha2 = false;
                     fading = 0;
                     historia = false;
                 }
             }
             }

             fogx +=velfog;
             if(fogx >= al_get_bitmap_width(FOG))
             {
                 fogx = 0;
             }
         }
    }

    al_draw_bitmap(YUKIYAMA,200,0,NULL);
    al_draw_bitmap_region(HIKARI,0,0,20,30,610,605,NULL);
    al_draw_bitmap_region(keen,0,50,30,50,625,590,NULL);
    al_draw_bitmap(FOG,fogx,130,NULL);
    al_draw_bitmap(FOG,fogx - al_get_bitmap_width(FOG),130,NULL);
    al_draw_rotated_bitmap(FOG,fogx,500,0,0,3.1415,NULL);
    al_draw_rotated_bitmap(FOG,fogx+al_get_bitmap_width(FOG),500,0,0,3.1415,NULL);
    al_draw_bitmap(KAGESHIMA,500,150,NULL);
    al_draw_tinted_bitmap(FADE,al_map_rgba(0,0,0,fading),200,0,NULL);
    al_draw_tinted_bitmap(FADE,al_map_rgba(0,0,0,fading1),200,0,NULL);
    al_flip_display();
    al_clear_to_color(al_map_rgb(0,0,0));
}
while(!ilha2)
{
ALLEGRO_EVENT events;
al_wait_for_event(event_queue, &events);
al_get_keyboard_state(&keyState);
cameraUpdate(cameraPosition,x,y,35,200);
 if (x>=3300)
            {
                cameraUpdate(cameraPosition,3300,y,0,200);
            }
al_identity_transform(&camera);
al_translate_transform(&camera, -cameraPosition[0],-cameraPosition[1]);
al_use_transform(&camera);


    if(events.type == ALLEGRO_EVENT_KEY_DOWN)
    {
        switch (events.keyboard.keycode)
        {
        case ALLEGRO_KEY_ESCAPE:
            ilha2 = true;
        case ALLEGRO_KEY_S:
           if(pegou)
           {
            cruz = true;
            cruzx = x;
            cruzy = y;
            pegou = false;
           }
        }
        switch (events.keyboard.keycode)
      {
          case ALLEGRO_KEY_SPACE:
          if(jump)
          {
          vely -= jumpspeed;
          pulo = true;
          }
      }
    }
    if(events.type == ALLEGRO_EVENT_KEY_UP)
    {
        switch (events.keyboard.keycode)
        {
        case ALLEGRO_KEY_X:
            tiro = true;

        }
                switch (events.keyboard.keycode)
        {
        case ALLEGRO_KEY_Z:
            dir = 0;

        }
    }
    else if (events.type == ALLEGRO_EVENT_TIMER)
    {

        if(events.timer.source == timer)
        {
            active = true;
            draw = true;
            jump = false;
            noar = true;
            vely +=gravity;
            y += vely;

    if(noar)
            {
                pulo=true;
            }
            if(y>=470)
                {
                y = 470;
                vely = 0;
                pulo = false;
                jump = true;
                noar = false;
                }

            if(x>=3700)
            {


                ilha2 = true;
                 x = 0;
                y = 470;
                done3 = false;
            }

            if(!tiro)
            {
                posx_tiro =x+al_get_bitmap_width(keen)/4;
                posy_tiro =y;
            }

            if(posx_tiro>=800)
            {
                tiro = false;
            }

        cont_frames_pulo++;
        cont_frames_tiro++;


            if (cont_frames_pulo >= frames_sprite_pulo)
            {
                cont_frames_pulo=0;
                coluna_atual_pulo++;

                if (coluna_atual_pulo >= colunas_pulo)
                {
                    coluna_atual_pulo=0;
                    regiao_y_folha_pulo = linha_atual_pulo * altura_sprite_pulo;
                }

                    regiao_x_folha_pulo = coluna_atual_pulo * largura_sprite_pulo;
            }

            if(cont_frames_tiro>=frames_sprite_tiro && tiro)
            {
                cont_frames_tiro = 0;
                coluna_atual_tiro++;

                if(coluna_atual_tiro>=colunas_tiro)
                {
                    coluna_atual_tiro = 0;
                    regiao_y_tiro = 0;
                }

                regiao_x_tiro = coluna_atual_tiro*largura_sprite_tiro;
                posx_tiro += velx_tiro;
                posy_tiro +=0;
            }

          if(al_key_down(&keyState,ALLEGRO_KEY_RIGHT) && !historia)
            {

                x += movespeed;
                dir = RIGHT;

            }

 else if(al_key_down(&keyState,ALLEGRO_KEY_LEFT) && !historia)
            {

                if (x<=0)
                {
                    x +=movespeed;
                }

                x -= movespeed;
                dir = LEFT;
            }

            else if(al_key_down(&keyState,ALLEGRO_KEY_UP) && !historia)
            {
                dir = UP;
                velx = 0;
            }
            else if(al_key_down(&keyState,ALLEGRO_KEY_DOWN) && !historia)
            {
                dir = DOWN;
                velx = 0;
            }
               else if(al_key_down(&keyState,ALLEGRO_KEY_C) && x>=cruzx-30 && x<=cruzx+30)
            {
                    cruz = false;
                    pegou = true;
            }

            else if(al_key_down(&keyState,ALLEGRO_KEY_Z) && x >= cruzx-20 && x<= cruzx+30 && y >= cruzy-20 && y<= cruzy+30 && coluna_atual_MP>2)
                    {
                        oracao = true;
                        dir = 5;
                        cont_frames_MP++;
                        if (cont_frames_MP>=15)
                        {
                            cont_frames_MP = 0;
                            coluna_atual_MP--;
                        }

                    }

             else
            {
                velx = 0;
                active = false;
                oracao = false;
                historia = false;

            }

          if (oracao)
           {
               vuneravel = false;
           }

           largura_sprite_HP = 9*coluna_atual_HP;
           largura_sprite_MP = 9*coluna_atual_MP;


if (coluna_atual_HP <= 2)
            {
                historia = true;
                morte = true;
                vuneravel = false;
                cont_frames_morto++;
                if(cont_frames_morto>=12)
                {
                morte = false;
                    if(cont_frames_morto>=24)
                    {
                    coluna_atual_HP = 12;
                    cont_frames_morto = 0;
                    vuneravel = true;
                    }
                }
                if(cont_frames_morto == 6)
                {
                    cont_vidas--;
                       if(cont_vidas<0)
                        {
                        ilha2 = true;
                        }
                }
            }

            if(active)
            {
                sourceX += al_get_bitmap_width(keen)/5;
            }

            else
            {
                sourceX = 0;
            }

            if(sourceX>=al_get_bitmap_width(keen))
            {
                sourceX = 0;
            }

    sourceY = dir;

        }

           else if(events.timer.source == BOLAtimer)
{
    fogx += velfog;

    if(fogx >=1024)
    {
        fogx = 0;
    }

       cont_frames_vampmoca1++;
    if (mocavamp1x <= -50)
    {
        mocavamp1x = 4000;
    }
       mocavamp1x -= velvamp2;
         if (cont_frames_vampmoca1 >= frames_sprite_vampmoca1)
        {
            cont_frames_vampmoca1=0;
            coluna_atual_vampmoca1++;

                if (coluna_atual_vampmoca1 >= colunas_vampmoca1)
                {
                    coluna_atual_vampmoca1 = 0;
                }
regiao_y_folha_vampmoca1 = 3 * altura_sprite_vampmoca1;
regiao_x_folha_vampmoca1 = coluna_atual_vampmoca1 * largura_sprite_vampmoca1;
        }


            cont_frames_oracao[1]++;
            cont_frames_oracao[2]++;
            cont_frames_oracao[3]++;
            cont_frames_oracao[4]++;
            cont_frames_oracao[5]++;
            cont_frames_oracao[6]++;

             if (cont_frames_oracao[1] >= frames_sprite_oracao[1])
            {
                cont_frames_oracao[1] = 0;
                coluna_atual_oracao[1]++;

                if (coluna_atual_oracao[1] >= colunas_oracao[1])
                {
                    coluna_atual_oracao[1] = 0;
                    linha_atual_oracao[1]++;

                }
                if (linha_atual_oracao[1] > linhas_oracao[1])

                {
                    linha_atual_oracao[1] = 0;

                }
                regiao_x_folha_oracao[1] = coluna_atual_oracao[1] * largura_sprite_oracao[1];
                regiao_y_folha_oracao[1] = linha_atual_oracao[1] * altura_sprite_oracao[1];
            }
             if (cont_frames_oracao[2] >= frames_sprite_oracao[2])
             {
                 cont_frames_oracao[2] = 0;
                 coluna_atual_oracao[2]++;

                 if (coluna_atual_oracao[2] >= colunas_oracao[2])
                 {
                     coluna_atual_oracao[2] = 0;
                     linha_atual_oracao[2]++;

                 }
                  if (linha_atual_oracao[2] > linhas_oracao[2])
                  {
                       linha_atual_oracao[2] = 0;
                  }
                  regiao_x_folha_oracao[2] = coluna_atual_oracao[2] * largura_sprite_oracao[2];
                  regiao_y_folha_oracao[2] = linha_atual_oracao[2] * altura_sprite_oracao[2];
             }
             if (cont_frames_oracao[3] >= frames_sprite_oracao[3])
            {
                cont_frames_oracao[3] = 0;
                coluna_atual_oracao[3]++;

                if (coluna_atual_oracao[3] >= colunas_oracao[3])
                {
                    coluna_atual_oracao[3] = 0;
                    linha_atual_oracao[3]++;

                }
                if (linha_atual_oracao[3] > linhas_oracao[3])

                {
                    linha_atual_oracao[3] = 0;

                }
                regiao_x_folha_oracao[3] = coluna_atual_oracao[3] * largura_sprite_oracao[3];
                regiao_y_folha_oracao[3] = linha_atual_oracao[3] * altura_sprite_oracao[3];
            }
            if (cont_frames_oracao[4] >= frames_sprite_oracao[4])
            {
                cont_frames_oracao[4] = 0;
                coluna_atual_oracao[4]++;

                if (coluna_atual_oracao[4] >= colunas_oracao[4])
                {
                    coluna_atual_oracao[4] = 0;
                    linha_atual_oracao[4]++;

                }
                if (linha_atual_oracao[4] > linhas_oracao[4])

                {
                    linha_atual_oracao[4] = 0;

                }
                regiao_x_folha_oracao[4] = coluna_atual_oracao[4] * largura_sprite_oracao[4];
                regiao_y_folha_oracao[4] = linha_atual_oracao[4] * altura_sprite_oracao[4];
            }
            if (cont_frames_oracao[5] >= frames_sprite_oracao[5])
            {
                cont_frames_oracao[5] = 0;
                coluna_atual_oracao[5]++;

                if (coluna_atual_oracao[5] >= colunas_oracao[5])
                {
                    coluna_atual_oracao[5] = 0;
                    linha_atual_oracao[5]++;

                }
                if (linha_atual_oracao[5] > linhas_oracao[5])

                {
                    linha_atual_oracao[5] = 0;

                }
                regiao_x_folha_oracao[5] = coluna_atual_oracao[5] * largura_sprite_oracao[5];
                regiao_y_folha_oracao[5] = linha_atual_oracao[5] * altura_sprite_oracao[5];
            }

             if (cont_frames_oracao[6] >= frames_sprite_oracao[6])
            {
                cont_frames_oracao[6] = 0;
                coluna_atual_oracao[6]++;

                if (coluna_atual_oracao[6] >= colunas_oracao[6])
                {
                    coluna_atual_oracao[6] = 0;
                    linha_atual_oracao[6]++;

                }
                if (linha_atual_oracao[6] > linhas_oracao[6])

                {
                    linha_atual_oracao[6] = 0;

                }
                regiao_x_folha_oracao[6] = coluna_atual_oracao[6] * largura_sprite_oracao[6];
                regiao_y_folha_oracao[6] = linha_atual_oracao[6] * altura_sprite_oracao[6];
            }
}


if(draw)

{

    al_draw_bitmap(YUKIMACHI,0,-450,NULL);
    al_draw_bitmap(YUKIMACHI,1850,-450,NULL);
    al_draw_bitmap_region(VAMPMOCA2,regiao_x_folha_vampmoca1,regiao_y_folha_vampmoca1,largura_sprite_vampmoca1,altura_sprite_vampmoca1,mocavamp1x,450,NULL);
if (pulo)
    {
        al_draw_bitmap_region(keen,regiao_x_folha_pulo,regiao_y_folha_pulo,largura_sprite_pulo,altura_sprite_pulo,x,y,0);
    }
        if(!tiro && !pulo)
        {
            al_draw_bitmap_region(keen,sourceX,sourceY*al_get_bitmap_height(keen)/7,30,50,x,y,NULL);
        }
        if(tiro)
        {
            if(!pulo)
            {
                al_draw_bitmap_region(keen,sourceX,RIGHT*al_get_bitmap_height(keen)/7,30,50,x,y,NULL);
               al_draw_bitmap_region(ATIRA,0,0,40,50,x,y,NULL);
            }
            al_draw_bitmap_region(TIRO,regiao_x_tiro,0,largura_sprite_tiro,altura_sprite_tiro,posx_tiro,posy_tiro+10,0);
        }

 if (cruz)
    {
       al_draw_bitmap(CRUZ,cruzx,cruzy,NULL);
    }
      if (oracao)
    {
        al_draw_bitmap(ESCUDO,x-113,y-130,NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[1],regiao_y_folha_oracao[1],largura_sprite_oracao[1], altura_sprite_oracao[1], x+15, y+15, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[2],regiao_y_folha_oracao[2],largura_sprite_oracao[2], altura_sprite_oracao[2], x-30, y+30, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[3],regiao_y_folha_oracao[3],largura_sprite_oracao[3], altura_sprite_oracao[3], x-70, y, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[4],regiao_y_folha_oracao[4],largura_sprite_oracao[4], altura_sprite_oracao[4], x-70, y-45, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[5],regiao_y_folha_oracao[5],largura_sprite_oracao[5], altura_sprite_oracao[5], x+15, y-45, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[6],regiao_y_folha_oracao[6],largura_sprite_oracao[6], altura_sprite_oracao[6], x-30,y-60,NULL);
    }

    al_draw_bitmap(PINHO3,1500,-100,NULL);
    al_draw_bitmap(PINHO3,1400,100,NULL);
    al_draw_bitmap(FOG,fogx,100,NULL);
    al_draw_bitmap(FOG,fogx+1024,100,NULL);
    al_draw_bitmap(FOG,fogx+2048,100,NULL);
    al_draw_bitmap(FOG,fogx+3072,100,NULL);
    al_draw_bitmap(FOG,fogx-1024,100,NULL);

if (morte)
{
    al_clear_to_color(al_map_rgb(0,0,0));
    al_draw_bitmap(morto,x,y,NULL);
    al_draw_textf(font2,al_map_rgb(255,255,255),120,10,ALLEGRO_ALIGN_CENTER, "X %i ", cont_vidas);
    al_draw_bitmap_region(keen,5,300,21,21,80,8,0);
    al_flip_display();

}
 al_draw_textf(font,al_map_rgb(255,255,255),cameraPosition[0]+1100,cameraPosition[1],ALLEGRO_ALIGN_CENTER, "SCORE: %i", 1000 + score);
    al_draw_textf(font2,al_map_rgb(255,255,255),cameraPosition[0]+50,cameraPosition[1]+10,ALLEGRO_ALIGN_CENTER, "X %i", cont_moedas_prata);
    al_draw_textf(font2,al_map_rgb(255,255,255),cameraPosition[0]+150,cameraPosition[1]+10,ALLEGRO_ALIGN_CENTER, "X %i ", cont_vidas);
   al_draw_bitmap_region(keen,5,300,21,21,cameraPosition[0]+80,cameraPosition[1]+8,0);
    al_draw_bitmap_region(MOEDA,regiao_x_folha_moedas,regiao_y_folha_moedas,largura_sprite_moedas,altura_sprite_moedas,cameraPosition[0]+10,cameraPosition[1]+10,0);
    al_draw_bitmap_region(HP,regiao_x_folha_HP,regiao_y_folha_HP,largura_sprite_HP,altura_sprite_HP,cameraPosition[0]+50,cameraPosition[1]+30,NULL);
    al_draw_bitmap_region(MP,regiao_x_folha_MP,regiao_y_folha_MP,largura_sprite_MP,altura_sprite_MP,cameraPosition[0]+50,cameraPosition[1]+60,NULL);
    al_flip_display();
    al_clear_to_color(al_map_rgb(0,0,0));
}
}
}

while(!done3)
{

ALLEGRO_EVENT events;
al_wait_for_event(event_queue, &events);
al_get_keyboard_state(&keyState);
al_identity_transform(&camera);
al_translate_transform(&camera, 300,150);
al_use_transform(&camera);

    if(events.type == ALLEGRO_EVENT_KEY_DOWN)
    {

        switch (events.keyboard.keycode)
        {
        case ALLEGRO_KEY_ESCAPE:
            done3 = true;
        case ALLEGRO_KEY_SPACE:
            if(jump)
            {
                vely -= jumpspeed;
                pulo = true;
            }

        }
    }
  if(events.type == ALLEGRO_EVENT_KEY_UP)
    {
        switch (events.keyboard.keycode)
        {
        case ALLEGRO_KEY_Z:
        dir = 0;
        }

        switch (events.keyboard.keycode)
        {
        case ALLEGRO_KEY_X:
            tiro = true;

        }
        switch (events.keyboard.keycode)
        {
           case ALLEGRO_KEY_S:
           if(pegou)
           {
            cruz = true;
            cruzx = x;
            cruzy = y;
            pegou = false;
           }
        }

    }
    else if (events.type == ALLEGRO_EVENT_TIMER)
    {

        if(events.timer.source == timer)
        {
            active = true;
            draw = true;
            jump = false;
            noar = true;
            vely +=gravity;
            y += vely;

            if(noar)
            {
                pulo=true;
            }

            if (y>=470)

            {
                y = 470;
                vely = 0;
                pulo = false;
                jump = true;
                noar = false;
       	    }
       	    if(x>=20 && x<=150 && y>=390 && y<=400)
       	    {
       	        y = 390;
                vely = 0;
                pulo = false;
                jump = true;
                noar = false;
       	    }
       	     if(x>=160 && x<=350 && y>=310 && y<=320)
       	    {
       	        y = 310;
                vely = 0;
                pulo = false;
                jump = true;
                noar = false;
       	    }
       	     if(x>=230 && x<=315 && y>=280 && y<=290)
       	    {
       	        y = 280;
                vely = 0;
                pulo = false;
                jump = true;
                noar = false;
       	    }
       	    if(x>=330 && x<=450 && y>=370 && y<=380)
       	    {
       	        y = 370;
                vely = 0;
                pulo = false;
                jump = true;
                noar = false;
       	    }
  if(x>=450 && x<=900 && y>=170 && y<=180)
       	    {
       	        y = 170;
                vely = 0;
                pulo = false;
                jump = true;
                noar = false;
       	    }

       	      if(al_key_down(&keyState,ALLEGRO_KEY_RIGHT))
            {
                 if (x >= 800 - al_get_bitmap_width(keen)/5 && y<=250)
                {
                   x = 0;
                   done3 = true;
                   done4 = false;
                   lobovive = true;
                   lobo = true;
                   lobox = 500;
                   cont_dano = 0;
                   velobox = 20;
                   linha_atual_lobo = 0;
                   cruzx = x;
                   cruzy = y;
                   cruz = false;
                   pegou = true;

                }
                if(x>=800 - al_get_bitmap_width(keen)/5 && y>=300)
                {
                    x -=movespeed;
                    x = 760;
                }

                x += movespeed;
                dir = RIGHT;
            }

            else if(al_key_down(&keyState,ALLEGRO_KEY_UP))
            {
                dir = UP;
                velx = 0;
            }
            else if(al_key_down(&keyState,ALLEGRO_KEY_DOWN))
            {
                dir = DOWN;
                velx = 0;
            }
            else if(al_key_down(&keyState,ALLEGRO_KEY_LEFT))
            {

                if (x<=0)
                {
                    x +=movespeed;
                    x = 1;
                }

                x -= movespeed;
                dir = LEFT;
            }
             else if(al_key_down(&keyState,ALLEGRO_KEY_C) && x>=cruzx-30 && x<=cruzx+30 && y<=cruzy+30 && y>=cruzy-20)
            {
                    cruz = false;
                    pegou = true;
            }

            else if(al_key_down(&keyState,ALLEGRO_KEY_Z) && x >= cruzx-20 && x<= cruzx+30 && y >= cruzy-20 && y<= cruzy+30 && coluna_atual_MP>2)
                    {
                        oracao = true;
                        dir = 5;
                        cont_frames_MP++;
                        if (cont_frames_MP>=15)
                        {
                            cont_frames_MP = 0;
                            coluna_atual_MP--;
                        }

                    }

           else
        {
            velx = 0;
            active = false;
            oracao = false;
            dir = 0;

        }

            if(!tiro)
            {
                posx_tiro =x+al_get_bitmap_width(keen)/4;
                posy_tiro =y;
            }

            if(posx_tiro>=800)
            {
                tiro = false;
            }
        score--;
        cont_frames_pulo++;
        cont_frames_moedas++;
        cont_frames_tiro++;
        cont_frames_porta++;

            if (cont_frames_pulo >= frames_sprite_pulo)
            {
                cont_frames_pulo=0;
                coluna_atual_pulo++;

                if (coluna_atual_pulo >= colunas_pulo)
                {
                    coluna_atual_pulo=0;
                    regiao_y_folha_pulo = linha_atual_pulo * altura_sprite_pulo;
                }

                    regiao_x_folha_pulo = coluna_atual_pulo * largura_sprite_pulo;
            }

            if (cont_frames_moedas>=frames_sprite_moedas && dinheiro)
            {
                cont_frames_moedas=0;
                linha_atual_moeda++;

                if (linha_atual_moeda>=linhas_moedas)
                {
                    linha_atual_moeda=0;
                    regiao_x_folha_moedas = coluna_atual_moedas * largura_sprite_moedas;

                    if (Colisao(x,y,moeda1x,moeda1y,largura_sprite_moedas,altura_sprite_moedas))
                    {

                        score +=500;
                        moeda1x=10;
                        moeda1y=10;
                        cont_moedas_prata++;


                    }
                    if (Colisao(x,y,moeda2x ,moeda2y,largura_sprite_moedas,altura_sprite_moedas))
                    {

                        score +=500;
                        moeda2x=10;
                        moeda2y=10;
                        cont_moedas_prata++;

                    }
                     if (Colisao(x,y,moeda3x ,moeda3y,largura_sprite_moedas,altura_sprite_moedas))
                    {

                        score +=500;
                        moeda3x=10;
                        moeda3y=10;
                        cont_moedas_prata++;

                    }
                       if (Colisao(x,y,moeda4x ,moeda4y,largura_sprite_moedas,altura_sprite_moedas))
                    {

                        score +=500;
                        moeda4x=10;
                        moeda4y=10;
                        cont_moedas_prata++;

                    }
                       if (Colisao(x,y,moeda5x ,moeda5y,largura_sprite_moedas,altura_sprite_moedas))
                    {

                        score +=500;
                        moeda5x=10;
                        moeda5y=10;
                        cont_moedas_prata++;

                    }

                }

                regiao_y_folha_moedas = linha_atual_moeda * altura_sprite_moedas;
            }

            if(cont_frames_tiro>=frames_sprite_tiro && tiro)
            {
                cont_frames_tiro = 0;
                coluna_atual_tiro++;

                if(coluna_atual_tiro>=colunas_tiro)
                {
                    coluna_atual_tiro = 0;
                    regiao_y_tiro = 0;
                }

                regiao_x_tiro = coluna_atual_tiro*largura_sprite_tiro;
                posx_tiro += velx_tiro;
                posy_tiro +=0;
            }

             if (oracao)
           {
               vuneravel = false;
           }

           largura_sprite_HP = 9*coluna_atual_HP;
           largura_sprite_MP = 9*coluna_atual_MP;


            if (Colisao(x,y,lobox,loboy,32,64) && lobovive)
            {
                cont_frames_dano++;
            if (cont_frames_dano>=5 && coluna_atual_HP>2)
            {
                coluna_atual_HP-=1;
                cont_frames_dano = 0;
            }
            }
            if (Colisao(posx_tiro,posy_tiro,lobox,loboy,30,30) && tiro)
            {
                cont_dano++;
                tiro = false;
                if(cont_dano >= 3)
                {
                lobo = false;
                if(lobovive)
                {
                    score += 1000;
                }
                lobovive = false;
                velobox = 0;
                tiro = false;
                }

            }


if (coluna_atual_HP <= 2)
            {
                historia = true;
                morte = true;
                vuneravel = false;
                cont_frames_morto++;
                if(cont_frames_morto>=12)
                {
                morte = false;
                    if(cont_frames_morto>=24)
                    {
                    coluna_atual_HP = 12;
                    cont_frames_morto = 0;
                    vuneravel = true;
                    }
                }
                if(cont_frames_morto == 6)
                {
                    cont_vidas--;
                       if(cont_vidas<0)
                        {
                        done3 = true;
                        }
                }
            }

            if(active)
            {
                sourceX += al_get_bitmap_width(keen)/5;
            }

            else
            {
                sourceX = 0;
            }

            if(sourceX>=al_get_bitmap_width(keen))
            {
                sourceX = 0;
            }

    sourceY = dir;

        }

            else if(events.timer.source == BOLAtimer)
            {

    fogx += velfog;

    if(fogx >=1024)
    {
        fogx = 0;
    }
    if (lobo)
    {
        cont_frames_lobo++;
            if(cont_frames_lobo>=frames_sprite_lobo && lobovive)
            {
                cont_frames_lobo = 0;
                coluna_atual_lobo++;

                if(coluna_atual_lobo>=colunas_lobo)
                {
                    coluna_atual_lobo = 0;
                    if(lobox>=780-al_get_bitmap_width(LOBO)/5 || lobox<=0+al_get_bitmap_width(LOBO)/5)
                    {
                        linha_atual_lobo = (linha_atual_lobo+1) % linhas_lobo;
                        regiao_y_folha_lobo = linha_atual_lobo*altura_sprite_lobo;
                        velobox = -velobox;

                    }
                }

                regiao_x_folha_lobo = coluna_atual_lobo*largura_sprite_lobo;
                lobox += velobox;
            }
    }//


            cont_frames_oracao[1]++;
            cont_frames_oracao[2]++;
            cont_frames_oracao[3]++;
            cont_frames_oracao[4]++;
            cont_frames_oracao[5]++;
            cont_frames_oracao[6]++;

             if (cont_frames_oracao[1] >= frames_sprite_oracao[1])
            {
                cont_frames_oracao[1] = 0;
                coluna_atual_oracao[1]++;

                if (coluna_atual_oracao[1] >= colunas_oracao[1])
                {
                    coluna_atual_oracao[1] = 0;
                    linha_atual_oracao[1]++;

                }
                if (linha_atual_oracao[1] > linhas_oracao[1])

                {
                    linha_atual_oracao[1] = 0;

                }
                regiao_x_folha_oracao[1] = coluna_atual_oracao[1] * largura_sprite_oracao[1];
                regiao_y_folha_oracao[1] = linha_atual_oracao[1] * altura_sprite_oracao[1];
            }
             if (cont_frames_oracao[2] >= frames_sprite_oracao[2])
             {
                 cont_frames_oracao[2] = 0;
                 coluna_atual_oracao[2]++;

                 if (coluna_atual_oracao[2] >= colunas_oracao[2])
                 {
                     coluna_atual_oracao[2] = 0;
                     linha_atual_oracao[2]++;

                 }
                  if (linha_atual_oracao[2] > linhas_oracao[2])
                  {
                       linha_atual_oracao[2] = 0;
                  }
                  regiao_x_folha_oracao[2] = coluna_atual_oracao[2] * largura_sprite_oracao[2];
                  regiao_y_folha_oracao[2] = linha_atual_oracao[2] * altura_sprite_oracao[2];
             }
             if (cont_frames_oracao[3] >= frames_sprite_oracao[3])
            {
                cont_frames_oracao[3] = 0;
                coluna_atual_oracao[3]++;

                if (coluna_atual_oracao[3] >= colunas_oracao[3])
                {
                    coluna_atual_oracao[3] = 0;
                    linha_atual_oracao[3]++;

                }
                if (linha_atual_oracao[3] > linhas_oracao[3])

                {
                    linha_atual_oracao[3] = 0;

                }
                regiao_x_folha_oracao[3] = coluna_atual_oracao[3] * largura_sprite_oracao[3];
                regiao_y_folha_oracao[3] = linha_atual_oracao[3] * altura_sprite_oracao[3];
            }
            if (cont_frames_oracao[4] >= frames_sprite_oracao[4])
            {
                cont_frames_oracao[4] = 0;
                coluna_atual_oracao[4]++;

                if (coluna_atual_oracao[4] >= colunas_oracao[4])
                {
                    coluna_atual_oracao[4] = 0;
                    linha_atual_oracao[4]++;

                }
                if (linha_atual_oracao[4] > linhas_oracao[4])

                {
                    linha_atual_oracao[4] = 0;

                }
                regiao_x_folha_oracao[4] = coluna_atual_oracao[4] * largura_sprite_oracao[4];
                regiao_y_folha_oracao[4] = linha_atual_oracao[4] * altura_sprite_oracao[4];
            }
            if (cont_frames_oracao[5] >= frames_sprite_oracao[5])
            {
                cont_frames_oracao[5] = 0;
                coluna_atual_oracao[5]++;

                if (coluna_atual_oracao[5] >= colunas_oracao[5])
                {
                    coluna_atual_oracao[5] = 0;
                    linha_atual_oracao[5]++;

                }
                if (linha_atual_oracao[5] > linhas_oracao[5])

                {
                    linha_atual_oracao[5] = 0;

                }
                regiao_x_folha_oracao[5] = coluna_atual_oracao[5] * largura_sprite_oracao[5];
                regiao_y_folha_oracao[5] = linha_atual_oracao[5] * altura_sprite_oracao[5];
            }

             if (cont_frames_oracao[6] >= frames_sprite_oracao[6])
            {
                cont_frames_oracao[6] = 0;
                coluna_atual_oracao[6]++;

                if (coluna_atual_oracao[6] >= colunas_oracao[6])
                {
                    coluna_atual_oracao[6] = 0;
                    linha_atual_oracao[6]++;

                }
                if (linha_atual_oracao[6] > linhas_oracao[6])

                {
                    linha_atual_oracao[6] = 0;

                }
                regiao_x_folha_oracao[6] = coluna_atual_oracao[6] * largura_sprite_oracao[6];
                regiao_y_folha_oracao[6] = linha_atual_oracao[6] * altura_sprite_oracao[6];
            }


            }//bolatimer

    }

if(draw)
{
    al_draw_bitmap_region(YUKIMACHI,1600,0,300,800,-300,-250,NULL);
    al_draw_bitmap(CHAOGELO,0,500,NULL);
    al_draw_bitmap(PINHO4,-300,0,NULL);
    al_draw_bitmap(PINHO4,100,0,NULL);
    al_draw_bitmap(PEDRABASE,360,170,NULL);
    al_draw_bitmap(PLATAGELO1,650,200,NULL);
    al_draw_bitmap(PLATAPEDRA3,100,310,NULL);
    al_draw_bitmap(PLATAGELO1,20,420,NULL);
    al_draw_bitmap(PINHO,450,320,NULL);
 al_draw_textf(font,al_map_rgb(255,255,255),cameraPosition[0]+700,cameraPosition[1],ALLEGRO_ALIGN_CENTER, "SCORE: %i", 1000 + score);
    al_draw_textf(font2,al_map_rgb(255,255,255),cameraPosition[0]+50,cameraPosition[1]+10,ALLEGRO_ALIGN_CENTER, "X %i", cont_moedas_prata);
    al_draw_textf(font2,al_map_rgb(255,255,255),cameraPosition[0]+150,cameraPosition[1]+10,ALLEGRO_ALIGN_CENTER, "X %i ", cont_vidas);
    if (pulo)
    {
        al_draw_bitmap_region(keen,regiao_x_folha_pulo,regiao_y_folha_pulo,largura_sprite_pulo,altura_sprite_pulo,x,y,0);
    }
        if(!tiro && !pulo)
        {
            al_draw_bitmap_region(keen,sourceX,sourceY*al_get_bitmap_height(keen)/7,30,50,x,y,NULL);
        }
        if(tiro)
        {
            if(!pulo)
            {
                al_draw_bitmap_region(keen,sourceX,RIGHT*al_get_bitmap_height(keen)/7,30,50,x,y,NULL);
               al_draw_bitmap_region(ATIRA,0,0,40,50,x,y,NULL);
            }
            al_draw_bitmap_region(TIRO,regiao_x_tiro,0,largura_sprite_tiro,altura_sprite_tiro,posx_tiro,posy_tiro+10,0);
        }

 if (cruz)
    {
       al_draw_bitmap(CRUZ,cruzx,cruzy,NULL);
    }
      if (oracao)
    {

        al_draw_bitmap(ESCUDO,x-113,y-130,NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[1],regiao_y_folha_oracao[1],largura_sprite_oracao[1], altura_sprite_oracao[1], x+15, y+15, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[2],regiao_y_folha_oracao[2],largura_sprite_oracao[2], altura_sprite_oracao[2], x-30, y+30, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[3],regiao_y_folha_oracao[3],largura_sprite_oracao[3], altura_sprite_oracao[3], x-70, y, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[4],regiao_y_folha_oracao[4],largura_sprite_oracao[4], altura_sprite_oracao[4], x-70, y-45, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[5],regiao_y_folha_oracao[5],largura_sprite_oracao[5], altura_sprite_oracao[5], x+15, y-45, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[6],regiao_y_folha_oracao[6],largura_sprite_oracao[6], altura_sprite_oracao[6], x-30,y-60,NULL);

    }
      if(lobo)
    {
            al_draw_bitmap_region(LOBO,regiao_x_folha_lobo,regiao_y_folha_lobo,largura_sprite_lobo,altura_sprite_lobo, lobox, loboy, 0);
    }
      if(!lobo)
    {
         al_draw_bitmap_region(LOBO,320,0,64,32,lobox,loboy,0);
    }

    al_draw_bitmap_region(MOEDA,regiao_x_folha_moedas,regiao_y_folha_moedas,largura_sprite_moedas,altura_sprite_moedas,moeda1x,moeda1y,0);
    al_draw_bitmap_region(MOEDA,regiao_x_folha_moedas,regiao_y_folha_moedas,largura_sprite_moedas,altura_sprite_moedas,moeda2x,moeda2y,0);
    al_draw_bitmap_region(MOEDA,regiao_x_folha_moedas,regiao_y_folha_moedas,largura_sprite_moedas,altura_sprite_moedas,moeda3x,moeda3y,0);
    al_draw_bitmap_region(MOEDA,regiao_x_folha_moedas,regiao_y_folha_moedas,largura_sprite_moedas,altura_sprite_moedas,moeda4x,moeda4y,0);
    al_draw_bitmap_region(MOEDA,regiao_x_folha_moedas,regiao_y_folha_moedas,largura_sprite_moedas,altura_sprite_moedas,moeda5x,moeda5y,0);

al_draw_bitmap_region(keen,5,300,21,21,cameraPosition[0]+80,cameraPosition[1]+8,0);
    al_draw_bitmap_region(MOEDA,regiao_x_folha_moedas,regiao_y_folha_moedas,largura_sprite_moedas,altura_sprite_moedas,cameraPosition[0]+10,cameraPosition[1]+10,0);
    al_draw_bitmap(PINHO3,200,200,NULL);
    al_draw_bitmap(PINHO3,-500,150,NULL);
    al_draw_bitmap_region(HP,regiao_x_folha_HP,regiao_y_folha_HP,largura_sprite_HP,altura_sprite_HP,cameraPosition[0]+50,cameraPosition[1]+30,NULL);
    al_draw_bitmap_region(MP,regiao_x_folha_MP,regiao_y_folha_MP,largura_sprite_MP,altura_sprite_MP,cameraPosition[0]+50,cameraPosition[1]+60,NULL);
    al_draw_bitmap(FOG,fogx,150,NULL);
    al_draw_bitmap(FOG,fogx-1024,150,NULL);
    al_draw_bitmap(FOG,fogx-2048,150,NULL);
    al_draw_bitmap(FOG,fogx+1024,150,NULL);
    al_flip_display();
    al_clear_to_color(al_map_rgb(0,0,0));

}

if (morte)
{
    al_clear_to_color(al_map_rgb(0,0,0));
    al_draw_bitmap(morto,x,y,NULL);
    al_draw_textf(font2,al_map_rgb(255,255,255),120,10,ALLEGRO_ALIGN_CENTER, "X %i ", cont_vidas);
    al_draw_bitmap_region(keen,5,300,21,21,80,8,0);
    al_flip_display();
    al_rest(2.0);
}

}

while(!done4)
{
ALLEGRO_EVENT events;
al_wait_for_event(event_queue, &events);
al_get_keyboard_state(&keyState);
al_identity_transform(&camera);
al_translate_transform(&camera,0,150);
al_use_transform(&camera);



if(events.type == ALLEGRO_EVENT_KEY_DOWN)
    {
        switch (events.keyboard.keycode)
        {
        case ALLEGRO_KEY_ESCAPE:
            done4 = true;
        }
    }

    if(events.type == ALLEGRO_EVENT_KEY_DOWN && !historia)
    {

        switch (events.keyboard.keycode)
        {
        case ALLEGRO_KEY_SPACE:
            if(jump)
            {
                vely -= jumpspeed;
                pulo = true;
            }

        }
    }
     if(events.type == ALLEGRO_EVENT_KEY_UP && !historia )
    {

        switch (events.keyboard.keycode)
        {
        case ALLEGRO_KEY_Z:
        dir = 0;
        }
           switch (events.keyboard.keycode)
        {
           case ALLEGRO_KEY_S:
           if(pegou)
           {
            cruz = true;
            cruzx = x;
            cruzy = y;
            pegou = false;
           }
        }
    }
    if(events.type == ALLEGRO_EVENT_KEY_UP && permapoder && !historia)
    {
        switch (events.keyboard.keycode)
        {
            case ALLEGRO_KEY_X:
            poder = true;

        }
    }
         else if (events.type == ALLEGRO_EVENT_TIMER)
    {

        if(events.timer.source == timer)
        {
            active = true;
            draw = true;
            jump = false;
            noar = true;
            vely +=gravity;
            y += vely;

            if(noar)
            {
                pulo=true;
            }

            if (y>=470)

            {
                y = 470;
                vely = 0;
                pulo = false;
                jump = true;
                noar = false;
       	    }
       	     if (x>=0 && x<= 250 && y>=390 && y<=410)

            {
                y = 390;
                vely = 0;
                pulo = false;
                jump = true;
                noar = false;
       	    }
       	    if (x>=160 && x<= 260 && y>=310 && y<=325)

            {
                y = 310;
                vely = 0;
                pulo = false;
                jump = true;
                noar = false;
       	    }
       	    if (x>=0 && x<= 200 && y>=200 && y<=225)

            {
                y = 200;
                vely = 0;
                pulo = false;
                jump = true;
                noar = false;
       	    }
       	    if (x>=50 && x<= 150 && y>=160 && y<=180)

            {
                y = 160;
                vely = 0;
                pulo = false;
                jump = true;
                noar = false;
       	    }



       	    if(al_key_down(&keyState,ALLEGRO_KEY_RIGHT) && !historia)
            {

                if (x >= 1350)
                {
                    x -=movespeed;
                    x = 1350;

                }

                x += movespeed;
                dir = RIGHT;
            }

            else if(al_key_down(&keyState,ALLEGRO_KEY_UP) && !historia)
            {
                dir = UP;
                velx = 0;
                if(iriguchi && x>=565 && x<= 575)
                {
                    cont_frames_fase++;
                    if(cont_frames_done5 = 6)
                    {
                        done4 = true;
                        x = 0;
                        done5 = false;
                    }
                }
            }
            else if(al_key_down(&keyState,ALLEGRO_KEY_DOWN) && !historia)
            {
                dir = DOWN;
                velx = 0;
            }

            else if(al_key_down(&keyState,ALLEGRO_KEY_LEFT) && !historia)
            {

                if (x<=0)
                {
                    x +=movespeed;
                    x = 1;
                }

                x -= movespeed;
                dir = LEFT;
            }
            else if(al_key_down(&keyState,ALLEGRO_KEY_C) && x >= 100 && x <=120  && y<= 180)
            {
                    chest = true;
                    regiao_x_folha_bau = 32;
                    firereliq = true;
                    historia = true;

            }

            else if(al_key_down(&keyState,ALLEGRO_KEY_C) && x>=cruzx-30 && x<=cruzx+30 && y<=cruzy+30 && y>=cruzy-20 && !historia)
            {
                    cruz = false;
                    pegou = true;
            }

            else if(al_key_down(&keyState,ALLEGRO_KEY_Z) && x >= cruzx-20 && x<= cruzx+30 && y >= cruzy-20 && y<= cruzy+30 && coluna_atual_MP>2 && !historia)
                    {
                        oracao = true;
                        dir = 5;
                        cont_frames_MP++;
                        if (cont_frames_MP>=15)
                        {
                            cont_frames_MP = 0;
                            coluna_atual_MP--;
                        }

                    }

         else
        {
            if (cont_frames_item>=90)
            {
               historia = false;
            }
            velx = 0;
            active = false;
            oracao = false;
            historia = false;

        }



            if(!poder)
            {
                posx_tiro =x+al_get_bitmap_width(keen)/4;
                posy_tiro =y;
            }

            if(posx_tiro>=800)
            {
                poder = false;
            }

        score--;
        cont_frames_pulo++;
        cont_frames_poder++;

            if (cont_frames_pulo >= frames_sprite_pulo)
            {
                cont_frames_pulo=0;
                coluna_atual_pulo++;

                if (coluna_atual_pulo >= colunas_pulo)
                {
                    coluna_atual_pulo=0;
                    regiao_y_folha_pulo = linha_atual_pulo * altura_sprite_pulo;
                }

                    regiao_x_folha_pulo = coluna_atual_pulo * largura_sprite_pulo;
            }

            if(cont_frames_poder>=frames_sprite_poder && poder)
            {
                cont_frames_poder = 0;
                coluna_atual_poder++;

                if(coluna_atual_poder>=colunas_poder)
                {
                    coluna_atual_poder = 0;
                }

                regiao_x_folha_poder = coluna_atual_poder*largura_sprite_poder;
                posx_tiro += velx_tiro;
                posy_tiro +=0;
            }
                 if(firereliq)
            {
                cont_frames_item++;
                cont_frames_reliq++;

                 if (cont_frames_reliq >= frames_sprite_reliq)
                {
                    cont_frames_reliq=0;
                    coluna_atual_reliq++;

                    if (coluna_atual_reliq >= colunas_reliq)
                    {
                        coluna_atual_reliq=0;
                    }

                    regiao_x_folha_reliq = coluna_atual_reliq * largura_sprite_reliq;
                }
                if (cont_frames_item >= 90)
                {
                    firereliq = false;
                    permapoder = true;

                }


            }

    if (oracao)
{
    vuneravel = false;
}

    largura_sprite_HP = 9*coluna_atual_HP;
    largura_sprite_BOSS1HP = 9*coluna_atual_BOSS1HP;
    largura_sprite_MP = 9*coluna_atual_MP;

            if (Colisao2(x,y,posx,posy,30,50,181,181) && boss1vive && vuneravel)
            {
          {
               cont_frames_dano++;
            if (cont_frames_dano>=2 && coluna_atual_HP>2)
            {
                coluna_atual_HP-=1;
                cont_frames_dano = 0;
            }
            }
            }

            if (Colisao(posx_tiro,posy_tiro,posx,posy,30,30) && poder)
            {
                coluna_atual_BOSS1HP--;
                poder= false;
                if(coluna_atual_BOSS1HP <= 2)
                {
                boss1 = false;
                boss1morre = true;
                score += 5000;
                boss1vive = false;
                tiro = false;

                }

            }
             if (Colisao(x,y,lobox,loboy,32,64) && lobovive)
            {
               cont_frames_dano++;
            if (cont_frames_dano>=5 && coluna_atual_HP>2)
            {
                coluna_atual_HP-=1;
                cont_frames_dano = 0;
            }

            }
           if (Colisao2(x,y+400,bolax[0],bolay[0],al_get_bitmap_width(keen)/5,al_get_bitmap_height(keen)/7,(al_get_bitmap_width(ESFERA1)),(al_get_bitmap_height(ESFERA1))))
            {
               cont_frames_dano++;
            if (cont_frames_dano>=5 && coluna_atual_HP>2)
            {
                coluna_atual_HP-=1;
                cont_frames_dano = 0;
            }
            }
           if (Colisao2(x,y+900,bolax[1],bolay[1],al_get_bitmap_width(keen)/5,al_get_bitmap_height(keen)/7,(al_get_bitmap_width(ESFERA1)),(al_get_bitmap_height(ESFERA1))))
            {
               cont_frames_dano++;
            if (cont_frames_dano>=5 && coluna_atual_HP>2)
            {
                coluna_atual_HP-=1;
                cont_frames_dano = 0;
            }
            }
 if (Colisao2(x,y+450,bolax[2],bolay[2],al_get_bitmap_width(keen)/5,al_get_bitmap_height(keen)/7,(al_get_bitmap_width(ESFERA1)),(al_get_bitmap_height(ESFERA1))))
            {
               cont_frames_dano++;
            if (cont_frames_dano>=5 && coluna_atual_HP>2)
            {
                coluna_atual_HP-=1;
                cont_frames_dano = 0;
            }
            }
           if (Colisao2(x,y+900,bolax[3],bolay[3],al_get_bitmap_width(keen)/5,al_get_bitmap_height(keen)/7,(al_get_bitmap_width(ESFERA1)),(al_get_bitmap_height(ESFERA1))))
            {
               cont_frames_dano++;
            if (cont_frames_dano>=5 && coluna_atual_HP>2)
            {
                coluna_atual_HP-=1;
                cont_frames_dano = 0;
            }
            }
           if (Colisao2(x,y+400,bolax[4],bolay[4],al_get_bitmap_width(keen)/5,al_get_bitmap_height(keen)/7,(al_get_bitmap_width(ESFERA1)),(al_get_bitmap_height(ESFERA1))))
            {
               cont_frames_dano++;
            if (cont_frames_dano>=5 && coluna_atual_HP>2)
            {
                coluna_atual_HP-=1;
                cont_frames_dano = 0;
            }
            }
            if (Colisao2(x,y+830,bolax[5],bolay[5],al_get_bitmap_width(keen)/5,al_get_bitmap_height(keen)/7,(al_get_bitmap_width(ESFERA1)),(al_get_bitmap_height(ESFERA1))))
            {
               cont_frames_dano++;
            if (cont_frames_dano>=5 && coluna_atual_HP>2)
            {
                coluna_atual_HP-=1;
                cont_frames_dano = 0;
            }
            }
             if (Colisao2(x,y+400,bolax[6],bolay[6],al_get_bitmap_width(keen)/5,al_get_bitmap_height(keen)/7,(al_get_bitmap_width(ESFERA1)),(al_get_bitmap_height(ESFERA1))))
            {
               cont_frames_dano++;
            if (cont_frames_dano>=5 && coluna_atual_HP>2)
            {
                coluna_atual_HP-=1;
                cont_frames_dano = 0;
            }
            }
             if (Colisao2(x,y+900,bolax[7],bolay[7],al_get_bitmap_width(keen)/5,al_get_bitmap_height(keen)/7,(al_get_bitmap_width(ESFERA1)),(al_get_bitmap_height(ESFERA1))))
            {
               cont_frames_dano++;
            if (cont_frames_dano>=5 && coluna_atual_HP>2)
            {
                coluna_atual_HP-=1;
                cont_frames_dano = 0;
            }
            }
             if (Colisao2(x,y+360,bolax[8],bolay[8],al_get_bitmap_width(keen)/5,al_get_bitmap_height(keen)/7,(al_get_bitmap_width(ESFERA1)),(al_get_bitmap_height(ESFERA1))))
            {
               cont_frames_dano++;
            if (cont_frames_dano>=5 && coluna_atual_HP>2)
            {
                coluna_atual_HP-=1;
                cont_frames_dano = 0;
            }
            }
             if (Colisao2(x,y+900,bolax[9],bolay[9],al_get_bitmap_width(keen)/5,al_get_bitmap_height(keen)/7,(al_get_bitmap_width(ESFERA1)),(al_get_bitmap_height(ESFERA1))))
            {
               cont_frames_dano++;
            if (cont_frames_dano>=5 && coluna_atual_HP>2)
            {
                coluna_atual_HP-=1;
                cont_frames_dano = 0;
            }
            }
             if (Colisao2(x,y,bolax[10],bolay[10],al_get_bitmap_width(keen)/5,al_get_bitmap_height(keen)/7,(al_get_bitmap_width(ESFERA1)),(al_get_bitmap_height(ESFERA1))))
            {
               cont_frames_dano++;
            if (cont_frames_dano>=5 && coluna_atual_HP>2)
            {
                coluna_atual_HP-=1;
                cont_frames_dano = 0;
            }
            }
             if (Colisao2(x,y+900,bolax[11],bolay[11],al_get_bitmap_width(keen)/5,al_get_bitmap_height(keen)/7,(al_get_bitmap_width(ESFERA1)),(al_get_bitmap_height(ESFERA1))))
            {
               cont_frames_dano++;
            if (cont_frames_dano>=5 && coluna_atual_HP>2)
            {
                coluna_atual_HP-=1;
                cont_frames_dano = 0;
            }
            }

            if (Colisao(posx_tiro,posy_tiro,lobox,loboy,30,30) && poder)
            {
                cont_dano++;
                poder = false;
                if(cont_dano >= 1)
                {
                lobo = false;
                score += 1000;
                lobovive = false;
                velobox = 0;
                poder = false;
                }

            }

            if (coluna_atual_HP <= 2)
            {
                historia = true;
                morte = true;
                vuneravel = false;
                cont_frames_morto++;
                if(cont_frames_morto>=12)
                {
                morte = false;
                    if(cont_frames_morto>=24)
                    {
                    coluna_atual_HP = 12;
                    cont_frames_morto = 0;
                    vuneravel = true;
                    }
                }
                if(cont_frames_morto == 6)
                {
                    cont_vidas--;
                       if(cont_vidas<0)
                        {
                        done4 = true;
                        }
                }
            }


            if(active)
            {
                sourceX += al_get_bitmap_width(keen)/5;
            }

            else
            {
                sourceX = 0;
            }

            if(sourceX>=al_get_bitmap_width(keen))
            {
                sourceX = 0;
            }

    sourceY = dir;

        }

        else if(events.timer.source == BOLAtimer)
        {

            if(cont_passos_boss_inicio>=1500)

{
bolay[0] += 1;bolay[2] += 2;bolay[4] += 3;bolay[6] += 1;bolay[8] += 2;bolay[10] += 3;
              if (bolay[0]>=1000)
              {
                  bolay[0] = 0;
              }
               if (bolay[2]>=1000)
              {
                  bolay[2] = 0;
              }
               if (bolay[4]>=1000)
              {
                  bolay[4] = 0;
              }
               if (bolay[6]>=1000)
              {
                  bolay[6] = 0;
              }
               if (bolay[8]>=1000)
              {
                  bolay[8] = 0;
              }
               if (bolay[10]>=1000)
              {
                  bolay[10] = 0;
              }

                bolay[1] += 1;bolay[3] += 2;bolay[5] += 3;bolay[7] += 1;bolay[9] += 2;bolay[11] += 3;
              if (bolay[1]>=2000)
              {
                  bolay[1] = 0;
              }
               if (bolay[3]>=2000)
              {
                  bolay[3] = 0;
              }
               if (bolay[5]>=2000)
              {
                  bolay[5] = 0;
              }
               if (bolay[7]>=2000)
              {
                  bolay[7] = 0;
              }
               if (bolay[9]>=2000)
              {
                  bolay[9] = 0;
              }
               if (bolay[11]>=2000)
              {
                  bolay[11] = 0;
              }

}

            cont_frames_boss1++;
            cont_frames_fogueira++;
            cont_frames_lobo++;
            fogx += velfog;
            if (fogx>=al_get_bitmap_width(FOG))
            {
                fogx = 0;
            }

 if(cont_frames_lobo>=frames_sprite_lobo && lobovive)
            {
                cont_frames_lobo = 0;
                coluna_atual_lobo++;

                if(coluna_atual_lobo>=colunas_lobo)
                {
                    coluna_atual_lobo = 0;
                    if(lobox>=1200 || lobox<=250+al_get_bitmap_width(LOBO)/5)
                    {
                        linha_atual_lobo = (linha_atual_lobo+1) % linhas_lobo;
                        regiao_y_folha_lobo = linha_atual_lobo*altura_sprite_lobo;
                        velobox = -velobox;

                    }
                }

                regiao_x_folha_lobo = coluna_atual_lobo*largura_sprite_lobo;
                lobox += velobox;
            }

              if (cont_frames_fogueira >= frames_sprite_fogueira)
            {
                cont_frames_fogueira=0;
                coluna_atual_fogueira++;

                if (coluna_atual_fogueira >= colunas_fogueira)
                {
                    coluna_atual_fogueira = 0;

                }
                regiao_x_folha_fogueira = coluna_atual_fogueira * largura_sprite_fogueira;

            }

            if(cont_frames_boss1>=frames_sprite_boss1 && boss1)
            {
                cont_frames_boss1 = 0;
                coluna_atual_boss1++;

                if(coluna_atual_boss1>=colunas_boss1)
                {
                    coluna_atual_boss1 = 0;
                }

                regiao_x_folha_boss1 = coluna_atual_boss1*largura_sprite_boss1;


            }

              if(boss1morre)
              {
                cont_frames_boss_morre++;
                  cont_frames_boss1morto++;

                  if(cont_frames_boss1morto>=frames_sprite_boss1morto)
            {
                cont_frames_boss1morto = 0;
                coluna_atual_boss1morto++;

                if(coluna_atual_boss1morto>=colunas_boss1morto)
                {
                    coluna_atual_boss1morto = 28;
                }

                regiao_x_folha_boss1morto = coluna_atual_boss1morto*largura_sprite_boss1morto;


            }

              }
                 if(cont_frames_boss_morre>=170)
            {
                iriguchi=true;
            }

            if (chest && x>=700 && !lobovive && cont_passos_boss_inicio <=1500)
            {
                cont_passos_boss_inicio++;
                historia = true;
            }

            if (cont_passos_boss_inicio>=1 && cont_passos_boss_inicio <= 1000)
            {
                posx = 730;
                posy +=0.3;
            }


            if(boss1 && cont_passos_boss_inicio > 1500)
            {

                srand(time(NULL));
                iAleatorio = rand()%10 -4,5;
                iAleatorio2 = rand()%10 -4,5 ;
                posx+=2*iAleatorio;
                posy+=2*iAleatorio2;


                //se passou das bordas, inverte a direcao

                if (posx<=200 && posy>=ALTURA_TELA-350)
                    posx = 200;

                if (posx>=1300)
                    posx = 1300;

                if (posy<=181)
                    posy=181;

                if(posy>=ALTURA_TELA-200)
                    posy = ALTURA_TELA-200;
            }


            cont_frames_oracao[1]++;
            cont_frames_oracao[2]++;
            cont_frames_oracao[3]++;
            cont_frames_oracao[4]++;
            cont_frames_oracao[5]++;
            cont_frames_oracao[6]++;

             if (cont_frames_oracao[1] >= frames_sprite_oracao[1])
            {
                cont_frames_oracao[1] = 0;
                coluna_atual_oracao[1]++;

                if (coluna_atual_oracao[1] >= colunas_oracao[1])
                {
                    coluna_atual_oracao[1] = 0;
                    linha_atual_oracao[1]++;

                }
                if (linha_atual_oracao[1] > linhas_oracao[1])

                {
                    linha_atual_oracao[1] = 0;

                }
                regiao_x_folha_oracao[1] = coluna_atual_oracao[1] * largura_sprite_oracao[1];
                regiao_y_folha_oracao[1] = linha_atual_oracao[1] * altura_sprite_oracao[1];
            }
             if (cont_frames_oracao[2] >= frames_sprite_oracao[2])
             {
                 cont_frames_oracao[2] = 0;
                 coluna_atual_oracao[2]++;

                 if (coluna_atual_oracao[2] >= colunas_oracao[2])
                 {
                     coluna_atual_oracao[2] = 0;
                     linha_atual_oracao[2]++;

                 }
                  if (linha_atual_oracao[2] > linhas_oracao[2])
                  {
                       linha_atual_oracao[2] = 0;
                  }
                  regiao_x_folha_oracao[2] = coluna_atual_oracao[2] * largura_sprite_oracao[2];
                  regiao_y_folha_oracao[2] = linha_atual_oracao[2] * altura_sprite_oracao[2];
             }
             if (cont_frames_oracao[3] >= frames_sprite_oracao[3])
            {
                cont_frames_oracao[3] = 0;
                coluna_atual_oracao[3]++;

                if (coluna_atual_oracao[3] >= colunas_oracao[3])
                {
                    coluna_atual_oracao[3] = 0;
                    linha_atual_oracao[3]++;

                }
                if (linha_atual_oracao[3] > linhas_oracao[3])

                {
                    linha_atual_oracao[3] = 0;

                }
                regiao_x_folha_oracao[3] = coluna_atual_oracao[3] * largura_sprite_oracao[3];
                regiao_y_folha_oracao[3] = linha_atual_oracao[3] * altura_sprite_oracao[3];
            }
            if (cont_frames_oracao[4] >= frames_sprite_oracao[4])
            {
                cont_frames_oracao[4] = 0;
                coluna_atual_oracao[4]++;

                if (coluna_atual_oracao[4] >= colunas_oracao[4])
                {
                    coluna_atual_oracao[4] = 0;
                    linha_atual_oracao[4]++;

                }
                if (linha_atual_oracao[4] > linhas_oracao[4])

                {
                    linha_atual_oracao[4] = 0;

                }
                regiao_x_folha_oracao[4] = coluna_atual_oracao[4] * largura_sprite_oracao[4];
                regiao_y_folha_oracao[4] = linha_atual_oracao[4] * altura_sprite_oracao[4];
            }
            if (cont_frames_oracao[5] >= frames_sprite_oracao[5])
            {
                cont_frames_oracao[5] = 0;
                coluna_atual_oracao[5]++;

                if (coluna_atual_oracao[5] >= colunas_oracao[5])
                {
                    coluna_atual_oracao[5] = 0;
                    linha_atual_oracao[5]++;

                }
                if (linha_atual_oracao[5] > linhas_oracao[5])

                {
                    linha_atual_oracao[5] = 0;

                }
                regiao_x_folha_oracao[5] = coluna_atual_oracao[5] * largura_sprite_oracao[5];
                regiao_y_folha_oracao[5] = linha_atual_oracao[5] * altura_sprite_oracao[5];
            }

             if (cont_frames_oracao[6] >= frames_sprite_oracao[6])
            {
                cont_frames_oracao[6] = 0;
                coluna_atual_oracao[6]++;

                if (coluna_atual_oracao[6] >= colunas_oracao[6])
                {
                    coluna_atual_oracao[6] = 0;
                    linha_atual_oracao[6]++;

                }
                if (linha_atual_oracao[6] > linhas_oracao[6])

                {
                    linha_atual_oracao[6] = 0;

                }
                regiao_x_folha_oracao[6] = coluna_atual_oracao[6] * largura_sprite_oracao[6];
                regiao_y_folha_oracao[6] = linha_atual_oracao[6] * altura_sprite_oracao[6];
            }

        }

    }


if(draw)
{

    al_draw_bitmap(FUNDONEVE2,-200,-200,NULL);
    al_draw_bitmap(FUNDONEVE2,400,-200,NULL);
    al_draw_tinted_bitmap(FADE,al_map_rgba(0,0,0,220),0,-175,NULL);
    al_draw_tinted_bitmap(FADE,al_map_rgba(0,0,0,220),al_get_bitmap_width(FADE),-175,NULL);
    al_draw_bitmap(CHAOGELO,0,500,NULL);
    al_draw_bitmap(CHAOGELO,800,500,NULL);
    al_draw_bitmap(DEADTREE,600,130,NULL);
    al_draw_bitmap(PEDRABASE,-100,180,NULL);
    al_draw_bitmap_region(TAKARABAKO,regiao_x_folha_bau,regiao_y_folha_bau,largura_sprite_bau, altura_sprite_bau,105,170,0);
    al_draw_bitmap_region(FOGUEIRA,regiao_x_folha_fogueira,regiao_y_folha_fogueira,largura_sprite_fogueira,altura_sprite_fogueira,50,150,0);
    if(iriguchi)
    {
         al_draw_bitmap(IRIGUCHI,500,300,NULL);
    }
    if (pulo)
    {
        al_draw_bitmap_region(keen,regiao_x_folha_pulo,regiao_y_folha_pulo,largura_sprite_pulo,altura_sprite_pulo,x,y,0);
    }
        if(!poder && !pulo)
        {
            al_draw_bitmap_region(keen,sourceX,sourceY*al_get_bitmap_height(keen)/7,30,50,x,y,NULL);
        }
        if(poder)
        {
            if(!pulo)
            {
                al_draw_bitmap_region(keen,sourceX,RIGHT*al_get_bitmap_height(keen)/7,30,50,x,y,NULL);
               al_draw_bitmap_region(ATIRA,0,0,40,50,x,y,NULL);
            }
            al_draw_bitmap_region(PODER,regiao_x_folha_poder,regiao_y_folha_poder,largura_sprite_poder,altura_sprite_poder,posx_tiro,posy_tiro+10,0);
        }
         if(lobo)
    {
         al_draw_bitmap_region(LOBO,regiao_x_folha_lobo,regiao_y_folha_lobo,largura_sprite_lobo,altura_sprite_lobo, lobox, loboy, 0);
    }
     if(!lobo)
    {
         al_draw_bitmap_region(LOBO,320,0,64,32,lobox,loboy,0);
    }
    al_draw_bitmap(REFUGIO,0,370,NULL);

    if(boss1vive && cont_passos_boss_inicio >1500)
    {
         al_draw_tinted_bitmap_region(BOSS1,al_map_rgb(255,0,0),regiao_x_folha_boss1,regiao_y_folha_boss1,largura_sprite_boss1,altura_sprite_boss1,posx,posy,0);
        al_draw_bitmap_region(BOSS1HP,regiao_x_folha_BOSS1HP,regiao_y_folha_BOSS1HP,largura_sprite_BOSS1HP,altura_sprite_BOSS1HP,posx,posy-50,NULL);
        al_draw_tinted_bitmap(ESFERA1,al_map_rgba(100,0,0,100),bolax[0],bolay[0]-400,NULL);
    al_draw_tinted_bitmap(ESFERA1,al_map_rgba(100,0,0,100),bolax[1],bolay[1]-900,NULL);
    al_draw_tinted_bitmap(ESFERA1,al_map_rgba(100,0,0,100),bolax[2],bolay[2]-400,NULL);
    al_draw_tinted_bitmap(ESFERA1,al_map_rgba(100,0,0,100),bolax[3],bolay[3]-900,NULL);
    al_draw_tinted_bitmap(ESFERA1,al_map_rgba(100,0,0,100),bolax[4],bolay[4]-400,NULL);
    al_draw_tinted_bitmap(ESFERA1,al_map_rgba(100,0,0,100),bolax[5],bolay[5]-900,NULL);
    al_draw_tinted_bitmap(ESFERA1,al_map_rgba(100,0,0,100),bolax[6],bolay[6]-400,NULL);
    al_draw_tinted_bitmap(ESFERA1,al_map_rgba(100,0,0,100),bolax[7],bolay[7]-900,NULL);
    al_draw_tinted_bitmap(ESFERA1,al_map_rgba(100,0,0,100),bolax[8],bolay[8]-400,NULL);
    al_draw_tinted_bitmap(ESFERA1,al_map_rgba(100,0,0,100),bolax[9],bolay[9]-900,NULL);
    al_draw_tinted_bitmap(ESFERA1,al_map_rgba(100,0,0,100),bolax[10],bolay[10]-400,NULL);
    al_draw_tinted_bitmap(ESFERA1,al_map_rgba(100,0,0,100),bolax[11],bolay[11]-900,NULL);

    }
    if(boss1vive && cont_passos_boss_inicio<=1500)
    {
      al_draw_tinted_bitmap_region(BOSS1INICIO,al_map_rgb(255,0,0),0,0,62,110,posx,posy,0);
    }
    if(firereliq)
    {
         al_draw_bitmap_region(FIRERELIQ,regiao_x_folha_reliq,0,largura_sprite_reliq,altura_sprite_reliq,150,90,0);
         al_draw_bitmap(MENSAGEM,250,100,NULL);
    }
    if(boss1morre)
    {
         al_draw_tinted_bitmap_region(BOSS1MORRE,al_map_rgb(255,0,0),regiao_x_folha_boss1morto,0,largura_sprite_boss1morto,altura_sprite_boss1morto,posx+100,posy,0);
    }
     if (oracao)
    {

        al_draw_bitmap(ESCUDO,x-113,y-130,NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[1],regiao_y_folha_oracao[1],largura_sprite_oracao[1], altura_sprite_oracao[1], x+15, y+15, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[2],regiao_y_folha_oracao[2],largura_sprite_oracao[2], altura_sprite_oracao[2], x-30, y+30, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[3],regiao_y_folha_oracao[3],largura_sprite_oracao[3], altura_sprite_oracao[3], x-70, y, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[4],regiao_y_folha_oracao[4],largura_sprite_oracao[4], altura_sprite_oracao[4], x-70, y-45, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[5],regiao_y_folha_oracao[5],largura_sprite_oracao[5], altura_sprite_oracao[5], x+15, y-45, NULL);
        al_draw_bitmap_region(ORACAO,regiao_x_folha_oracao[6],regiao_y_folha_oracao[6],largura_sprite_oracao[6], altura_sprite_oracao[6], x-30,y-60,NULL);

    }
    if (cruz)
    {
       al_draw_bitmap(CRUZ,cruzx,cruzy,NULL);
    }

    al_draw_rotated_bitmap(FOG,fogx,300,0,0,3.1415,NULL);
    al_draw_rotated_bitmap(FOG,fogx+2048,300,0,0,3.1415,NULL);
    al_draw_rotated_bitmap(FOG,fogx+1024,300,0,0,3.1415,NULL);
    al_draw_bitmap_region(HP,regiao_x_folha_HP,regiao_y_folha_HP,largura_sprite_HP,altura_sprite_HP,cameraPosition[0]+50,cameraPosition[1]-80,NULL);
    al_draw_bitmap_region(MP,regiao_x_folha_MP,regiao_y_folha_MP,largura_sprite_MP,altura_sprite_MP,cameraPosition[0]+50,cameraPosition[1]-50,NULL);
     al_draw_textf(font,al_map_rgb(255,255,255),cameraPosition[0]+1100,cameraPosition[1]-110,ALLEGRO_ALIGN_CENTER, "SCORE: %i", 1000 + score);
    al_draw_textf(font2,al_map_rgb(255,255,255),cameraPosition[0]+50,cameraPosition[1]-110,ALLEGRO_ALIGN_CENTER, "X %i", cont_moedas_prata);
    al_draw_textf(font2,al_map_rgb(255,255,255),cameraPosition[0]+150,cameraPosition[1]-110,ALLEGRO_ALIGN_CENTER, "X %i ", cont_vidas);
    al_draw_bitmap_region(keen,5,300,21,21,cameraPosition[0]+80,cameraPosition[1]-113,0);
    al_draw_bitmap_region(MOEDA,regiao_x_folha_moedas,regiao_y_folha_moedas,largura_sprite_moedas,altura_sprite_moedas,cameraPosition[0]+10,cameraPosition[1]-113,0);
    //al_draw_bitmap(FOG,fogx,150,NULL);
   // al_draw_bitmap(FOG,fogx+1024,150,NULL);
    //al_draw_bitmap(FOG,fogx-1024,150,NULL);

    if (morte)
{
    al_clear_to_color(al_map_rgb(0,0,0));
    al_draw_bitmap(morto,x,y,NULL);
    al_draw_textf(font2,al_map_rgb(255,255,255),120,10,ALLEGRO_ALIGN_CENTER, "X %i ", cont_vidas);
    al_draw_bitmap_region(keen,5,300,21,21,80,8,0);
    al_flip_display();

}

    al_flip_display();
    al_clear_to_color(al_map_rgb(0,0,0));

}
}

while(!done5)
{
ALLEGRO_EVENT events;
al_wait_for_event(event_queue, &events);
al_get_keyboard_state(&keyState);
cameraUpdate(cameraPosition,x,y,35,200);
al_identity_transform(&camera);
al_translate_transform(&camera, -cameraPosition[0],-cameraPosition[1]);
al_use_transform(&camera);

    if(events.type == ALLEGRO_EVENT_KEY_DOWN)
    {

        switch (events.keyboard.keycode)
        {
        case ALLEGRO_KEY_ESCAPE:
            done5 = true;
        case ALLEGRO_KEY_SPACE:
             if(jump)
            {
                vely -= jumpspeed;
                pulo = true;

            }

        }
    }
     if(events.type == ALLEGRO_EVENT_KEY_UP)
    {

        switch (events.keyboard.keycode)
        {
        case ALLEGRO_KEY_Z:
        dir = 0;
        }
    }
    if(events.type == ALLEGRO_EVENT_KEY_UP && permapoder)
    {
        switch (events.keyboard.keycode)
        {
            case ALLEGRO_KEY_X:
            poder = true;

        }
    }
    else if (events.type == ALLEGRO_EVENT_TIMER)
    {


        if(events.timer.source == timer)
        {
            active = true;
            draw = true;
            jump = false;
            noar = true;
            vely +=gravity;
            y += vely;
  if(noar)
            {
                pulo=true;
            }

        if (x<=310 && y>=470 && y<=480)
        {

            y = 470;
                vely = 0;
                pulo = false;
                jump = true;
                noar = false;
        }

         if (x>=340 && x<=510 && y>=360 && y<=370)
        {

            y = 360;
                vely = 0;
                pulo = false;
                jump = true;
                noar = false;
        }

        if (x>=750 && x<=1100 && y>=360 && y<=370)
        {

            y = 360;
                vely = 0;
                pulo = false;
                jump = true;
                noar = false;
        }

         if (x>=1200 && x<=1510 && y>=300 && y<=310)
        {

            y = 300;
                vely = 0;
                pulo = false;
                jump = true;
                noar = false;
        }



            if(!poder)
            {
                posx_tiro =x+al_get_bitmap_width(keen)/4;
                posy_tiro =y;
            }

            if(posx_tiro>=800)
            {
                poder = false;
            }

        score--;
        cont_frames_pulo++;
        cont_frames_poder++;

            if (cont_frames_pulo >= frames_sprite_pulo)
            {
                cont_frames_pulo=0;
                coluna_atual_pulo++;

                if (coluna_atual_pulo >= colunas_pulo)
                {
                    coluna_atual_pulo=0;
                    regiao_y_folha_pulo = linha_atual_pulo * altura_sprite_pulo;
                }

                    regiao_x_folha_pulo = coluna_atual_pulo * largura_sprite_pulo;
            }

            if(cont_frames_poder>=frames_sprite_poder && poder)
            {
                cont_frames_poder = 0;
                coluna_atual_poder++;

                if(coluna_atual_poder>=colunas_poder)
                {
                    coluna_atual_poder = 0;
                }

                regiao_x_folha_poder = coluna_atual_poder*largura_sprite_poder;
                posx_tiro += velx_tiro;
                posy_tiro +=0;
            }

            if(al_key_down(&keyState,ALLEGRO_KEY_RIGHT))
            {
                x += movespeed;
                dir = RIGHT;
            }

            else if(al_key_down(&keyState,ALLEGRO_KEY_UP))
            {
                dir = UP;
                velx = 0;
            }
            else if(al_key_down(&keyState,ALLEGRO_KEY_DOWN))
            {
                dir = DOWN;
                velx = 0;
            }

            else if(al_key_down(&keyState,ALLEGRO_KEY_LEFT))
            {

                if (x<=0)
                {
                    x +=movespeed;
                    x = 1;
                }

                x -= movespeed;
                dir = LEFT;
            }
            else if(al_key_down(&keyState,ALLEGRO_KEY_C) && x >= 105 && x<=140 && y <=200 && y>=180)
            {
//POR HORA N TEM FUNÇAO
            }

            else
            {
                velx = 0;
                active = false;
                oracao = false;


            }

 if(active)
            {
                sourceX += al_get_bitmap_width(keen)/5;
            }

            else
            {
                sourceX = 0;
            }

            if(sourceX>=al_get_bitmap_width(keen))
            {
                sourceX = 0;
            }

    sourceY = dir;

        }

else if(events.timer.source == BOLAtimer)
{
           if (bat[0])
    {
        cont_frame_bat++;
            if(cont_frame_bat>=frames_sprite_bat)
            {
                cont_frame_bat = 0;
                coluna_atual_bat++;

                if(coluna_atual_bat>=colunas_bat)
                {
                    coluna_atual_bat = 0;

                }

                regiao_x_folha_bat = coluna_atual_bat*largura_sprite_bat;

            }
    }//

}



if(draw)
{
    al_draw_bitmap(ARMADILHA,500,300,NULL);
    al_draw_bitmap(ARVORECAVE1,0,0,NULL);
    al_draw_bitmap(ARVORECAVE2,300,100,NULL);
    al_draw_bitmap(PLATACAVE1,0,480,NULL);
    al_draw_bitmap(PLATACAVE3,350,380,NULL);
    al_draw_bitmap(PLATACAVE4,750,380,NULL);
    al_draw_bitmap(PLATACAVE1,1200,300,NULL);
     al_draw_textf(font,al_map_rgb(255,255,255),cameraPosition[0]+1100,cameraPosition[1],ALLEGRO_ALIGN_CENTER, "SCORE: %i", 1000 + score);
    al_draw_textf(font2,al_map_rgb(255,255,255),cameraPosition[0]+50,cameraPosition[1]+10,ALLEGRO_ALIGN_CENTER, "X %i", cont_moedas_prata);
    al_draw_textf(font2,al_map_rgb(255,255,255),cameraPosition[0]+150,cameraPosition[1]+10,ALLEGRO_ALIGN_CENTER, "X %i ", cont_vidas);
    al_draw_bitmap_region(BAT,regiao_x_folha_bat,regiao_y_folha_bat,largura_sprite_bat,altura_sprite_bat,batx[0],baty[0],NULL);
    al_draw_bitmap_region(BAT,regiao_x_folha_bat,regiao_y_folha_bat,largura_sprite_bat,altura_sprite_bat,batx[1],baty[1],NULL);
    al_draw_bitmap_region(BAT,regiao_x_folha_bat,regiao_y_folha_bat,largura_sprite_bat,altura_sprite_bat,batx[2],baty[2],NULL);
    al_draw_bitmap_region(BAT,regiao_x_folha_bat,regiao_y_folha_bat,largura_sprite_bat,altura_sprite_bat,batx[3],baty[3],NULL);
    al_draw_bitmap_region(BAT,regiao_x_folha_bat,regiao_y_folha_bat,largura_sprite_bat,altura_sprite_bat,batx[4],baty[4],NULL);

       if (pulo)
    {
        al_draw_bitmap_region(keen,regiao_x_folha_pulo,regiao_y_folha_pulo,largura_sprite_pulo,altura_sprite_pulo,x,y,0);
    }
        if(!poder && !pulo)
        {
            al_draw_bitmap_region(keen,sourceX,sourceY*al_get_bitmap_height(keen)/7,30,50,x,y,NULL);
        }
        if(poder)
        {
            if(!pulo)
            {
               al_draw_bitmap_region(ATIRA,0,0,40,50,x,y,NULL);
            }
            al_draw_bitmap_region(PODER,regiao_x_folha_poder,regiao_y_folha_poder,largura_sprite_poder,altura_sprite_poder,posx_tiro,posy_tiro+10,0);
        }
    al_draw_bitmap_region(HP,regiao_x_folha_HP,regiao_y_folha_HP,largura_sprite_HP,altura_sprite_HP,cameraPosition[0]+50,cameraPosition[1]+30,NULL);
    al_draw_bitmap_region(MP,regiao_x_folha_MP,regiao_y_folha_MP,largura_sprite_MP,altura_sprite_MP,cameraPosition[0]+50,cameraPosition[1]+60,NULL);
    al_draw_bitmap_region(keen,5,300,21,21,cameraPosition[0]+80,cameraPosition[1]+8,0);
    al_draw_bitmap_region(MOEDA,regiao_x_folha_moedas,regiao_y_folha_moedas,largura_sprite_moedas,altura_sprite_moedas,cameraPosition[0]+10,cameraPosition[1]+10,0);
    al_flip_display();
    al_clear_to_color(al_map_rgb(0,0,0));

}

if (morte)
{
    al_clear_to_color(al_map_rgb(0,0,0));
    al_draw_bitmap(morto,x,y,NULL);
    al_draw_textf(font2,al_map_rgb(255,255,255),120,10,ALLEGRO_ALIGN_CENTER, "X %i ", cont_vidas);
    al_draw_bitmap_region(keen,5,300,21,21,80,8,0);
    al_flip_display();
    al_rest(2.0);
}


    }
        }

    al_destroy_bitmap(fundo);
    al_destroy_bitmap(BOLA);
    al_destroy_display(display);
    al_destroy_timer(timer);
    al_destroy_timer(BOLAtimer);
    al_destroy_event_queue(event_queue);
    al_destroy_bitmap(keen);
    al_destroy_bitmap(INU);
    al_destroy_bitmap(morto);
    al_destroy_bitmap(MOEDA);
    al_destroy_font(font);
    al_destroy_bitmap(TIRO);
    al_destroy_bitmap(PLATAFORMA);
    al_destroy_bitmap(PORTA);
    al_destroy_bitmap(PLATAGELO1);
    al_destroy_bitmap(PLATAPEDRA3);
    al_destroy_bitmap(CHAOGELO);
    al_destroy_bitmap(PINHO);
    al_destroy_bitmap(PINHO2);
    al_destroy_bitmap(PINHO3);
    al_destroy_bitmap(PINHO4);
    al_destroy_bitmap(LOBO);
    al_destroy_bitmap(FUNDONEVE);
    al_destroy_bitmap(BOSS1);
    al_destroy_bitmap(FUNDONEVE2);
    al_destroy_bitmap(FOGUEIRA);
    al_destroy_bitmap(PODER);
    al_destroy_bitmap(TAKARABAKO);
    al_destroy_bitmap(FIRERELIQ);
    al_destroy_bitmap(MENSAGEM);
    al_destroy_bitmap(CASA);
    al_destroy_bitmap(ARVOREF);
    al_destroy_bitmap(ARVOREF2);
    al_destroy_bitmap(ARVOREF3);
    al_destroy_bitmap(PLACA);
    al_destroy_bitmap(RAIZ);
    al_destroy_bitmap(KINOKO);
    al_destroy_bitmap(TRONCO);
    al_destroy_bitmap(IRIGUCHI);
    al_destroy_bitmap(PLATACAVE1);
    al_destroy_bitmap(PLATACAVE2);
    al_destroy_bitmap(PLATACAVE3);
    al_destroy_bitmap(PLATACAVE4);
    al_destroy_bitmap(PLATACAVE5);
    al_destroy_bitmap(PLATACAVE6);
    al_destroy_bitmap(AGUACAVE1);
    al_destroy_bitmap(AGUACAVE2);
    al_destroy_bitmap(ESPIRITOS);
    al_destroy_bitmap(ARMADILHA);
    al_destroy_bitmap(MESA);
    al_destroy_bitmap(MESA2);
    al_destroy_bitmap(GAVETAS);
    al_destroy_bitmap(FOGAO);
    al_destroy_bitmap(ESTANTELIVROS);
    al_destroy_bitmap(CAMA);
    al_destroy_bitmap(ESPELHO);
    al_destroy_bitmap(BELICHE);
    al_destroy_bitmap(ARMARIO);
    al_destroy_bitmap(COZINHA);
    al_destroy_bitmap(CRIADO);
    al_destroy_bitmap(RELOGIO);
    al_destroy_bitmap(TAPETE);
    al_destroy_bitmap(VELA2);
    al_destroy_bitmap(PRATELEIRA);
    al_destroy_bitmap(TSUKUE);
    al_destroy_bitmap(JANELA2);
    al_destroy_bitmap(ORGAO);
    al_destroy_bitmap(LAREIRA);
    al_destroy_bitmap(MESA3);
    al_destroy_bitmap(CARPET);
    al_destroy_bitmap(PORTA2);
    al_destroy_bitmap(ACIMAPORTA);
    al_destroy_bitmap(OLHOCAVE);
    al_destroy_bitmap(VAMPMOCA1);
    al_destroy_bitmap(VAMPMOCA2);
    al_destroy_bitmap(CRUZ);
    al_destroy_bitmap(QUEIMA);
    al_destroy_bitmap(HOMEMVAMP1);
    al_destroy_bitmap(RATO);
    al_destroy_bitmap(FRUTO);
    al_destroy_bitmap(PISTOLA);
    al_destroy_bitmap(ORACAO);
    al_destroy_bitmap(FALA1);
    al_destroy_bitmap(FALA2);
    al_destroy_bitmap(ZOMBIE);
    al_destroy_bitmap(PLATAFORMA1);
    al_destroy_bitmap(PLATAFORMA2);
    al_destroy_bitmap(ZOIO);
    al_destroy_bitmap(GRAMA);
    al_destroy_bitmap(GRAMA2);
    al_destroy_bitmap(HIKARI);
    al_destroy_bitmap(MENSAGEMHIKARI);
    al_destroy_bitmap(FALA3);
    al_destroy_bitmap(FALA4);
    al_destroy_bitmap(FALA5);
    al_destroy_bitmap(BOAT);
    al_destroy_bitmap(ESCUDO);
    al_destroy_bitmap(FOG);
    al_destroy_bitmap(VAMPIRA);
    al_destroy_bitmap(YUYA);
    al_destroy_bitmap(YUKIMACHI);
    al_destroy_bitmap(YUKIYAMA);
    al_destroy_bitmap(FADE);
    al_destroy_bitmap(KAGESHIMA);
    al_destroy_bitmap(HP);
    al_destroy_bitmap(MP);
    al_destroy_bitmap(BOSS1INICIO);
    al_destroy_bitmap(BOSS1HP);
    al_destroy_bitmap(DEADTREE);
    al_destroy_bitmap(ESFERA1);





     return 0;
}



